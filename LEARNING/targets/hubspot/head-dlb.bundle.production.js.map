{"version":3,"file":"bundle.production.js","mappings":"gBAEIA,EAAoBC,E,qBCIxB,IAAIC,IAGFA,EADoB,oBAAXC,QAAqC,OAAXA,OACtBA,OACc,oBAAXC,QAAqC,OAAXA,OAC7BA,OAEAC,MAkBDC,IACZJ,EAAWK,KACT,SAAUC,EAAWC,GACnB,IAGEC,EAEAC,EACAC,EACAC,EAPEC,EAAQN,EAAUO,MAAM,KAC1BC,EAASd,EACTe,EAAO,GAEPC,EAAaJ,EAAMK,OAAS;AAK9BV,EAAMA,GAAO,CAAC;AACdC,EAAWI,EAAMI;AAGjB,IAAK,IAAIE,EAAI,EAAGA,EAAIF,EAAYE,IAAK,CAEnCJ,EADAC,EAAOH,EAAMM,IACEJ,EAAOC,IAAS,CAAC;AAChCD,EAASA,EAAOC,EAClB,CAGA,GAAID,EAAON,IAAaD,IAAQO,EAAON,GAAW,CAChDC,EAAWK,EAAON;AAClBE,EAAQ;AAER,IAAK,IAAIS,KAAQZ,EACf,GAAIA,EAAIa,eAAeD,GAGrB,GAA8B,iBAAnBV,EAASU,GAAoB,CAClCZ,EAAIY,KAAUV,EAASU,IACzBT,EAAMW,KAAK,CAAEC,QAASf,EAAIY,GAAOI,QAASd,EAASU;AAGrD,KAAOT,EAAMO,OAAS,GAAG,CACvBN,EAAQD,EAAMc;AAEd,IAAK,IAAIC,KAASd,EAAMW,QAClBX,EAAMW,QAAQF,eAAeK,KAGG,iBAAzBd,EAAMW,QAAQG,IACW,iBAAzBd,EAAMY,QAAQE,IACnBd,EAAMW,QAAQG,SACqB,IAAnCd,EAAMW,QAAQG,GAAOC,gBACa,IAAlCf,EAAMW,QAAQG,GAAOE,SASvBhB,EAAMY,QAAQE,GAASd,EAAMW,QAAQG,GAPjCd,EAAMW,QAAQG,KAAWd,EAAMY,QAAQE,IACzCf,EAAMW,KAAK,CACTC,QAASX,EAAMW,QAAQG,GACvBF,QAASZ,EAAMY,QAAQE,KAQnC,CACF,MACEhB,EAASU,GAAQZ,EAAIY,EAM7B,MACEL,EAAON,GAAYD;AAIE,oBAAZqB,SAA2BA,QAAQC,oBAC5CD,QAAQC,mBAAmBvB;AAG7B,OAAOQ,EAAON,EAChB,GAGA,U,kBC/GJoB,QAAQE,OAASF,QAAQG,U,mBCKzB,WACyB,oBAAZH,SAAuC,OAAZA,SAAoBA,QAAQE,QAChEE,QAAQC,KACN;AAIJL,QAAUA,SAAW,CAAC;AACtBA,QAAQM,QAAUN,QAAQM,SAAW,CAAC;AAGtC,IAAIC,EAAkB,GAGlBC,EAAkB,CAAC,EAGnBC,EAAgB,CAAC,EAGjBC,EAAiB,CAAC,EAGlBC,EAAuB,CAAC,EAExBC,EAAiB,oBACnBC,EAAoB;AAEtBb,QAAQM,QAAQQ,WAAa,SAAoBC,GAC/C,OAAO,CACT;AAGAf,QAAQM,QAAQU,aAAe,SAAUD,GACvC,GAAIN,EAAcM,GAChB,OAAON,EAAcM;AAGvB,IAAKf,QAAQM,QAAQQ,WAAWC,GAC9B,OAAO;AAET,IAAIE,EACFC,EAAQH,EAAG9B,MAAM,KACjBkC,EAAMD,EAAM7B,OACZV,EAAMN;AAER,IAAK4C,EAAI,EAAGA,EAAIE,IACdxC,EAAMA,EAAIuC,EAAMD,OADKA,GAKvB,OAAOtC,CACT;AAEAqB,QAAQoB,mBAAqB,WAC3B,OAAOb,CACT;AAEAP,QAAQqB,eAAiB,WACvB,OAAOb,CACT;AAEAR,QAAQsB,iBAAmB,WACzB,OAAOb,CACT;AAEAT,QAAQuB,kBAAoB,WAC1B,OAAOb,CACT;AAEAV,QAAQwB,wBAA0B,WAChC,OAAOb,CACT;AAEA,IAAIc,EAAsB,WACxB,OAAOb,EAAec,QAAQ,IAAK,IAAMb,IAAsB,IACjE;AAEAb,QAAQ2B,mBAAqB,WAQ3B,IANA,IAGEC,EAHEtB,EAAUC,EACZsB,EAAM,GACNC,EAAS,CAAC,EAEVC,EAAS,CAAC,EAEHC,EAAI1B,EAAQjB,OAAQ2C,KAAO,CAClC,IAAIC,EAAS3B,EAAQ0B;AACrB,GAAKC,GAAWA,EAAOC,KAAvB,CAEAH,EAAOE,EAAOlB,KAAM;AACpB,IAAK,IAAIE,EAAIgB,EAAOC,KAAK7C,OAAQ4B,KAC/Ba,EAAOG,EAAOC,KAAKjB,KAAM,CAJU,CAMvC,CAEA,IAAKW,KAAOE,EACLC,EAAOH,IAAMC,EAAIpC,KAAKmC;AAG7B,OAAOC,CACT;AAEA,SAASM,IACP,IAAIC;AACJ,QAAoD,IAAzCpC,QAAQqC,6BACjB,OAAOrC,QAAQqC;AAGjB,IAAoC,IAAhChE,OAAOiE,qBACTF,GAAO;IACF,CAEL,IAAIG,EAAO;AACX,IACEC,aAAaC,QAAQF,EAAMA;AAC3BC,aAAaE,WAAWH;AACxBH,EAA6C,SAAtCI,aAAaF,oBACtB,CAAE,MAAOK,GACPP,GAAO,CACT,CACF,CAEApC,QAAQqC,6BAA+BD;AACvC,OAAOA,CACT,CAGA,SAASQ,EAAUC,GACjB,IAAI5B,EACF6B,EACAC,EAAO,GACPC,EAAUH,EAAUG;AAGtB,IAAK/B,EAAI,EAAGA,EAAI+B,EAAQ3D,OAAQ4B,IAC9B8B,EAAK9B,GAAKjB,QAAQM,QAAQU,aAAagC,EAAQ/B;AAGjD,IACE6B,EAC8B,mBAArBD,EAAUZ,OACbY,EAAUZ,OAAOgB,MAAM1E,KAAMwE,GAC7BF,EAAUZ,MAClB,CAAE,MAAOU,GACP,IAAIO,EAAWL,EAAU9B,IAAMH;AAC/BF,EAAewC,IAAY;AAE3B,GAAIf,IACF,MAAMQ;AAGNQ,YAAW,WACLD,EAAS7D,OAAS,GACpBe,QAAQgD,IAAI,uCAAwCF;AAEtD,MAAMP,CACR,GAAG;AAGL,MACF,CAEA,OAAOG,CACT,CAGA,SAASO,EAAaR,GACpB,IAAOC;AAEPA,EAASF,EAAUC;AAGnB,GAAIA,EAAU9B,GAAI,CAChBN,EAAcoC,EAAU9B,IAAM+B;AAC1B9C,QAAQM,QAAQQ,WAAW+B,EAAU9B,IACvC1C,OAAOI,KAAKoE,EAAU9B,GAAI+B,GAE1B9C,QAAQC,mBAAmB4C,EAAU9B,GAEzC,CACF,CAGAf,QAAQC,mBAAqB,SAAUc,GACrC,IAAI8B,EAAWX,EACXjB,EACFe,EACAsB,EAAkB;AAEpB,IAAKrC,EAAI,EAAGA,EAAIV,EAAgBlB,OAAQ4B,IAGtC,IAFA4B,EAAYtC,EAAgBU,IAEdsC,SAASxC,GAAK,QAEnB8B,EAAUU,SAASxC;AAC1BmB,EAAOW,EAAUX;AACjB,IAAKF,EAAI,EAAGA,EAAIE,EAAK7C,OAAQ2C,IAC3B,GAAIE,EAAKF,KAAOjB,EAAI,CAClBmB,EAAKsB,OAAOxB,EAAG;AACf,KACF,CAGF,GAAoB,IAAhBE,EAAK7C,OAAc,CACrBkB,EAAgBiD,OAAOvC,EAAG;AAC1BqC,EAAgB7D,KAAKoD;AACrB5B,GACF,CACF,CAGF,IAAKA,EAAI,EAAGA,EAAIqC,EAAgBjE,OAAQ4B,IACtCoC,EAAaC,EAAgBrC,GAEjC;AAGA,SAASwC,EAAiB1C,GACxB,IAAIE;AACJ,IAAKA,EAAI,EAAGA,EAAIV,EAAgBlB,OAAQ4B,IAGtC,GAFYV,EAAgBU,GAEdsC,SAASxC,GACrB,OAAO;AAGX,OAAO,CACT,CAGA,SAAS2C,EAAkB3C,EAAI8B,GAS7B,IARA,IAKEc,EACA/B,EANEM,EAAOW,EAAUX,KACnBqB,EAAWV,EAAUU,SACrBtC,EAAIiB,EAAK7C,OAETuE,EAAoB,GAIf3C,KAAK,CACVW,EAAMM,EAAKjB;AAEX,GAAIjB,QAAQM,QAAQU,aAAaY,GAAM,CACrCM,EAAKsB,OAAOvC,EAAG;OACRsC,EAAS3B,EAClB,CAGIpB,EAAgBoB,IAClBgC,EAAkBnE,KAAKmC,EAE3B,CAEIM,EAAK7C,OAAS,EAChBkB,EAAgBd,KAAKoD,GAErBQ,EAAaR;AAIf,IAAK5B,EAAI,EAAGA,EAAI2C,EAAkBvE,OAAQ4B,IAAK,CAC7CW,EAAMgC,EAAkB3C;AAExB,GADA0C,EAAanD,EAAgBoB,GAC7B,QAGOpB,EAAgBoB;AACvB8B,EAAkB9B,EAAK+B,EAFvB,CAGF,CACF,CAEA,SAASE,EAAgBC,GACvB,MAAO,CACLC,SAAUD,EAASE,cACnBC,WAAYH,EAASI,gBACrBC,aAAcL,EAASM,kBACvBC,aAAcP,EAASQ,kBAE3B,CAEA,SAASC,IAEP,IAAKC,MAAMC,kBACT,OAAO,IAAID,OAAQE;AAMrB,IAAIC,EAAOH,MAAMI;AAEjB,IACEJ,MAAMI,kBAAoB,SAAUC,EAAGH,GACrC,OAAOA,CACT;AACA,IAAII,EAAM,IAAIN;AACdA,MAAMC,kBAAkBK;AACxB,IAAIJ,EAAQI,EAAIJ,MAEZ5B,GADW4B,EAAM,GAAGV,cACXU,EACVK,MAAM,GACNC,IAAInB,GACJoB,QAAO,SAAUC,GAChB,OACGA,EAAEb,cAC2C,IAA7Ca,EAAEb,aAAac,QAAQ,mBACwB,IAA9CD,EAAEb,aAAac,QAAQ,kBAE7B;AAEF,OAAOrC,EAAOzD,OAAS,EAAIyD,EAAS,IACtC,CAAE,MAAOH,GACP,OAAO,IACT,CAAE,QACA6B,MAAMI,kBAAoBD,CAC5B,CACF,CAQA3E,QAAQoF,aAAe,SAAUrE,EAAImB,EAAMD,EAAQoD,GACjD,IACExC,EACAjB,EACA8C,EAHEnB,EAAW,CAAC;AAOZpB,MACFuC,EAAQH;AAGV,GAAoB,iBAATrC,EACT,MAAM,IAAIsC,MACR;AAIJ,GAAiC,kBAAtBa,EACT,MAAM,IAAIb,MACR;AAIJ,QAA0Bc,IAAtB7E,EAAcM,GAAmB,CACnC,GAAsB,mBAAXkB,EAOT,MAAM,IAAIuC,MACR,sDACEzD,EACA;AATJX,QAAQC,KACN,0DACEU,EACA,mCASR,CAEA,IAAK,IAAIE,EAAI,EAAGA,EAAIiB,EAAK7C,OAAQ4B,IAE/BsC,EADA3B,EAAMM,EAAKjB,IACKW;AAGlBiB,EAAY,CACV9B,GAAIA,EACJiC,QAASd,EAAK6C,QACd7C,KAAMA,EACNqB,SAAUA,EACVtB,OAAQA,EACRyC,MAAOA;AAIT/D,EAAqBI,GAAMU,KAAyBoB;AAE1C,MAAN9B,GAAcsE,GAAqB5B,EAAiB1C,GACtD2C,EAAkB3C,EAAI8B,GAEtBrC,EAAgBO,GAAM8B,CAE1B;AAEA7C,QAAQuF,YAAc,SAAUxE,EAAImB,EAAMD,GACxCjC,QAAQoF,aAAarE,EAAImB,EAAMD,GAAQ,EACzC;AAEAjC,QAAQG,WAAa,SAAUY,EAAImB,EAAMD,GACvCjC,QAAQoF,aAAarE,EAAImB,EAAMD,GAAQ,EACzC;AAGAjC,QAAQE,OAASF,QAAQuF;AAKzBvF,QAAQwF,QAAU,SAAUtD,EAAMuD,GAChCzF,QAAQuF,YAAY,KAAMrD,EAAMuD,EAClC;AAEAzF,QAAQ0F,YAAc,SAAUC,GAC9B,IAAIC;AAEJ5F,QAAQwF,QAAQ,CAACG,IAAW,SAAU7C,GACpC8C,EAAM9C,CACR;AAEA,IAAK8C,EACH,MAAM,IAAIpB,MACRmB,EAAW;AAIf,OAAOC,CACT,CACD,CAtaD;CAwaA,WACE,IAAIC,EAAmB,GACnBC,EAAsB;AAG1BzH,OAAO0H,iBAAiB,sBAAsB,SAAUpD,GACtDmD,EAAoBrG,KAAKkD,EAAEqD;AAC3BH,EAAiBpG,KAAKkD,EAAEsD,OAC1B;AAEA5H,OAAO0H,iBAAiB,oBAAoB,SAAUpD,GACpD,IAAIqD,EAAUrD,EAAEqD,QACZE,EAAKJ,EAAoBX,QAAQa;AACrC,IAAY,IAARE,EAAW,CACbJ,EAAoBtC,OAAO0C,EAAI;AAC/BL,EAAiBrC,OAAO0C,EAAI,EAC9B,CACF;AAEAlG,QAAQmG,oBAAsB,WAC5B,OAAON,EAAiBd,OAC1B,CACD,CAtBD,E;AC3aA,IAAIqB,EAAyB,EAAQ;AACrCC,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO;AAETD,EAAA,QAAkBE;AAClB,IAAIC,EAAUN,EAAuB,EAAQ,SACzCO,EAAkBP,EAAuB,EAAQ,SACjDQ,EAAWR,EAAuB,EAAQ,SAC1CS,EAAWT,EAAuB,EAAQ,SAC1CU,EAAiB,EAAQ;AAE7B,MAAMC,EAAgB;AACtB,SAASC,IACP,IACE,IAAMC,WAAYA,SAASC,OACzB;AAEF,MAAMC,EAAQF,SAASC,OAAOC,MAAM;AACpC,OAAOA,EAAQC,mBAAmBD,EAAM,SAAM7B,CAChD,CAAE,MAAO+B,GACP,MACF,CACF,CACA,SAASC,EAAgBC,GACvB,OAAO,SAAsBC,GACvBD,IACFC,EAAOD,EAAiBC;AAE1B,MAAMC,EAAsBT;AAC5B,GAAIS,EAAqB,CACvBD,EAAKE,MAAQF,EAAKE,OAAS,CAAC;AAC5BF,EAAKE,MAAMC,eAAiBF,CAC9B,CACA,IACE,MAAMG,EAAaC,KAAKC,UAAUN,EAAKE;AACvC,GAAIE,EAAWvI,OAAS0H,EAAe,CACjCL,EAAQqB,QAAQC,MAAM,WACxB5H,QAAQ6H,MAAM,8CAA8CL,EAAWvI,oFAAqFmI,EAAKE;AAEnKF,EAAKE,MAAQ,CACXQ,QAAS,iGAEb,CACF,CAAE,MAAOb,GAEHX,EAAQqB,QAAQC,MAAM,WACxB5H,QAAQ6H,MAAM,8HAA+HT,EAAKE;AAEpJF,EAAKE,MAAQ,CACXQ,QAAS,sFAEb,CACA,OAAOV,CACT,CACF,CACA,SAASf,EAAU0B,EAAKC,EAAU,CAAC,QACM,IAA5BvB,EAASkB,QAAQM,QAAiE,SAAvC3B,EAAQqB,QAAQO,SAAS,WAC7ElI,QAAQC,KAAK;AAEf,MAAM,OACJgI,GACExB,EAASkB,QACPQ,EAAiB,CACrBC,WAAY,EAEZC,YAAY,EACZC,aAAc,CAAC,oCAAqC,uDAAwD,6CAA8C,+DAAgE,qCAAsC,mCAAoC,mCAAoC,iCACxUC,WAAY,IAERC,EAAyBR,EAAQM,cAAgB;AACvDN,EAAU/B,OAAOwC,OAAO,CAAC,EAAGN,EAAgBH,EAAS,CACnDM,aAAc,IAAIH,EAAeG,gBAAiBE;AAEpD,MAAME,EAAMpC,EAAQqB,QAAQO,SAAS;AACrC,IAAIS;AACJ,IACEA,KAAsB9B,UAAYA,SAASC,QAAUD,SAASC,OAAO8B,SAAS,eAChF,CAAE,MAAO3B,GACP0B,GAAmB,CACrB,CACA,MAAME,GAAa,EAAInC,EAAeoC;AACtCtC,EAASmB,QAAQoB,OAAOhB,EAAK,CAC3BiB,QAASf,GAAUA,EAAOgB,sBAC1BX,aAAcN,EAAQM,aACtBC,WAAYP,EAAQO,WACpBH,WAAYJ,EAAQI,WACpBc,YAAaR,EACbS,KAAMlD,OAAOwC,OAAO,CAClBC,MACAU,QAASP,EAAaA,EAAWQ,WAMjCpB,GAAUA,EAAOqB,eACjBC,SAAUhD,EAAgBoB,QAAQ6B,IAAI,CACpCC,kBAAkB,IAEpBC,OAAQpD,EAAQqB,QAAQgC,YACxBhB,oBACCX,EAAQmB,MACXS,mBAAoB5B,EAAQ4B,oBAAsB,CAACC,GAASA,GAC5DC,gBAAiB,CACf9J,SAAS,GAEX+J,aAAc7C,EAAgBc,EAAQ+B,cACtCC,mBAAoBhC,EAAQgC,oBAAsB,MAAO,GACzD3B,WAAYL,EAAQK,aACnB4B;CACC3D,EAAQqB,QAAQC,MAAM,WAActB,EAAQqB,QAAQuC,SAAS,YAI/D1D,EAASmB,QAAQC,OAAQ;AAEtBtB,EAAQqB,QAAQuC,SAAS,WAG5B1D,EAASmB,QAAQwC,cAAa,EAC5BC,gBAEAA,GAAW,GAGjB,CACA,MAAMC,EAAkBpM,OAAOqM;AAC/BrM,OAAOqM,YAAc,SAA4BC,KAAOC,GACpC,mBAAPD,GACT/D,EAASmB,QAAQ8C,iBAAiB,IAAIrG,MAAM;AAE9C,OAAOiG,EAAgBE,KAAOC,EAChC;AACA,MAAME,EAAiBzM,OAAO8E;AAC9B9E,OAAO8E,WAAa,SAA2BwH,KAAOC,GAClC,mBAAPD,GACT/D,EAASmB,QAAQ8C,iBAAiB,IAAIrG,MAAM;AAE9C,OAAOsG,EAAeH,KAAOC,EAC/B;AACA3I,EAAOsE,QAAUA,EAAQwB,O;AC5IzB1B,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO;AAETD,EAAQ2C,cAAgBA;AACxB,MAAM6B,EAAsC;AAC5C,SAAS7B,EAAc8B,EAAO3M,OAAO4M,aACnC,IACE,MAAMC,EAAuBF,EAAKG,iBAAiB,cAAc,GAE3DC,EADsBF,EAAqBG,aACTC,MAAKC,GAASA,EAAMpM,OAAS4L,IAAqCK,aACnG3B,EAAY+B,GAAYJ,EAAYnM,MAAM;AACjD,YAAmBqG,IAAfmE,QAAyCnE,IAAbkG,EACvB,CACL/B,aACA+B,iBAGJ,CACF,CAAE,MAAO7I,GACP,MACF,CACF,C,mBCxBA,SAAS8I,EAAiBvD,GACxB3J,KAAKY,KAAO;AACZZ,KAAK2J,QAAUA,CACjB,CACAuD,EAAiBC,UAAY,IAAIlH;AACjCiH,EAAiBC,UAAUC,YAAcF;AAEzCxJ,EAAOsE,QAAUkF,C,mBCPjB,IAAIG,EAAa,SAAUxL,EAASyL,EAAOC,GACzC,IAAIC,EAAuB3L,EAAQyL,GAC/BG,EAAkB5L;AAEtB,GAAMyL,KAASzL,EAAf,CAIA,IAAI6L,EAAwB,SAAVJ,EAAmB,UAAYA;AAEjDzL,EAAQyL,GAAS,WACf,IAAI9I,EAAO,GAAGgC,MAAMmH,KAAKC,WAErBC,EAAM,GAAKrJ,EAAKsJ,KAAK,KACrB7E,EAAO,CACTqE,MAAOI,EACPK,OAAQ,UACR5E,MAAO,CAAEyE,UAAWpJ;AAGtB,GAAc,WAAV8I,GACF,IAAgB,IAAZ9I,EAAK,GAAc,CAErBqJ,EACE,sBAAwBrJ,EAAKgC,MAAM,GAAGsH,KAAK,MAAQ;AACrD7E,EAAKE,MAAMyE,UAAYpJ,EAAKgC,MAAM;AAClC+G,GAAYA,EAASM,EAAK5E,EAC5B,OAEAsE,GAAYA,EAASM,EAAK5E;AAIxBuE,GAGFQ,SAASb,UAAUzI,MAAMiJ,KACvBH,EACAC,EACAjJ,EAGN,CApCA,CAqCF;AAEAd,EAAOsE,QAAU,CACfqF,WAAYA,E,uBCxCd,IAAMY,MAAOC,GAAqB,EAAQ,QAGtCC,EACgB,oBAAXrO,OACHA,OACkB,oBAAXC,OACPA,OACgB,oBAATqO,KACPA,KACA,CAAC,EACHC,EAASF,EAAQF,MAEjBA,EAAQ,IAAIC;AAQhBD,EAAMK,WAAa,WACjBH,EAAQF,MAAQI;AAChB,OAAOJ,CACT;AAEAA,EAAMM;AAMN7K,EAAOsE,QAAQ4C,OAASqD,EAAMrD,OAAO4D,KAAKP;AAC1CvK,EAAOsE,QAAQ8D,QAAUmC,EAAMnC,QAAQ0C,KAAKP;AAC5CvK,EAAOsE,QAAQyG,OAASR,EAAMQ,OAAOD,KAAKP;AAC1CvK,EAAOsE,QAAQ0G,QAAUT,EAAMS,QAAQF,KAAKP;AAC5CvK,EAAOsE,QAAQ2G,KAAOV,EAAMU,KAAKH,KAAKP;AACtCvK,EAAOsE,QAAQ4G,UAAYX,EAAMW,UAAUJ,KAAKP;AAChDvK,EAAOsE,QAAQ6G,iBAAmBZ,EAAMY,iBAAiBL,KAAKP;AAC9DvK,EAAOsE,QAAQsE,iBAAmB2B,EAAM3B,iBAAiBkC,KAAKP;AAC9DvK,EAAOsE,QAAQ8G,eAAiBb,EAAMa,eAAeN,KAAKP;AAC1DvK,EAAOsE,QAAQ+G,kBAAoBd,EAAMc,kBAAkBP,KAAKP;AAChEvK,EAAOsE,QAAQgH,UAAYf,EAAMe,UAAUR,KAAKP;AAChDvK,EAAOsE,QAAQiH,eAAiBhB,EAAMgB,eAAeT,KAAKP;AAC1DvK,EAAOsE,QAAQkH,gBAAkBjB,EAAMiB,gBAAgBV,KAAKP;AAC5DvK,EAAOsE,QAAQmH,eAAiBlB,EAAMkB,eAAeX,KAAKP;AAC1DvK,EAAOsE,QAAQoH,aAAenB,EAAMmB,aAAaZ,KAAKP;AACtDvK,EAAOsE,QAAQqH,WAAapB,EAAMoB,WAAWb,KAAKP;AAClDvK,EAAOsE,QAAQsH,eAAiBrB,EAAMqB,eAAed,KAAKP;AAC1DvK,EAAOsE,QAAQuH,WAAatB,EAAMsB,WAAWf,KAAKP;AAClDvK,EAAOsE,QAAQwH,gBAAkBvB,EAAMuB,gBAAgBhB,KAAKP;AAC5DvK,EAAOsE,QAAQyH,sBAAwBxB,EAAMwB,sBAAsBjB,KAAKP;AACxEvK,EAAOsE,QAAQ0H,sBAAwBzB,EAAMyB,sBAAsBlB,KAAKP;AACxEvK,EAAOsE,QAAQgE,aAAeiC,EAAMjC,aAAawC,KAAKP;AACtDvK,EAAOsE,QAAQ2H,cAAgB1B,EAAM0B,cAAcnB,KAAKP;AACxDvK,EAAOsE,QAAQ4H,YAAc3B,EAAM2B,YAAYpB,KAAKP;AACpDvK,EAAOsE,QAAQ6H,QAAU5B,EAAM4B,QAAQrB,KAAKP;AAC5CvK,EAAOsE,QAAQuG,UAAYN,EAAMM,UAAUC,KAAKP;AAChDvK,EAAOsE,QAAQ8H,iBAAmB7B,EAAM6B,iBAAiBtB,KAAKP;AAE9DvK,EAAOsE,QAAUiG,C;;;qCC7Db8B,EAAW,EAAQ,QACnBxG,EAAY,EAAQ,QACpB2D,EAAmB,EAAQ,SAC3B,6BACF8C,EAA4B,wBAC5BC,GACE,EAAQ,QAERC,EAAQ,EAAQ,QAChBC,EAAUD,EAAMC,QAChBC,EAAWF,EAAME,SAEjBC,GADAD,EAAWF,EAAME,SACFF,EAAMG,cACrBC,EAAcJ,EAAMI,YACpBC,EAAaL,EAAMK,WACnBC,EAAWN,EAAMM,SACjBC,EAAgBP,EAAMO,cACtBC,EAAOR,EAAMQ,KACbC,EAAcT,EAAMS,YACpBC,EAAWV,EAAMU,SACjBC,EAASX,EAAMW,OACfC,EAAaZ,EAAMY,WACnBC,EAAYb,EAAMa,UAClBC,EAAQd,EAAMc,MACdC,EAAkBf,EAAMe,gBACxBC,EAAmBhB,EAAMgB,iBACzBC,EAAWjB,EAAMiB,SACjBC,EAAOlB,EAAMkB,KAEbC,EAAoB,qBAEpBC,EAAU,2CAA2C5Q,MAAM,KAC7D6Q,EAAa;AAEf,SAASC,IACP,OAAQ,IAAIC,IACd,CAGA,IAAItD,EACgB,oBAAXrO,OACHA,OACkB,oBAAXC,OACPA,OACgB,oBAATqO,KACPA,KACA,CAAC,EACHsD,EAAYvD,EAAQzF,SACpBiJ,EAAaxD,EAAQyD;AAEzB,SAASC,EAAqBC,EAAUvE,GACtC,OAAOgD,EAAWhD,GACd,SAAUtE,GACR,OAAOsE,EAAStE,EAAM6I,EACxB,EACAvE,CACN,CAKO,SAASU,IACdjO,KAAK+R,WAA8B,iBAATzI,OAAqBA,KAAKC;AAEpDvJ,KAAKgS,cAAgB1B,EAAYoB;AACjC1R,KAAKiS,eAAiB3B,EAAYqB;AAClC3R,KAAKkS,uBAAyB;AAC9BlS,KAAKmS,UAAY;AACjBnS,KAAKoS,aAAe;AACpBpS,KAAKqS,cAAgB;AACrBrS,KAAKsS,WAAa;AAClBtS,KAAKuS,eAAiB;AACtBvS,KAAKwS,eAAiB,CAAC;AACvBxS,KAAKyS,eAAiB,CACpB1E,OAAQ,aACR5D,aAAc,GACdC,WAAY,GACZsI,cAAe,GACfC,aAAc,GACdC,qBAAqB,EACrBC,iBAAkB,EAGlBC,aAAc,IACdC,gBAAiB,GACjBpH,iBAAiB,EACjBqH,YAAY,EACZ/I,WAAY,EAGZgJ,sBAAuB,CACrBC,SAAS,EACTC,oBAAoB,EACpBC,sBAAsB,EACtBC,kBAAkB,EAClBC,gBAAiB;AAGrBtT,KAAKuT,eAAiB;AACtBvT,KAAKwT,mBAAoB;AACzBxT,KAAKyT,8BAAgCxN,MAAM8M;AAG3C/S,KAAK0T,iBAAmBvF,EAAQtM,SAAW,CAAC;AAC5C7B,KAAK2T,wBAA0B,CAAC;AAChC3T,KAAK4T,SAAW;AAChB5T,KAAK6T,WAAarC;AAClBxR,KAAK8T,iBAAmB;AACxB9T,KAAK+T,aAAe;AACpB/T,KAAKgU,mBAAqB;AAC1BhU,KAAKiU;AACLjU,KAAKkU,UAAY/F,EAAQgG;AACzBnU,KAAKoU,UAAYpU,KAAKkU,WAAalU,KAAKkU,UAAUG;AAClDrU,KAAKsU;AAGL,IAAK,IAAIC,KAAUvU,KAAK0T,iBACtB1T,KAAK2T,wBAAwBY,GAAUvU,KAAK0T,iBAAiBa,EAEjE,CAQAtG,EAAMd,UAAY,CAKhBqH,QAAS,SAET/K,OAAO,EAEPsG,SAAUA,EASVnF,OAAQ,SAAUhB,EAAKC,GACrB,IAAIuE,EAAOpO;AAEX,GAAIoO,EAAKiE,cAAe,CACtBrS,KAAKyU,UAAU,QAAS;AACxB,OAAOrG,CACT,CACA,IAAKxE,EAAK,OAAOwE;AAEjB,IAAIsG,EAAgBtG,EAAKqE;AAGrB5I,GACF6G,EAAK7G,GAAS,SAAU8K,EAAK1M,GAEf,SAAR0M,GAA0B,UAARA,GAA2B,SAARA,EACvCvG,EAAKoE,eAAemC,GAAO1M,EAE3ByM,EAAcC,GAAO1M,CAEzB;AAGFmG,EAAKK,OAAO7E;AAIZ8K,EAAcvK,aAAajJ,KAAK;AAChCwT,EAAcvK,aAAajJ,KACzB;AAIFwT,EAAcvK,aAAe2G,EAAW4D,EAAcvK;AACtDuK,EAActK,aAAasK,EAActK,WAAWtJ,QAChDgQ,EAAW4D,EAActK;AAE7BsK,EAAchC,gBAAgBgC,EAAchC,cAAc5R,QACtDgQ,EAAW4D,EAAchC;AAE7BgC,EAAc/B,aAAe7B,EAAW4D,EAAc/B;AACtD+B,EAAcE,eAAiBC,KAAKC,IAClC,EACAD,KAAKE,IAAIL,EAAcE,gBAAkB,IAAK;AAGhD,IAAII,EAAyB,CAC3BC,KAAK,EACLpT,SAAS,EACTqT,KAAK,EACLf,UAAU,GAGRxI,EAAkB+I,EAAc/I;AACM,oBAAtC,CAAC,EAAEwJ,SAASxH,KAAKhC,GACnBA,EAAkBgF,EAAYqE,EAAwBrJ,IACzB,IAApBA,IACTA,EAAkBqJ;AAEpBN,EAAc/I,gBAAkBA;AAEhC,IAAIyJ,EAAqB,CACvBC,UAAU,GAGRrC,EAAa0B,EAAc1B;AACM,oBAAjC,CAAC,EAAEmC,SAASxH,KAAKqF,GACnBA,EAAarC,EAAYyE,EAAoBpC,IACrB,IAAfA,IACTA,EAAaoC;AAEfV,EAAc1B,WAAaA;AAE3BjD,EAAS6C,sBAAwB8B,EAAc9B;AAG/C,OAAOxE,CACT,EAUAtC,QAAS,WACP,IAAIsC,EAAOpO;AACX,GAAIoO,EAAKyB,YAAczB,EAAKoF,kBAAmB,CAC7CzD,EAASuF,OAAOC,WAAU,WACxBnH,EAAKoH,wBAAwB9Q,MAAM0J,EAAMR,UAC3C;AAEEQ,EAAKqE,eAAeO,YACpB5E,EAAKqE,eAAeO,WAAWqC,UAE/BjH,EAAKqH;AAGHrH,EAAKqE,eAAe9G,iBAAiByC,EAAKsH;AAG9CtH,EAAKuH;AAELvH,EAAKoF,mBAAoB,CAC3B,CAEAvN,MAAM8M,gBAAkB3E,EAAKqE,eAAeM;AAC5C,OAAO/S,IACT,EAOAyO,OAAQ,SAAU7E,GAChB,IAAIwE,EAAOpO,KACT4V,EAAMxH,EAAKyH,UAAUjM,GACrBkM,EAAYF,EAAIG,KAAKC,YAAY,KACjCD,EAAOH,EAAIG,KAAKE,OAAO,EAAGH;AAE5B1H,EAAK8H,KAAOtM;AACZwE,EAAKkE,WAAasD,EAAIO;AACtB/H,EAAKgI,cAAgBR,EAAIS,MAAQT,EAAIS,KAAKJ,OAAO;AACjD7H,EAAKmE,eAAiBqD,EAAIG,KAAKE,OAAOH,EAAY;AAElD1H,EAAKiE,cAAgBjE,EAAKkI,iBAAiBV;AAE3CxH,EAAKmI,gBACHnI,EAAKiE,cACL,IACA0D,EACA,OACA3H,EAAKmE,eACL;AAEFnE,EAAKoI,yBACHpI,EAAKiE,cAAgB;AAIvBrS,KAAKsU,eACP,EAUA5F,QAAS,SAAU7E,EAAS4M,EAAMjS,GAChC,GAAI+L,EAAW1G,GAAU,CACvBrF,EAAOiS,GAAQ;AACfA,EAAO5M;AACPA,OAAU9C,CACZ,CAEA,OAAO/G,KAAK2O,KAAK9E,EAAS4M,GAAM/R,MAAM1E,KAAMwE,EAC9C,EAUAmK,KAAM,SAAU9E,EAAS4M,EAAMC,GAC7B,IAAItI,EAAOpO;AAGX,GAAIsQ,EAAYmG,KAAUlG,EAAW1G,GACnC,OAAOA;AAIT,GAAI0G,EAAW1G,GAAU,CACvB4M,EAAO5M;AACPA,OAAU9C,CACZ,CAIA,IAAKwJ,EAAWkG,GACd,OAAOA;AAIT,IACE,GAAIA,EAAKE,UACP,OAAOF;AAIT,GAAIA,EAAKG,kBACP,OAAOH,EAAKG,iBAEhB,CAAE,MAAOxS,GAIP,OAAOqS,CACT,CAIA,MAAM,aAAEI,GAAiB,CACvB,YAAW,GACT,IAAIrS,EAAO,GACT9B,EAAIkL,UAAU9M,OACdgW,GAAQjN,GAAYA,IAA4B,IAAjBA,EAAQiN;AAErCJ,GAAWnG,EAAWmG,IACxBA,EAAQhS,MAAM1E,KAAM4N;AAKtB,KAAOlL,KACL8B,EAAK9B,GAAKoU,EAAO1I,EAAKO,KAAK9E,EAAS+D,UAAUlL,IAAMkL,UAAUlL;AAEhE,IAKE,OAAO+T,EAAK/R,MAAM1E,KAAMwE,EAC1B,CAAE,MAAOJ,GACPgK,EAAK2I;AACL3I,EAAK9B,iBAAiBlI,EAAGyF;AACzB,MAAMzF,CACR,CACF;AAIF,IAAK,IAAI4S,KAAYP,EACf5F,EAAO4F,EAAMO,KACfH,EAAaG,GAAYP,EAAKO;AAGlCH,EAAa1J,UAAYsJ,EAAKtJ;AAE9BsJ,EAAKG,kBAAoBC;AAGzBA,EAAaF,WAAY;AACzBE,EAAaI,UAAYR;AAEzB,OAAOI,CACT,EAOAjI,UAAW,WACTmB,EAASuF,OAAO1G;AAEhB5O,KAAKkX;AAELjR,MAAM8M,gBAAkB/S,KAAKyT;AAC7BzT,KAAKwT,mBAAoB;AAEzB,OAAOxT,IACT,EASA6O,iBAAkB,SAAUsI,EAAWtN,EAAU,CAAC,GAEhD7J,KAAKoX,qBAAqB;AAC1BpX,KAAKoX,qBAAqB;AAE1B,MAAMnO,EAAO,CACXU,QAASwN,KACNtN,EACHyD,MAAO,OACP+J,aAAa;AAGfrX,KAAKsX,MAAMrO;AAEX,OAAOjJ,IACT,EASAsM,iBAAkB,SAAUiL,EAAI1N,GAE9B,IAAIuE,EAAOpO;AAEX,IAAKoO,EAAM,CACTvM,QAAQ6H,MACN;AAEF,OAAO1J,IACT,CACAoO,EAAKgJ,qBAAqB;AAC1BhJ,EAAKgJ,qBAAqB;AAG1B,IAAII,GAAcrH,EAAQoH,GACtBE,GAAmBpH,EAAakH,GAChCG,EAA2BrH,EAAakH,KAAQA,EAAG7N;AAEvD,GAAK8N,GAAcC,GAAoBC,EACrC,OAAO1X,KAAK8O,eACVyI,EACA5G,EACE,CACEgH,eAAgB,EAChBzN,YAAY,GAEdL;AAMFwG,EAAakH,KAAKA,EAAKA,EAAG7N;AAE9B,IAAIkO,EAAaL,EAAGM;AAChBD,GACFxJ,EAAK0J,mBAAmBF;AAItBL,EAAGQ,WACL3J,EAAKc,gBAAgB,IAAKqI,EAAGQ;AAK7B/X,KAAKyS,eAAeQ,sBAAsBC,SAC1ClT,KAAKgY,cAAcT,IAEnBvX,KAAKiY,mBAAmBV;AAI1BvX,KAAKkS,uBAAyBqF;AAO9B,IACE,IAAIpR,EAAQ4J,EAASmI,kBAAkBX;AACvCvX,KAAKmY,iBAAiBhS,EAAO0D,EAC/B,CAAE,MAAOuO,GACP,GAAIb,IAAOa,EACT,MAAMA,CAEV,CAEA,OAAOpY,IACT,EASA8O,eAAgB,SAAUjB,EAAKhE,GAC7B,IAAIuE,EAAOpO;AACXoO,EAAKgJ,qBAAqB;AAC1BhJ,EAAKgJ,qBAAqB;AAK1B,GACIpX,KAAKyS,eAAetI,aAAanG,MACnChE,KAAKyS,eAAetI,aAAanG,KAAK6J,GAEtC7N,KAAKqY,cAAc,iBAAkB,CACnC/K,MAAQzD,GAAWA,EAAQyD,OAAU;IALzC,CAYA,IAOIiK,EAPAtO,EAAO0H,EACT,CACEhH,QAASkE,EAAM,IAJnBhE,EAAUA,GAAW,CAAC;AActB,IACE,MAAM,IAAI5D,MAAM4H,EAClB,CAAE,MAAOuK,GACPb,EAAKa,CACP,CAGAb,EAAG3W,KAAO;AACV,IAAIuF,EAAQ4J,EAASmI,kBAAkBX,GAGnCe,EAAcnS,EAAMA,MAAM,GAE1BoS,EAAWD,GAAeA,EAAYE,KAAQ;AAElD,KACIxY,KAAKyS,eAAerI,WAAWpG,OACjChE,KAAKyS,eAAerI,WAAWpG,KAAKuU,OAMlCvY,KAAKyS,eAAeC,cAAc1O,MACnChE,KAAKyS,eAAeC,cAAc1O,KAAKuU,IAF1C,CAOA,GAAIvY,KAAKyS,eAAevI,YAAeL,GAAWA,EAAQK,WAAa,CACrEL,EAAU,CAGR4O,YAAa5K,KACVhE,EAIH8N,gBAAiB9N,EAAQ8N,gBAAkB,GAAK;AAGlD,IAAIe,EAAS1Y,KAAK2Y,eAAexS,EAAO0D;AACxCZ,EAAKiB,WAAa,CAEhBwO,OAAQA,EAAOE,UAEnB,CAGA5Y,KAAKsX,MAAMrO;AAEX,OAAOjJ,IAxBP,CA3CA,CAoEF,EAEA+O,kBAAmB,SAAU3O,GAC3B,IAAIsL,EAAQiF,EACV,CACEkI,UAAWrH,IAAQ,KAErBpR;AAGF,GAAImQ,EAAWvQ,KAAKyS,eAAehH,oBAAqB,CACtD,IAAIlH,EAASvE,KAAKyS,eAAehH,mBAAmBC;AAEpD,GAAI0E,EAAS7L,KAAYkM,EAAclM,GACrCmH,EAAQnH;KACH,IAAe,IAAXA,EACT,OAAOvE,IAEX,CAEAA,KAAK+T,aAAa7S,KAAKwK;AACnB1L,KAAK+T,aAAajT,OAASd,KAAKyS,eAAemC,gBACjD5U,KAAK+T,aAAa1S;AAEpB,OAAOrB,IACT,EAEAgP,UAAW,SAAU8J,GACnB,IAAIC,EAAa,GAAGvS,MAAMmH,KAAKC,UAAW;AAE1C5N,KAAK4T,SAAS1S,KAAK,CAAC4X,EAAQC;AACxB/Y,KAAKwT,mBACPxT,KAAK2V;AAGP,OAAO3V,IACT,EAQAiP,eAAgB,SAAUkH,GAExBnW,KAAKwS,eAAe2D,KAAOA;AAE3B,OAAOnW,IACT,EAQAkP,gBAAiB,SAAU/F,GACzBnJ,KAAKgZ,cAAc,QAAS7P;AAE5B,OAAOnJ,IACT,EAQAmP,eAAgB,SAAUnE,GACxBhL,KAAKgZ,cAAc,OAAQhO;AAE3B,OAAOhL,IACT,EAOAoP,aAAc,WACZpP,KAAKwS,eAAiB,CAAC;AAEvB,OAAOxS,IACT,EAOAqP,WAAY,WAEV,OAAO/F,KAAK2P,MAAM1P,EAAUvJ,KAAKwS,gBACnC,EAQAlD,eAAgB,SAAUvE,GACxB/K,KAAKyS,eAAe1H,YAAcA;AAElC,OAAO/K,IACT,EAQAuP,WAAY,SAAU1E,GACpB7K,KAAKyS,eAAe5H,QAAUA;AAE9B,OAAO7K,IACT,EASAwP,gBAAiB,SAAUjC,GACzB,IAAIuE,EAAW9R,KAAKyS,eAAe7G;AACnC5L,KAAKyS,eAAe7G,aAAeiG,EAAqBC,EAAUvE;AAClE,OAAOvN,IACT,EASAyP,sBAAuB,SAAUlC,GAC/B,IAAIuE,EAAW9R,KAAKyS,eAAehH;AACnCzL,KAAKyS,eAAehH,mBAAqBoG,EACvCC,EACAvE;AAEF,OAAOvN,IACT,EASA0P,sBAAuB,SAAUnC,GAC/B,IAAIuE,EAAW9R,KAAKyS,eAAe5G;AACnC7L,KAAKyS,eAAe5G,mBAAqBgG,EACvCC,EACAvE;AAEF,OAAOvN,IACT,EAWAgM,aAAc,SAAUkN,GACtBlZ,KAAKyS,eAAeyG,UAAYA;AAEhC,OAAOlZ,IACT,EAOA2P,cAAe,WACb,OAAO3P,KAAKkS,sBACd,EAOAtC,YAAa,WACX,OAAO5P,KAAKoS,YACd,EAOAvC,QAAS,WACP,IAAK7P,KAAK+R,SAAU,OAAO;AAC3B,IAAK/R,KAAKqS,cAAe,CAClBrS,KAAKmZ,0BACRnZ,KAAKmZ,yBAA0B;AAEjCnZ,KAAKyU,UAAU,QAAS;AAExB,OAAO,CACT,CACA,OAAO,CACT,EAEAlG,UAAW,WAIT,IAAI6K,EAAcjL,EAAQiL;AACtBA,GACFpZ,KAAK4K,OAAOwO,EAAYxP,IAAKwP,EAAYxO,QAAQkB,SAErD,EAEAgE,iBAAkB,SAAUjG,GAC1B,GACG6H,EADH,CAOA,IAAI9B,GAFJ/F,EAAUA,GAAW,CAAC,GAEIwP,SAAWrZ,KAAK4P;AAC1C,IAAKA,EACH,MAAM,IAAI1C,EAAiB;AAG7B,IAAItD,EAAMC,EAAQD,KAAO5J,KAAKkW;AAC9B,IAAKtM,EACH,MAAM,IAAIsD,EAAiB;AAG7B,IAAIoM,EAASC,mBACTC,EAAK;AACTA,GAAM,YAAcF,EAAO1J;AAC3B4J,GAAM,QAAUF,EAAO1P;AAEvB,IAAIuM,EAAOtM,EAAQsM,MAAQnW,KAAKwS,eAAe2D;AAC/C,GAAIA,EAAM,CACJA,EAAKvV,OAAM4Y,GAAM,SAAWF,EAAOnD,EAAKvV;AACxCuV,EAAKsD,QAAOD,GAAM,UAAYF,EAAOnD,EAAKsD,OAChD,CAEA,IAAIC,EAAe1Z,KAAKsW,iBAAiBtW,KAAK6V,UAAUjM,IAEpD+P,EAASjI,EAAUkI,cAAc;AACrCD,EAAOE,OAAQ;AACfF,EAAOG,IAAMJ,EAAe,yBAA2BF,GACtD9H,EAAUqI,MAAQrI,EAAUsI,MAAMC,YAAYN,EA9BvC,CA+BV,EAGA7B,mBAAoB,SAAUF,GAC5B,IACE,IAAIxJ,EAAOpO,KACPka,EAAkBnK,EAASmI,kBAAkBN,GAC7CuC,EAAwBna,KAAK2Y,eAAeuB,EAAiB,CAAC,GAAGzT,KAClE2T,IACQ,CACLC,KAAMD,EAAWE,SACjBC,WAAYH,EAAWI,UAAY,IACnC9U,WAAY0U,EAAWK,OACvBC,OAAQN,EAAWO;AAKrBT,EAAgBvQ,SAClByE,EAAKc,gBAAgB,CACnB0L,kBAAmBV,EAAgBvQ;AAInCwQ,GAAyBA,EAAsBrZ,QACjDsN,EAAKc,gBAAgB,CACnBiL,sBAAuB7Q,KAAKC,UAAU4Q,IAG5C,CAAE,MAAO/B,GACP,GAAIR,IAAeQ,EACjB,MAAMA,CAEV,CACF,EAIAJ,cAAe,SAAUtO,GACvB,QAAKA,IAOFA,EAAMC,SACLD,EAAMC,QAAQc,UACdf,EAAMC,QAAQc,SAAS,qBACzBzK,KAAK6a,wBAAwBnR,IAC7B1J,KAAK8a,4BAA4BpR,GAErC,EAEAmR,wBAAyB,SAAUnR,GACjC,SAAUA,EAAMmO,QAASnO,EAAMmO,MAAMA,MACvC,EAEAiD,4BAA6B,SAAUpR,GACrC,MAAMqR,EAAYrR,EAAMmO,OAASnO,EAAMmO,MAAMA;AAC7C,SAEIkD,KACEA,EAAU3N,aACqB,eAA/B2N,EAAU3N,YAAYxM,MACrBma,EAAU3N,aACsB,uBAA/B2N,EAAU3N,YAAYxM,MACtBma,EAAUC,MAGpB,EAEA/C,mBAAoB,SAAUvO,GAE5B,IAAKyG,EAAQzG,GACX;AAGF,MAAMuR,EAAejb,KAAKkb,qBAAqBxR;AAE/C,GAAIuR,EAAc,CAEhBjb,KAAKkP,gBAAgB,CAEnBiM,iBAAkBF,EAAaG,YAC/BC,gBAAiBJ,EAAaV,WAC9Be,eAAgBL,EAAaM,UAG7BC,sBAAuBP,EAAaQ,iBACpCC,uBAAwBT,EAAaU,kBACrCC,qBAAsBX,EAAaY,gBAGnCC,eAAgBb,EAAac,UAC7BC,iBAAkBf,EAAagB;AAIjC,GAAIjc,KAAKyS,eAAeQ,sBAAsBG,qBAC5C,IACE1J,EAAMC,QAAU3J,KAAKkc,4BACnBxS,EAAMC,QACNsR,EAEJ,CAAE,MAAO7W,GAEPpE,KAAKyU,UAAU,OAAQ,yCAA0CrQ,EACnE,CAEJ,CACF,EAEA8W,qBAAsB,SAAUxR,GAC9B,MAAMgF,EAAU,CAAC;AAEjB,IAEE,GAAIhF,EAAMC,QAAS,CACjB,MAAMwS,EAAezS,EAAMC,QAAQf,MAAM;AACrCuT,IACFzN,EAAQ6L,WAAa4B,EAAa,GAEtC,CAGA,IAAIC,EAAe1S,EACf2S,EAAQ;AACZ,MAAMC,EACJtc,KAAKyS,eAAeQ,sBAAsBK;AAE5C,KAAO8I,GAAgBC,EAAQC,GACzBF,EAAavE,OADsB,CAErCuE,EAAeA,EAAavE;AAC5BwE,GAIJ,CAGA,MAAMtB,EAAYqB;AAGlB1N,EAAQ0M,YAAcpb,KAAKuc,oBAAoB7S,EAAOqR;AAEtD,GAAIA,GAAaA,IAAcrR,EAAO,CACpCgF,EAAQ6M,UAAYR,EAAUC,MAAQ;AACtCtM,EAAQmN,gBACNd,EAAUyB,mBAAqBzB,EAAUpR;AAG3C,GACGoR,EAAU3N,aACsB,eAA/B2N,EAAU3N,YAAYxM,MACL,qBAAnBma,EAAUC,KACV,CACAtM,EAAQ+M,iBAAmBV;AAC3BrM,EAAQ6M,UAAY,cACtB,MAAO,GACJR,EAAU3N,aACsB,uBAA/B2N,EAAU3N,YAAYxM,MACL,kBAAnBma,EAAUC,KACV,CACAtM,EAAQiN,kBACNZ,EAAUC,MACTD,EAAU0B,eAAiB1B,EAAU0B,cAAczB;AACtDtM,EAAQ6M,UAAY,gBACtB,CAGIvb,KAAKyS,eAAeQ,sBAAsBI,mBAC5C3E,EAAQqN,UAAYrS,EAAMvD,MAE9B,CACF,CAAE,MAAO/B,GAEPpE,KAAKyU,UAAU,OAAQ,mCAAoCrQ,EAC7D,CAEA,OAAOsK,CACT,EAEA6N,oBAAqB,SAAU7S,EAAOqR,GACpC,IAIE,MAAM5U,EAAQuD,EAAMvD,OAAUuD,EAAMmO,OAASnO,EAAMmO,MAAM1R;AACzD,GAAIA,EAAO,CACT,MAAMuW,EAAevW,EAAMyC,MAAM;AACjC,GAAI8T,EAAc,OAAOA,EAAa,EACxC,CAGA,OAAI3B,EAAUK,YAAoBL,EAAUK,YACxCL,EAAU4B,QAAgB5B,EAAU4B,QAEjC,iBACT,CAAE,MAAOvY,GACP,MAAO,iBACT,CACF,EAEA8X,4BAA6B,SAAUL,EAAiBnN,GACtD,IAAIkO,EAAWf;AAEXnN,EAAQ0M,aAAuC,oBAAxB1M,EAAQ0M,cACjCwB,GAAY,cAAgBlO,EAAQ0M,YAAc;AAGhD1M,EAAQ6L,aACVqC,GAAY,aAAelO,EAAQ6L,WAAa;AAG9C7L,EAAQ6M,WAAmC,YAAtB7M,EAAQ6M,YAC/BqB,GAAY,WAAalO,EAAQ6M,UAAY;AAI7C7M,EAAQmN,iBACRnN,EAAQmN,kBAAoBA,IAE5Be,GAAY,cAAgBlO,EAAQmN,gBAAkB;AAGxD,OAAOe,CACT,EAEAxF,qBAAsB,SAAUzC,GAC9B,IAAIvG,EAAOpO;AACNsQ,EAAYlC,EAAKoE,eAAerJ,eAC5BiF,EAAKoE,eAAerJ,MAAMwL,EAErC,EAEAoC,mBAAoB,WAClB,IAAI3I,EAAOpO;AACXA,KAAKuT,gBAAkB;AACvB3O,YAAW,WAETwJ,EAAKmF,gBAAkB,CACzB,GACF,EAEA8E,cAAe,SAAUwE,EAAWhT,GAElC,IAAIiT,EAAKnI;AAET,GAAK3U,KAAKgS,aAAV,CAEAnI,EAAUA,GAAW,CAAC;AAEtBgT,EACE,QAAUA,EAAU5G,OAAO,EAAG,GAAG8G,cAAgBF,EAAU5G,OAAO;AAEhEvE,EAAUsL,aACZF,EAAMpL,EAAUsL,YAAY,eACxBC,UAAUJ,GAAW,GAAM,IAE/BC,EAAMpL,EAAUwL,qBACZL,UAAYA;AAGlB,IAAKlI,KAAO9K,EACNgH,EAAOhH,EAAS8K,KAClBmI,EAAInI,GAAO9K,EAAQ8K;AAGvB,GAAIjD,EAAUsL,YAEZtL,EAAUyL,cAAcL;KAIxB,IACEpL,EAAU0L,UAAU,KAAON,EAAID,UAAUQ,cAAeP,EAC1D,CAAE,MAAO1Y,GAET,CA9B4B,CAgChC,EAQAkZ,wBAAyB,SAAUC,GACjC,IAAInP,EAAOpO;AACX,OAAO,SAAU8c,GAIf1O,EAAK6F,iBAAmB;AAKxB,GAAI7F,EAAK4F,qBAAuB8I,EAAhC,CAEA1O,EAAK4F,mBAAqB8I;AAM1B,IAAIU;AACJ,IACEA,EAAS,IAAiBV,EAAIU,OAChC,CAAE,MAAOpZ,GACPoZ,EAAS,WACX,CAEApP,EAAKW,kBAAkB,CACrB0O,SAAU,MAAQF,EAClB5T,QAAS6T,GAjBgC,CAmB7C,CACF,EAOAE,sBAAuB,WACrB,IAAItP,EAAOpO,KACT2d,EAAmB;AAKrB,OAAO,SAAUb,GACf,IAAIU;AACJ,IACEA,EAASV,EAAIU,MACf,CAAE,MAAOpZ,GAGP,MACF,CACA,IAAIwZ,EAAUJ,GAAUA,EAAOI;AAK/B,GACGA,IACY,UAAZA,GACa,aAAZA,GACCJ,EAAOK,mBAJZ,CAUA,IAAIC,EAAU1P,EAAK6F;AACd6J,GACH1P,EAAKkP,wBAAwB,QAA7BlP,CAAsC0O;AAExCiB,aAAaD;AACb1P,EAAK6F,iBAAmBrP,YAAW,WACjCwJ,EAAK6F,iBAAmB,IAC1B,GAAG0J,EAXK,CAYV,CACF,EAQAK,kBAAmB,SAAUC,EAAMC,GACjC,IAAIC,EAAYhN,EAASnR,KAAKkU,UAAUG,MACpC+J,EAAWjN,EAAS+M,GACpBG,EAAalN,EAAS8M;AAK1Bje,KAAKoU,UAAY8J;AAKfC,EAAUG,WAAaF,EAASE,UAChCH,EAAUI,OAASH,EAASG,OAE5BL,EAAKE,EAASI;AAEdL,EAAUG,WAAaD,EAAWC,UAClCH,EAAUI,OAASF,EAAWE,OAE9BN,EAAOI,EAAWG;AAEpBxe,KAAK+O,kBAAkB,CACrB0O,SAAU,aACVxU,KAAM,CACJiV,IAAI,IAAAO,0BAAyBP,GAC7BD,MAAM,IAAAQ,0BAAyBR,KAGrC,EAMAxI,oBAAqB,WACnB,IAAIrH,EAAOpO,KAEP0e,EAAkBtQ,EAAK0F;AAE3B,SAAS6K,EAAWvY,GAClB,OAAO,SAAUgG,EAAIwS,GAKnB,IADA,IAAIpa,EAAO,IAAIqa,MAAMjR,UAAU9M,QACtB4B,EAAI,EAAGA,EAAI8B,EAAK1D,SAAU4B,EACjC8B,EAAK9B,GAAKkL,UAAUlL;AAEtB,IAAIoc,EAAmBta,EAAK;AACxB+L,EAAWuO,KACbta,EAAK,GAAK4J,EAAKO,KAAKmQ;AAMtB,OAAI1Y,EAAK1B,MACA0B,EAAK1B,MAAM1E,KAAMwE,GAEjB4B,EAAK5B,EAAK,GAAIA,EAAK,GAE9B,CACF,CAEA,IAAImH,EAAkB3L,KAAKyS,eAAe9G;AAE1C,SAASoT,EAAgBhf,GACvB,IAAIif,EAAQ7Q,EAAQpO,IAAWoO,EAAQpO,GAAQoN;AAC/C,GACE6R,GACAA,EAAM/d,gBACN+d,EAAM/d,eAAe,oBACrB,CACAmQ,EACE4N,EACA,oBACA,SAAU5Y,GACR,OAAO,SAAUmX,EAASnR,EAAI6S,EAASC,GAErC,IACM9S,GAAMA,EAAG+S,cACX/S,EAAG+S,YAAc/Q,EAAKO,KAAKvC,EAAG+S,aAElC,CAAE,MAAO5Y,GAET,CAIA,IAAI6Y,EAAQC,EAAcC;AAE1B,GACE3T,GACAA,EAAgBuJ,MACJ,gBAAXnV,GAAuC,SAAXA,GAC7B,CAGAsf,EAAejR,EAAKkP,wBAAwB;AAC5CgC,EAAkBlR,EAAKsP;AACvB0B,EAAS,SAAUtC,GAIjB,GAAKA,EAAL,CAEA,IAAID;AACJ,IACEA,EAAYC,EAAI9B,IAClB,CAAE,MAAO5W,GAGP,MACF,CACA,MAAkB,UAAdyY,EAA8BwC,EAAavC,GACxB,aAAdD,EACAyC,EAAgBxC,QADpB,CAXW,CAalB,CACF,CACA,OAAO1W,EAAKuH,KACV3N,KACAud,EACAnP,EAAKO,KAAKvC,OAAIrF,EAAWqY,GACzBH,EACAC,EAEJ,CACF,GACAR;AAEFtN,EACE4N,EACA,uBACA,SAAU5Y,GACR,OAAO,SAAU0W,EAAK1Q,EAAI6S,EAASC,GACjC,IACE9S,EAAKA,IAAOA,EAAGwK,kBAAoBxK,EAAGwK,kBAAoBxK,EAC5D,CAAE,MAAOhI,GAET,CACA,OAAOgC,EAAKuH,KAAK3N,KAAM8c,EAAK1Q,EAAI6S,EAASC,EAC3C,CACF,GACAR,EAEJ,CACF,CAEAtN,EAAKjD,EAAS,aAAcwQ,EAAYD;AACxCtN,EAAKjD,EAAS,cAAewQ,EAAYD;AACrCvQ,EAAQoR,uBACVnO,EACEjD,EACA,yBACA,SAAU/H,GACR,OAAO,SAAUoZ,GACf,OAAOpZ,EAAKgI,EAAKO,KAAK6Q,GACxB,CACF,GACAd;AAqCJ,IA/BA,IAAIe,EAAe,CACjB,cACA,SACA,OACA,mBACA,iBACA,oBACA,kBACA,cACA,aACA,qBACA,cACA,aACA,iBACA,eACA,kBACA,cACA,cACA,eACA,qBACA,SACA,YACA,eACA,gBACA,YACA,kBACA,SACA,iBACA,4BACA,wBAEO/c,EAAI,EAAGA,EAAI+c,EAAa3e,OAAQ4B,IACvCqc,EAAgBU,EAAa/c,GAEjC,EAWAgT,uBAAwB,WACtB,IAAItH,EAAOpO,KACP2L,EAAkB3L,KAAKyS,eAAe9G,gBAEtC+S,EAAkBtQ,EAAK0F;AAE3B,SAAS4L,EAAS1e,EAAMiU,GAClBjU,KAAQiU,GAAO1E,EAAW0E,EAAIjU,KAChCoQ,EAAK6D,EAAKjU,GAAM,SAAUoF,GACxB,OAAOgI,EAAKO,KAAKvI,EACnB,GAEJ,CAEA,GAAIuF,EAAgBsJ,KAAO,mBAAoB9G,EAAS,CACtD,IAAIwR,EAAWC,eAAezS;AAC9BiE,EACEuO,EACA,QACA,SAAUE,GACR,OAAO,SAAUtL,EAAQiE,IAKrBhI,EAASgI,IACPpK,EAAKkE,aAAgD,IAAlCkG,EAAI5R,QAAQwH,EAAKkE,cAEtCtS,KAAK8f,YAAc,CACjBvL,OAAQA,EACRiE,IAAKA,EACLuH,YAAa;AAIjB,OAAOF,EAASnb,MAAM1E,KAAM4N,UAC9B,CACF,GACA8Q;AAGFtN,EACEuO,EACA,QACA,SAAUK,GACR,OAAO,SAAU/W,GAEf,IAAIgM,EAAMjV;AAEV,SAASigB,IACP,GAAIhL,EAAI6K,aAAkC,IAAnB7K,EAAIiL,WAAkB,CAC3C,IAGEjL,EAAI6K,YAAYC,YAAc9K,EAAIkL;AAClC,MAAMC,EAAgBnQ,EAAwBgF;AAE1CmL,IACFnL,EAAI6K,YAAYM,cAAgBA,EAEpC,CAAE,MAAOhc,GAET,CAEAgK,EAAKW,kBAAkB,CACrBiM,KAAM,OACNyC,SAAU,MACVxU,KAAMgM,EAAI6K,aAEd,CACF,CAGA,IADA,IAAIO,EAAQ,CAAC,SAAU,UAAW,cACzB5c,EAAI,EAAGA,EAAI4c,EAAMvf,OAAQ2C,IAChCic,EAASW,EAAM5c,GAAIwR;AAInB,uBAAwBA,GACxB1E,EAAW0E,EAAIqL,oBAEflP,EACE6D,EACA,sBACA,SAAU7O,GACR,OAAOgI,EAAKO,KAAKvI,OAAMW,EAAWkZ,EACpC,IAKFhL,EAAIqL,mBAAqBL;AAG3B,OAAOD,EAAStb,MAAM1E,KAAM4N,UAC9B,CACF,GACA8Q,EAEJ,CAEI/S,EAAgBsJ,KAAO,UAAW9G,GACpCiD,EACEjD,EACA,SACA,SAAUoS,GAGR,MAAM,kBAAEC,GAAsB,CAC5B,kBAA4B,SAAUpU,EAAIwS,GAKxC,IADA,IAAIpa,EAAO,IAAIqa,MAAMjR,UAAU9M,QACtB4B,EAAI,EAAGA,EAAI8B,EAAK1D,SAAU4B,EACjC8B,EAAK9B,GAAKkL,UAAUlL;AAGtB,IAEI8V,EAFAiI,EAAajc,EAAK,GAClB+P,EAAS;AAGb,GAA0B,iBAAfkM,EACTjI,EAAMiI;KACD,GACL,YAAatS,GACbsS,aAAsBtS,EAAQuS,QAC9B,CACAlI,EAAMiI,EAAWjI;AACbiI,EAAWlM,SACbA,EAASkM,EAAWlM,OAExB,MACEiE,EAAM,GAAKiI;AAGTjc,EAAK,IAAMA,EAAK,GAAG+P,SACrBA,EAAS/P,EAAK,GAAG+P;AAGnB,IAAIoM,EAAY,CACdpM,OAAQA,EACRiE,IAAKA,EACLuH,YAAa;AAGf3R,EAAKW,kBAAkB,CACrBiM,KAAM,OACNyC,SAAU,QACVxU,KAAM0X;AAGR,OAAOJ,EAAU7b,MAAM1E,KAAMwE,GAAMoc,MAAK,SAAUC,GAChDF,EAAUZ,YAAcc,EAASV;AAEjC,MAAMC,EAAgBpQ,EAA6B6Q;AAE/CT,IACFO,EAAUP,cAAgBA;AAG5B,OAAOS,CACT,GACF;AAEF,OAAOL,CACT,GACA9B;AAMJ,GAAI/S,EAAgBuJ,KAAOlV,KAAKgS,aAC9B,GAAIN,EAAUlK,iBAAkB,CAC9BkK,EAAUlK,iBACR,QACA4G,EAAKkP,wBAAwB,UAC7B;AAEF5L,EAAUlK,iBACR,WACA4G,EAAKsP,yBACL,EAEJ,KAAO,CAELhM,EAAUoP,YAAY,UAAW1S,EAAKkP,wBAAwB;AAC9D5L,EAAUoP,YAAY,aAAc1S,EAAKsP,wBAC3C,CAOF,IAAIqD,EAAS5S,EAAQ4S,OAEjBC,IADsBD,GAAUA,EAAOE,KAAOF,EAAOE,IAAIC,UAG3D/S,EAAQgT,SACRA,QAAQC,WACRD,QAAQE;AACV,GAAI1V,EAAgBwI,UAAY6M,EAAwB,CAEtD,IAAIM,EAAgBnT,EAAQoT;AAC5BpT,EAAQoT,WAAa,WACnB,IAAIC,EAAcpT,EAAK8F,UAAUG;AACjCjG,EAAK4P,kBAAkB5P,EAAKgG,UAAWoN;AAEvC,GAAIF,EACF,OAAOA,EAAc5c,MAAM1E,KAAM4N,UAErC;AAEA,IAAI6T,EAA6B,SAAUC,GAGzC,OAAO,WACL,IAAIlJ,EAAM5K,UAAU9M,OAAS,EAAI8M,UAAU,QAAK7G;AAG5CyR,GAEFpK,EAAK4P,kBAAkB5P,EAAKgG,UAAWoE,EAAM;AAG/C,OAAOkJ,EAAiBhd,MAAM1E,KAAM4N,UACtC,CACF;AAEAwD,EAAK+P,QAAS,YAAaM,EAA4B/C;AACvDtN,EACE+P,QACA,eACAM,EACA/C,EAEJ,CAEA,GAAI/S,EAAgB9J,SAAW,YAAasM,GAAWtM,QAAQgD,IAAK,CAElE,IAAI8c,EAAwB,SAAU9T,EAAK5E,GACzCmF,EAAKW,kBAAkB,CACrBpF,QAASkE,EACTP,MAAOrE,EAAKqE,MACZmQ,SAAU,WAEd;AAEA/M,EAAK,CAAC,QAAS,OAAQ,OAAQ,QAAS,QAAQ,SAAUpK,EAAGgH,GAC3D+D,EAAkBxP,QAASyL,EAAOqU,EACpC,GACF,CACF,EAEAzK,iBAAkB,WAGhB,IADA,IAAI0K,EACG5hB,KAAK8T,iBAAiBhT,QAAQ,CAGnC,IAAIV,GAFJwhB,EAAU5hB,KAAK8T,iBAAiBzS,SAEd,GAChBT,EAAOghB,EAAQ,GACfxb,EAAOwb,EAAQ;AAEjBxhB,EAAIQ,GAAQwF,CACd,CACF,EAEAuP,cAAe,WACb,IAAIvH,EAAOpO;AAGX0Q,EAAK1Q,KAAK4T,UAAU,SAAUtN,EAAGwS,GAC/B,IAAI+I,EAAY/I,EAAO,GACnBtU,EAAOsU,EAAO;AAClB+I,EAAUnd,MAAM0J,EAAM,CAACA,GAAM0T,OAAOtd,GACtC,GACF,EAEAqR,UAAW,SAAUkM,GACnB,IAAIC,EAAIzQ,EAAW0Q,KAAKF,GACtBnY,EAAM,CAAC,EACPlH,EAAI;AAEN,IACE,KAAOA,KAAKkH,EAAI0H,EAAQ5O,IAAMsf,EAAEtf,IAAM,EACxC,CAAE,MAAO0B,GACP,MAAM,IAAI8I,EAAiB,gBAAkB6U,EAC/C,CAEA,GAAInY,EAAIyM,OAASrW,KAAKyS,eAAeyP,eACnC,MAAM,IAAIhV,EACR;AAIJ,OAAOtD,CACT,EAEA0M,iBAAkB,SAAUV,GAE1B,IAAI2I,EAAO3I,EAAI2I,KACXvT,EAAOhL,KAAKwS,eAAexH,KAC3BO,EAAUP,GAAQA,EAAa,QAAM,MACrCT,EAAMvK,KAAKyS,eAAe1H,aAAe;AAE7C,GAAiB,2BAAb6K,EAAI2I,KAAmC,CAIzCA,EAAO,aAHuB,QAAXhT,EAAmB,GAAK,IAAIA,cACvB,SAARhB,EAAiB,GAAK,GAAGA,SAG3C,CAEA,IAAImP,EAAe,KAAO6E,GAAQ3I,EAAIuM,KAAO,IAAMvM,EAAIuM,KAAO;AAE1DvM,EAAI0I,WACN5E,EAAe9D,EAAI0I,SAAW,IAAM5E;AAEtC,OAAOA,CACT,EAEAlE,wBAAyB,WAElBxV,KAAKuT,gBACRvT,KAAKmY,iBAAiBzT,MAAM1E,KAAM4N,UAEtC,EAEAuK,iBAAkB,SAAUiK,EAAWvY,GACrC,IAAI6O,EAAS1Y,KAAK2Y,eAAeyJ,EAAWvY;AAE5C7J,KAAKqY,cAAc,SAAU,CAC3B+J,UAAWA,EACXvY,QAASA;AAGX7J,KAAKqiB,kBACHD,EAAUxhB,KACVwhB,EAAUzY,QACVyY,EAAU5J,IACV4J,EAAU3H,OACV/B,EACA7O,EAEJ,EAEA8O,eAAgB,SAAUyJ,EAAWvY,GACnC,IAAIuE,EAAOpO,KACP0Y,EAAS;AACb,GAAI0J,EAAUjc,OAASic,EAAUjc,MAAMrF,OAAQ,CAC7C4P,EAAK0R,EAAUjc,OAAO,SAAUzD,EAAGyD,GACjC,IAAImc,EAAQlU,EAAKmU,gBAAgBpc,EAAOic,EAAU5J;AAC9C8J,GACF5J,EAAOxX,KAAKohB,EAEhB;AAGA,GAAIzY,GAAWA,EAAQ8N,eACrB,IAAK,IAAIlU,EAAI,EAAGA,EAAIoG,EAAQ8N,gBAAkBlU,EAAIiV,EAAO5X,OAAQ2C,IAC/DiV,EAAOjV,GAAG+e,QAAS;AAMvB,GAAI9J,EAAO+J,MAAMH,GAAUA,EAAM9H,SAAS/P,SAAS,kBACjD,IAAK,IAAIiY,EAAIhK,EAAO5X,OAAS,EAAG4hB,GAAK,EAAGA,IAAK,CAC3C,GAAIhK,EAAOgK,GAAGlI,SAAS/P,SAAS,gBAAiB,CAC/CiO,EAAOgK,GAAGF,QAAS;AACnB,KACF,CACA9J,EAAOgK,GAAGF,QAAS,CACrB,CAGF,IAAK,IAAIG,EAAI,EAAGA,EAAIjK,EAAO5X,OAAQ6hB,IAC7BjK,EAAOiK,GAAGnI,SAAS/P,SAAS,uBAC9BiO,EAAOiK,GAAGH,QAAS,EAGzB,CAGA,OADA9J,EAASA,EAAOlS,MAAM,EAAGxG,KAAKyS,eAAeM,gBAE/C,EAEAwP,gBAAiB,SAAUD,EAAOM,GAEhC,IAAIC,EAAa,CACfvI,SAAUgI,EAAM9J,IAChBiC,OAAQ6H,EAAMQ,KACdnI,MAAO2H,EAAM5H,OACbF,SAAU8H,EAAM7L,MAAQ;AAQrB6L,EAAM9J,MACTqK,EAAWvI,SAAWsI;AAGxBC,EAAWL,SAIJxiB,KAAKyS,eAAeE,aAAa3O,OACjChE,KAAKyS,eAAeE,aAAa3O,KAAK6e,EAAWvI,WAEpD,qBAAqBtW,KAAK6e,EAAqB;AAInD,OAAOA,CACT,EAEAR,kBAAmB,SACjBrH,EACArR,EACA4O,EACAkC,EACA/B,EACA7O,GAEA,IAAIkZ,GAAmB/H,EAAOA,EAAO,KAAO,KAAOrR,GAAW;AAC9D,IAAIiO,EACD5X,KAAKkS,wBACJlS,KAAKkS,uBAAuB2F,OAC5B7X,KAAKkS,uBAAuB2F,MAAMlO,SACpC;AACF,GACI3J,KAAKyS,eAAetI,aAAanG,OAClChE,KAAKyS,eAAetI,aAAanG,KAAK2F,IACrC3J,KAAKyS,eAAetI,aAAanG,KAAK+e,IACtC/iB,KAAKyS,eAAetI,aAAanG,KAAK4T,IAExC5X,KAAKqY,cAAc,iBAAkB,CACnC/K,MAAQzD,GAAWA,EAAQyD,OAAU;IAPzC,CAYA,IAAIpD;AAEJ,GAAIwO,GAAUA,EAAO5X,OAAQ,CAC3ByX,EAAUG,EAAO,GAAG4B,UAAY/B;AAGhCG,EAAOE;AACP1O,EAAa,CAAEwO,OAAQA,EACzB,MAAWH,IACTrO,EAAa,CACXwO,OAAQ,CACN,CACE4B,SAAU/B,EACVkC,OAAQA,EACR+H,QAAQ;AAMhB,KACIxiB,KAAKyS,eAAerI,WAAWpG,OACjChE,KAAKyS,eAAerI,WAAWpG,KAAKuU,OAMlCvY,KAAKyS,eAAeC,cAAc1O,MACnChE,KAAKyS,eAAeC,cAAc1O,KAAKuU,IAF1C,CAOA,IAAItP,EAAO0H,EACT,CAEEqS,UAAW,CACTC,OAAQ,CACN,CACEjI,KAAMA,EACN/S,MAAO0B,EACPO,WAAYA,KAIlBgZ,QAAS3K,GAEX1O;AAIF7J,KAAKsX,MAAMrO,EApBX,CAlCA,CAuDF,EAEAka,YAAa,SAAUla,GAGrB,IAAI6L,EAAM9U,KAAKyS,eAAeI;AAC1B5J,EAAKU,UACPV,EAAKU,QAAUiH,EAAS3H,EAAKU,QAASmL;AAExC,GAAI7L,EAAK+Z,UAAW,CAClB,IAAIA,EAAY/Z,EAAK+Z,UAAUC,OAAO;AACtCD,EAAU/a,MAAQ2I,EAASoS,EAAU/a,MAAO6M,EAC9C,CAEA,IAAIsO,EAAUna,EAAKma;AACnB,GAAIA,EAAS,CACPA,EAAQ5K,MACV4K,EAAQ5K,KAAM,IAAAiG,0BACZ7N,EAASwS,EAAQ5K,IAAKxY,KAAKyS,eAAeK;AAG1CsQ,EAAQC,UACVD,EAAQC,SAAU,IAAA5E,0BAChB7N,EAASwS,EAAQC,QAASrjB,KAAKyS,eAAeK,eAGpD,CAEA,OAAO7J,CACT,EAEAqa,aAAc,WACZ,GAAKtjB,KAAKiS,eAAkBjS,KAAKgS,aAAjC,CACA,IAAIuR,EAAW,CAAC;AAEZvjB,KAAKiS,eAAiBN,EAAW6R,YACnCD,EAASE,QAAU,CACjB,aAAc7R,UAAU4R;AAI5B,GAAIxjB,KAAKgS,aAAc,CACjBN,EAAUyC,UAAYzC,EAAUyC,SAASE,OAC3CkP,EAAS/K,KAAM,IAAAiG,0BAAyB/M,EAAUyC,SAASE;AAE7D,GAAI3C,EAAUgS,SAAU,CACjBH,EAASE,UAASF,EAASE,QAAU,CAAC;AAC3CF,EAASE,QAAQJ,SAAU,IAAA5E,0BAAyB/M,EAAUgS,SAChE,CACF,CAEA,OAAOH,CAnB8C,CAoBvD,EAEAjP,cAAe,WACbtU,KAAK2jB,iBAAmB;AACxB3jB,KAAK4jB,cAAgB,IACvB,EAEAC,eAAgB,WACd,OACE7jB,KAAK2jB,kBACLnS,IAAQxR,KAAK4jB,cAAgB5jB,KAAK2jB,gBAEtC,EAWAG,cAAe,SAAUC,GAEvB,GAAIA,EAAQ1M,YACV,OAAO;AAGT,IAAI2M,EAAOhkB,KAAKmS;AAEhB,SACG6R,GACDD,EAAQpa,UAAYqa,EAAKra,SACzBoa,EAAQb,UAAYc,EAAKd,WAKvBa,EAAQ7Z,YAAc8Z,EAAK9Z,WACtBgH,EAAiB6S,EAAQ7Z,WAAY8Z,EAAK9Z,aACxC6Z,EAAQf,YAAagB,EAAKhB,WAE5B/R,EAAgB8S,EAAQf,UAAWgB,EAAKhB,WAInD,EAEAiB,iBAAkB,SAAUb,GAE1B,IAAIpjB,KAAK6jB,iBAAT,CAIA,IAAI1D,EAASiD,EAAQjD;AAKrB,GAAiB,MAAXA,GAA6B,MAAXA,GAA6B,MAAXA,EAA1C,CAEA,IAAI+D;AACJ,IAGEA,EAAQd,EAAQe,kBAAkB;AAClCD,EAA8B,IAAtBE,SAASF,EAAO,GAC1B,CAAE,MAAO9f,GAET,CAEApE,KAAK2jB,iBAAmBO,IAII,EAAxBlkB,KAAK2jB,kBAAwB;AAEjC3jB,KAAK4jB,cAAgBpS,GAlB4C,CAPjE,CA0BF,EAEA6S,+BAAgC,WAC9B,GAAIrkB,KAAK+T,cAAgB/T,KAAK+T,aAAajT,OAAS,EAIlD,IAFA,IAAIwjB,EAAoBtkB,KAAK+T,aAAavN,OAAO,IAExC9D,EAAI4hB,EAAkBxjB,OAAS,EAAG4B,GAAK,EAAGA,IAAK,CACtD,IAAI6hB,EAAaD,EAAkB5hB;AAGnC,GACsB,SAApB6hB,EAAWvJ,OACc,QAAxBuJ,EAAW9G,UAA8C,UAAxB8G,EAAW9G,WAC7C8G,EAAWtb,MACXsb,EAAWtb,KAAK8W,aAChBwE,EAAWtb,KAAKmX,eAGZmE,EAAWtb,KAAK8W,aAAe,IACjC,OAAOwE,EAAWtb,IAGxB,CAGF,OAAO,IACT,EAEAqO,MAAO,SAAUrO,GACf,IAAIyL,EAAgB1U,KAAKyS,eAErB+R,EAAW,CACXvZ,QAASjL,KAAKuS,eACdxE,OAAQ2G,EAAc3G,OACtB0W,SAAU,cAEZlB,EAAWvjB,KAAKsjB;AAEdC,IACFiB,EAASpB,QAAUG;AAIjBta,EAAK0O,uBAAuB1O,EAAK0O,gBAErC1O,EAAO0H,EAAY6T,EAAUvb,IAGxB+B,KAAO2F,EACVA,EAAY,CAAC,EAAG3Q,KAAKwS,eAAexH,MAAQ,CAAC,GAC7C/B,EAAK+B,MAAQ,CAAC;AAEhB/B,EAAKE,MAAQwH,EACXA,EAAY,CAAC,EAAG3Q,KAAKwS,eAAerJ,OAAS,CAAC,GAC9CF,EAAKE,OAAS,CAAC;AAIZF,EAAKE,QAAOF,EAAKE,MAAQ,CAAC;AAC/BF,EAAKE,MAAM,oBAAsBqI,IAAQxR,KAAK6T;AAC9C5K,EAAKE,MAAiB,UAAIgF,EAAQ1M,SAAW0M,EAAQ1M,QAAQijB;AAG7D,IACE,GAAIvW,EAAQlK,aAAc,CACxB,IAAI0gB,EAAWxW,EAAQlK,aAAa2gB,QAAQ;AAC5C,GAAID,EAAU,CACZ,IAAIE,EAAiBvb,KAAK2P,MAAM0L;AAC5BE,GAAkBA,EAAeC,aACnC7b,EAAKE,MAA0B,mBAAI0b,EAAeC,WAEtD,CACF,CACF,CAAE,MAAO1gB,GAAI,CAGb,IACG6E,EAAKoO,aACNrX,KAAK+T,cACL/T,KAAK+T,aAAajT,OAAS,EAC3B,CACA,IAAIikB,EAAsB/kB,KAAKqkB;AAC3BU,GAAuBA,EAAoB3E,gBAC7CnX,EAAKE,MAAMiX,cAAgB2E,EAAoB3E,cAEnD,EAGGnX,EAAKoO,aACNrX,KAAK+T,cACL/T,KAAK+T,aAAajT,OAAS,IAI3BmI,EAAK+b,YAAc,CACjB/B,OAAQ,GAAGzc,MAAMmH,KAAK3N,KAAK+T,aAAc;AAKzCtD,EAAcxH,EAAK+B,cAAc/B,EAAK+B;AAEtChL,KAAKwS,eAAe2D,OAEtBlN,EAAKkN,KAAOnW,KAAKwS,eAAe2D;AAI9BzB,EAAc3J,cAAa9B,EAAK8B,YAAc2J,EAAc3J;AAG5D2J,EAAc7J,UAAS5B,EAAK4B,QAAU6J,EAAc7J;AAGpD6J,EAAcuQ,aAAYhc,EAAKic,YAAcxQ,EAAcuQ;AAE3D1U,EAAWmE,EAAc9I,gBAC3B3C,EAAOyL,EAAc9I,aAAa3C,IAASA;AAIxCA,IAAQwH,EAAcxH,KAMzBsH,EAAWmE,EAAc7I,sBACxB6I,EAAc7I,mBAAmB5C,KAOhCjJ,KAAK6jB,iBACP7jB,KAAKyU,UAAU,OAAQ,uCAAwCxL,GAIzB,iBAA7ByL,EAAczK,WACnB4K,KAAKsQ,SAAWzQ,EAAczK,YAChCjK,KAAKolB,sBAAsBnc,GAG7BjJ,KAAKolB,sBAAsBnc,IAE/B,EAEAoc,SAAU,WACR,OAAOrU,GACT,EAEAoU,sBAAuB,SAAUnc,EAAMsE,GACrC,IAAIa,EAAOpO,KACP0U,EAAgB1U,KAAKyS;AAEzB,GAAKzS,KAAK6P,UAAV,CAGA5G,EAAOjJ,KAAKmjB,YAAYla;AAKxB,GAAKjJ,KAAKyS,eAAe6S,kBAAmBtlB,KAAK8jB,cAAc7a,GAA/D,CAQAjJ,KAAKoS,aAAenJ,EAAKsc,WAAatc,EAAKsc,SAAWvlB,KAAKqlB;AAG3DrlB,KAAKmS,UAAYlJ;AAEjBjJ,KAAKyU,UAAU,QAAS,uBAAwBxL;AAEhD,IAAIuc,EAAO,CACTC,eAAgB,IAChBC,cAAe,YAAc1lB,KAAKwU;AAGhCxU,KAAKsS,aACPkT,EAAKG,WAAa3lB,KAAKsS;AAGrBtS,KAAKoW,gBACPoP,EAAKI,cAAgB5lB,KAAKoW;AAG5B,IAAIyP,EAAS,CAAC,EACVC,EAAgB7c,EAAK+B,MAAQ/B,EAAK+B,KAAKC,QACvC8a,EAAYD;AAEZA,IACFD,EAAO3a,WAAajC,EAAK+B,KAAKC;AAGhC,IAAI+X,EAAY/Z,EAAK+Z,WAAa/Z,EAAK+Z,UAAUC,OAAO;AACxDjjB,KAAK+O,kBAAkB,CACrB0O,SAAUxU,EAAKoO,YAAc,YAAc,SAC3C1N,QAASqZ,GACJA,EAAUhI,KAAOgI,EAAUhI,KAAO,KAAO,IAAMgI,EAAU/a,MAC1DgB,EAAKU,QACTV,KAAMA,EAAKoO,YAAcpO,EAAKE,WAAQpC,EACtCwe,SAAUtc,EAAKsc,SACfjY,MAAOrE,EAAKqE,OAAS;AAGvB,IAAIkL,EAAMvP,EAAKoO,YACXrX,KAAKwW,yBACLxW,KAAKuW,iBAER7B,EAAcwE,WAAalZ,KAAKgmB,cAAcrY,KAAK3N,KAAM,CACxDwY,IAAKA,EACLgN,KAAMA,EACNS,MAAOF,EAAYF,OAAS9e,EAC5BkC,KAAMA,EACNY,QAAS6K,EACTzI,UAAW,WACTmC,EAAKkG;AAELlG,EAAKiK,cAAc,UAAW,CAC5BpP,KAAMA,EACN6Q,IAAKtB;AAEPjL,GAAYA,GACd,EACA2Y,QAAS,SAAiBxc,GACxB0E,EAAKqG,UAAU,QAAS,mCAAoC/K;AAExDA,EAAM0Z,SACRhV,EAAK6V,iBAAiBva,EAAM0Z;AAG9BhV,EAAKiK,cAAc,UAAW,CAC5BpP,KAAMA,EACN6Q,IAAKtB,EACL9O;AAEFA,EACEA,GACA,IAAIzD,MAAM;AACZsH,GAAYA,EAAS7D,EACvB,GA/EF,MAFE1J,KAAKyU,UAAU,OAAQ,+BAAgCxL,EAT9B,CA4F7B,EAEA+c,aAAc,SAAUG,GACtB,IAAI/C,EAAUjV,EAAQyR,gBAAkB,IAAIzR,EAAQyR;AACpD,GAAKwD,EAAL,CAMA,GAFE,oBAAqBA,GAAqC,oBAAnBgD,eAEzC,CAEA,IAAI5N,EAAM2N,EAAK3N;AAEf,GAAI,oBAAqB4K,EACvBA,EAAQ9C,mBAAqB,WAC3B,GAA2B,IAAvB8C,EAAQlD,WAEL,GAAuB,MAAnBkD,EAAQjD,OACjBgG,EAAKla,WAAaka,EAAKla;KAClB,GAAIka,EAAKD,QAAS,CACvB,IAAI3f,EAAM,IAAIN,MAAM,sBAAwBmd,EAAQjD;AACpD5Z,EAAI6c,QAAUA;AACd+C,EAAKD,QAAQ3f,EACf,CACF;IACK,CACL6c,EAAU,IAAIgD;AAGd5N,EAAMA,EAAIrV,QAAQ,WAAY;AAG1BgjB,EAAKla,YACPmX,EAAQiD,OAASF,EAAKla;AAEpBka,EAAKD,UACP9C,EAAQkD,QAAU,WAChB,IAAI/f,EAAM,IAAIN,MAAM;AACpBM,EAAI6c,QAAUA;AACd+C,EAAKD,QAAQ3f,EACf,EAEJ,CAIA,IACE6c,EAAQmD,KACN,OACA,GAAG/N,KAAOzH,EAAUoV,EAAKX,QACvBW,EAAKF,MAAQ,IAAIlV,EAAUoV,EAAKF,SAAW;AAG/C7C,EAAQoD,KAAKjd,EAAU4c,EAAKld,MAC9B,CAAE,MAAO7E,GAGP,GAAI+hB,EAAKD,QAAS,CAChB,IAAI3f,EAAM,IAAIN,MAAM,0BAA4B7B,EAAEuF;AAClDpD,EAAI6c,QAAUA;AACd7c,EAAIkgB,cAAgBriB;AACpB+hB,EAAKD,QAAQ3f,EACf,CACF,CAtDoB,CANA,CA6DtB,EAEAkO,UAAW,SAAUnH,GACftN,KAAK2T,wBAAwBrG,IAAUtN,KAAKyJ,OAE9CuE,SAASb,UAAUzI,MAAMiJ,KACvB3N,KAAK2T,wBAAwBrG,GAC7BtN,KAAK0T,iBACL,GAAGlN,MAAMmH,KAAKC,UAAW,GAG/B,EAEAoL,cAAe,SAAUrE,EAAKjG,GACxB4B,EAAY5B,UACP1O,KAAKwS,eAAemC,GAE3B3U,KAAKwS,eAAemC,GAAOhE,EACzB3Q,KAAKwS,eAAemC,IAAQ,CAAC,EAC7BjG,EAGN;AAIFT,EAAMd,UAAUuZ,QAAUzY,EAAMd,UAAU8B;AAC1ChB,EAAMd,UAAUwZ,kBAAoB1Y,EAAMd,UAAUoC,U,mBCt4EpD,IAAIpB,EACgB,oBAAXrO,OACHA,OACkB,oBAAXC,OACPA,OACgB,oBAATqO,KACPA,KACA,CAAC;AAEP,SAASgC,EAASwW,GAChB,MAAuB,iBAATA,GAA8B,OAATA,CACrC,CAIA,SAASzW,EAAQlI,GACf,OAAQ,CAAC,EAAEkN,SAASxH,KAAK1F,IACvB,IAAK,iBAEL,IAAK,qBAEL,IAAK,wBACH,OAAO;AACT,QACE,OAAOA,aAAiBhC,MAE9B,CAEA,SAASoK,EAAapI,GACpB,OACE4e,KAAoD,wBAA5B,CAAC,EAAE1R,SAASxH,KAAK1F,EAE7C,CAEA,SAASqI,EAAYsW,GACnB,YAAgB,IAATA,CACT,CAEA,SAASrW,EAAWqW,GAClB,MAAuB,mBAATA,CAChB,CAEA,SAASpW,EAASoW,GAChB,MAAgD,oBAAzC9e,OAAOqF,UAAUgI,SAASxH,KAAKiZ,EACxC,CAEA,SAASnW,EAAcmW,GACrB,IAAK,IAAItgB,KAAKsgB,EAAM,OAAO;AAC3B,OAAO,CACT,CAEA,SAASC,IACP,IACE,IAAIC,WAAW;AACf,OAAO,CACT,CAAE,MAAO1iB,GACP,OAAO,CACT,CACF,CAEA,SAAS2iB,EAAgBxZ,GACvB,SAAS3B,EAAa3C,EAAM6I,GAC1B,IAAIkV,EAAiBzZ,EAAStE,IAASA;AACvC,OAAI6I,GACKA,EAASkV,IAEXA,CACT,CAEA,OAAOpb,CACT,CAEA,SAAS8E,EAAKtQ,EAAKmN,GACjB,IAAI7K,EAAGe;AAEP,GAAI6M,EAAYlQ,EAAIU,QAClB,IAAK4B,KAAKtC,EACJyQ,EAAOzQ,EAAKsC,IACd6K,EAASI,KAAK,KAAMjL,EAAGtC,EAAIsC;KAK/B,GADAe,EAAIrD,EAAIU,OAEN,IAAK4B,EAAI,EAAGA,EAAIe,EAAGf,IACjB6K,EAASI,KAAK,KAAMjL,EAAGtC,EAAIsC,GAInC,CAEA,SAASiO,EAAYsW,EAAMC,GACzB,IAAKA,EACH,OAAOD;AAETvW,EAAKwW,GAAM,SAAUvS,EAAK1M,GACxBgf,EAAKtS,GAAO1M,CACd;AACA,OAAOgf,CACT,CAUA,SAASE,EAAa/mB,GACpB,QAAK0H,OAAOsf,UAGLtf,OAAOsf,SAAShnB,EACzB,CAEA,SAASwQ,EAASmR,EAAKjN,GACrB,OAAQA,GAAOiN,EAAIjhB,QAAUgU,EAAMiN,EAAMA,EAAI9L,OAAO,EAAGnB,GAAO,GAChE,CASA,SAASjE,EAAOwW,EAAQ1S,GACtB,OAAO7M,OAAOqF,UAAUlM,eAAe0M,KAAK0Z,EAAQ1S,EACtD,CAEA,SAAS7D,EAAWwW,GAQlB,IALA,IAGEC,EAHEC,EAAU,GACZ9kB,EAAI,EACJE,EAAM0kB,EAASxmB,OAGV4B,EAAIE,EAAKF,IAEV8N,EADJ+W,EAAUD,EAAS5kB,IAIjB8kB,EAAQtmB,KAAKqmB,EAAQpkB,QAAQ,8BAA+B,SACnDokB,GAAWA,EAAQE,QAE5BD,EAAQtmB,KAAKqmB,EAAQE;AAIzB,OAAO,IAAIC,OAAOF,EAAQ1Z,KAAK,KAAM,IACvC,CAEA,SAASiD,EAAU4W,GACjB,IAAIC,EAAQ;AACZlX,EAAKiX,GAAG,SAAUhT,EAAK1M,GACrB2f,EAAM1mB,KAAKqY,mBAAmB5E,GAAO,IAAM4E,mBAAmBtR,GAChE;AACA,OAAO2f,EAAM9Z,KAAK,IACpB,CAKA,SAASqD,EAASqH,GAChB,IAAI5P,EAAQ4P,EAAI5P,MACd;AAEF,IAAKA,EAAO,MAAO,CAAC;AAGpB,IAAIqd,EAAQrd,EAAM,IAAM,GACpBif,EAAWjf,EAAM,IAAM;AAC3B,MAAO,CACL0V,SAAU1V,EAAM,GAChB2V,KAAM3V,EAAM,GACZmN,KAAMnN,EAAM,GACZ4V,SAAU5V,EAAM,GAAKqd,EAAQ4B,EAEjC,CACA,SAAS7W,IACP,IAAI8W,EAAS3Z,EAAQ2Z,QAAU3Z,EAAQ4Z;AAEvC,IAAKzX,EAAYwX,IAAWA,EAAOE,gBAAiB,CAGlD,IAAIC,EAAM,IAAIC,YAAY;AAC1BJ,EAAOE,gBAAgBC;AAGvBA,EAAI,GAAe,KAATA,EAAI,GAAc;AAE5BA,EAAI,GAAe,MAATA,EAAI,GAAe;AAE7B,IAAIE,EAAM,SAAUC,GAElB,IADA,IAAIC,EAAID,EAAIjT,SAAS,IACdkT,EAAEvnB,OAAS,GAChBunB,EAAI,IAAMA;AAEZ,OAAOA,CACT;AAEA,OACEF,EAAIF,EAAI,IACRE,EAAIF,EAAI,IACRE,EAAIF,EAAI,IACRE,EAAIF,EAAI,IACRE,EAAIF,EAAI,IACRE,EAAIF,EAAI,IACRE,EAAIF,EAAI,IACRE,EAAIF,EAAI,GAEZ,CAEE,MAAO,mCAAmC9kB,QAAQ,SAAS,SAAUwD,GACnE,IAAI2hB,EAAqB,GAAhBzT,KAAKsQ,SAAiB;AAE/B,OADY,MAANxe,EAAY2hB,EAAS,EAAJA,EAAW,GACzBnT,SAAS,GACpB,GAEJ,CAKA,SAASoT,EAAgBC,EAAGC,GAC1B,WAAYD,IAAMC,EACpB,CAKA,SAASxX,EAAgBmH,EAAKsQ,GAC5B,GAAIH,EAAgBnQ,EAAKsQ,GAAM,OAAO;AAEtCtQ,EAAMA,EAAI6K,OAAO;AACjByF,EAAMA,EAAIzF,OAAO;AAEjB,OAAI7K,EAAI4C,OAAS0N,EAAI1N,MAAQ5C,EAAInQ,QAAUygB,EAAIzgB,OAExCiJ,EAAiBkH,EAAIlO,WAAYwe,EAAIxe,WAC9C,CAKA,SAASye,EAAa1B,EAAMC,GAC1B,GAAID,IAASC,EAAM,OAAO;AAC1B,GAAY,MAARD,GAAwB,MAARC,EAAc,OAAO;AACzC,GAAIqB,EAAgBtB,EAAMC,GAAO,OAAO;AAExC,IAAI0B,EAAQ9gB,OAAO+gB,KAAK5B,GACpB6B,EAAQhhB,OAAO+gB,KAAK3B;AAExB,GAAI0B,EAAM9nB,SAAWgoB,EAAMhoB,OAAQ,OAAO;AAE1C,IAAK,IAAI4B,EAAI,EAAGA,EAAIkmB,EAAM9nB,OAAQ4B,IAAK,CACrC,IAAIiS,EAAMiU,EAAMlmB;AAChB,IAAKmO,EAAOqW,EAAMvS,GAAM,OAAO;AAC/B,GAAIsS,EAAKtS,KAASuS,EAAKvS,GAAM,OAAO,CACtC,CAEA,OAAO,CACT,CAKA,SAASzD,EAAiB6X,EAAQC,GAChC,GAAc,MAAVD,GAA4B,MAAVC,EAAgB,OAAO;AAC7C,GAAIT,EAAgBQ,EAAQC,GAAS,OAAO;AAE5C,IAWIR,EAAGC,EAXHQ,EAAUF,EAAOrQ,OACjBwQ,EAAUF,EAAOtQ;AAGrB,GAAe,MAAXuQ,GAA8B,MAAXC,EAAiB,OAAOP,EAAaI,EAAQC;AACpE,GAAIT,EAAgBU,EAASC,GAAU,OAAO;AAC9C,GAAsB,MAAlBD,EAAQnoB,QAAoC,MAAlBooB,EAAQpoB,OACpC,OAAO6nB,EAAaI,EAAQC;AAC9B,GAAIC,EAAQnoB,SAAWooB,EAAQpoB,OAAQ,OAAO;AAI9C,IAAK,IAAI4B,EAAI,EAAGA,EAAIumB,EAAQnoB,OAAQ4B,IAAK,CACvC8lB,EAAIS,EAAQvmB;AACZ+lB,EAAIS,EAAQxmB;AACZ,GACE8lB,EAAElO,WAAamO,EAAEnO,UACjBkO,EAAE/N,SAAWgO,EAAEhO,QACf+N,EAAE7N,QAAU8N,EAAE9N,OACd6N,EAAY,WAAMC,EAAY,SAE9B,OAAO,CACX,CACA,OAAO,CACT,CASA,SAASrX,EAAKhR,EAAKQ,EAAMuoB,EAAaC,GACpC,IAAIhjB,EAAOhG,EAAIQ;AACfR,EAAIQ,GAAQuoB,EAAY/iB;AACpBgjB,GACFA,EAAMloB,KAAK,CAACd,EAAKQ,EAAMwF,GAE3B,CAOA,SAASqY,EAAyBjG,GAChC,IAAKA,GAAsB,iBAARA,EACjB,OAAOA;AAGT,IAEE,MAAM6Q,EAAY,IAAIC,IAAI9Q,GAGpB+Q,EAAeF,EAAUE;AAC3BA,EAAaC,IAAI,QACnBD,EAAaE,IAAI,MAAO;AAEtBF,EAAaC,IAAI,UACnBD,EAAaE,IAAI,QAAS;AAI5B,GAAIJ,EAAUK,KAAM,CAEaL,EAAUK,KAAKC,UAAU,GAG7Blf,SAAS,OAElC4e,EAAUK,KAAO,eAErB,CAEA,OAAOL,EAAUlU,UACnB,CAAE,MAAO/Q,GAEP,OAAOoU,CACT,CACF,CAEA9U,EAAOsE,QAAU,CACfoI,SAAUA,EACVD,QAASA,EACTE,aAAcA,EACdC,YAAaA,EACbC,WAAYA,EACZC,SAAUA,EACVC,cAAeA,EACfoW,mBAAoBA,EACpBE,gBAAiBA,EACjBrW,KAAMA,EACNC,YAAaA,EACbC,SAAUA,EACVuW,aAAcA,EACdtW,OAAQA,EACRC,WAAYA,EACZC,UAAWA,EACXC,MAAOA,EACP2X,aAAcA,EACd1X,gBAAiBA,EACjBC,iBAAkBA,EAClBC,SAAUA,EACVC,KAAMA,EACNqN,yBAA0BA,E,uBC3X5B,IAAIvO,EAAQ,EAAQ,QAYhBH,EAAW,CACb6C,qBAAqB,EACrBnJ,OAAO,GAIL0E,EACgB,oBAAXrO,OACHA,OACkB,oBAAXC,OACPA,OACgB,oBAATqO,KACPA,KACA,CAAC,EAGHwb,EAAS,GAAGpjB,MACZqjB,EAAmB,IAGnBC,EACF;AAEF,SAASC,IACP,MAAwB,oBAAbrhB,UAAiD,MAArBA,SAASyL,SAAyB,GAElEzL,SAASyL,SAASE,IAC3B,CAyCAtE,EAASuF,OAAS,WAChB,IA0DI0U,EAAoBC,EA1DpBC,EAAW,GACbC,EAAW,KACXxa,EAAgB,KAChBya,EAAqB;AAMvB,SAAS7U,EAAU8U,GACjBC;AACAJ,EAAShpB,KAAKmpB,EAChB,CAMA,SAASE,EAAYF,GACnB,IAAK,IAAI3nB,EAAIwnB,EAASppB,OAAS,EAAG4B,GAAK,IAAKA,EACtCwnB,EAASxnB,KAAO2nB,GAClBH,EAASjlB,OAAOvC,EAAG,EAGzB,CAKA,SAAS8nB,IACPC;AACAP,EAAW,EACb,CAMA,SAASQ,EAAevkB,EAAOwkB,GAC7B,IAAI3H,EAAY;AAChB,IAAI2H,GAAkB5a,EAAS6C,oBAA/B,CAGA,IAAK,IAAIlQ,KAAKwnB,EACZ,GAAIA,EAASjpB,eAAeyB,GAC1B,IACEwnB,EAASxnB,GAAGgC,MAAM,KAAM,CAACyB,GAAO2b,OAAO8H,EAAOjc,KAAKC,UAAW,IAChE,CAAE,MAAOgd,GACP5H,EAAY4H,CACd,CAIJ,GAAI5H,EACF,MAAMA,CAZR,CAcF,CAeA,SAAS6H,EAAsBlhB,EAAS6O,EAAKsS,EAAQC,EAAOxT,GAG1D,GAAI6S,EAAoB,CACtBra,EAASmI,kBAAkB8S,oCACzBZ,EACA5R,EACAsS,EACAnhB;AAEFshB,GACF,MAAO,GAAI1T,GAAMrH,EAAMC,QAAQoH,GAO7BmT,EADQ3a,EAASmI,kBAAkBX,IACb;IACjB,CACL,IAAIpD,EAAW,CACbqE,IAAKA,EACLsK,KAAMgI,EACNpQ,OAAQqQ,GAGNnqB,OAAOmG,EACP8G,EAAMlE;AAEV,GAAkC,oBAA9B,CAAC,EAAEwL,SAASxH,KAAKhE,GAAgC,CACnD,IAAIuhB;AACJ,GADIA,EAASvhB,EAAQf,MAAMkhB,GACf,CACVlpB,EAAOsqB,EAAO;AACdrd,EAAMqd,EAAO,EACf,CACF,CAEA/W,EAASsC,KAAOoT;AAQhBa,EANQ,CACN9pB,KAAMA,EACN+I,QAASkE,EACT2K,IAAKuR,IACL5jB,MAAO,CAACgO,KAEY,EACxB,CAEA,IACE,GAAI6V,EACF,OAAOA,EAAmBtlB,MAAM1E,KAAM4N,UAE1C,CAAE,MAAOxJ,GACP,IAAIA,EAAEuF,UAAuD,IAA5CvF,EAAEuF,QAAQ/C,QAAQ,qBAKjC,MAAMxC,CAEV,CAEA,OAAO,CACT,CAEA,SAASkmB,IACP,IAAIL,EAAJ,CAGAD,EAAqB7b,EAAQmY;AAC7BnY,EAAQmY,QAAUuE;AAClBZ,GAA2B,CAH3B,CAIF,CAEA,SAASQ,IACP,GAAKR,EAAL,CAGA9b,EAAQmY,QAAU0D;AAClBC,GAA2B;AAC3BD,OAAqBjjB,CAHrB,CAIF,CAEA,SAASkkB,IACP,IAAIE,EAAsBf,EACxBgB,EAAYjB;AACdA,EAAW;AACXC,EAAqB;AACrBza,EAAgB;AAChB+a,EAAehmB,MAAM,KAAM,CAACymB,GAAqB,GAAOrJ,OAAOsJ,GACjE,CASA,SAAS9V,EAAOiC,EAAI8T,GAClB,IAAI7mB,EAAOolB,EAAOjc,KAAKC,UAAW;AAClC,GAAIwc,EAAoB,CACtB,GAAIza,IAAkB4H,EACpB;AAEA0T,GAEJ,CAEA,IAAI9kB,EAAQ4J,EAASmI,kBAAkBX;AACvC6S,EAAqBjkB;AACrBwJ,EAAgB4H;AAChB4S,EAAW3lB;AAMXI,YACE,WACM+K,IAAkB4H,GACpB0T,GAEJ,GACA9kB,EAAMmlB,WAAa,IAAO;AAG5B,IAAgB,IAAZD,EACF,MAAM9T,CAEV,CAEAjC,EAAOC,UAAYA;AACnBD,EAAOiV,YAAcA;AACrBjV,EAAO1G,UAAY4b;AACnB,OAAOlV,CACR,CAhNiB;AAqQlBvF,EAASmI,kBAAoB,WA4C3B,SAASqT,EAA+BhU,GACtC,QAAwB,IAAbA,EAAGpR,OAA0BoR,EAAGpR,MAA3C,CAkBA,IAhBA,IAWEqlB,EACA/qB,EACAgrB,EAbE1K,EACA,yIACF2K,EACE,sIACFC,EACE,oHAEFC,EAAY,gDACZC,EAAa,gCACbC,EAAQvU,EAAGpR,MAAMzF,MAAM,MACvByF,EAAQ,GAMDzD,GAFK,sBAAsBuf,KAAK1K,EAAG5N,SAE/B,GAAGlG,EAAIqoB,EAAMhrB,OAAQ4B,EAAIe,IAAKf,EAAG,CAC5C,GAAKjC,EAAQsgB,EAAOkB,KAAK6J,EAAMppB,IAAM,CACnC,IAAIqpB,EAAWtrB,EAAM,IAAqC,IAA/BA,EAAM,GAAGmG,QAAQ;AAE5C,GADanG,EAAM,IAAmC,IAA7BA,EAAM,GAAGmG,QAAQ,UAC3B4kB,EAAWK,EAAW5J,KAAKxhB,EAAM,KAAM,CAEpDA,EAAM,GAAK+qB,EAAS;AACpB/qB,EAAM,GAAK+qB,EAAS;AACpB/qB,EAAM,GAAK+qB,EAAS,EACtB,CACAC,EAAU,CACRjT,IAAMuT,EAAsB,KAAXtrB,EAAM,GACvBgW,KAAMhW,EAAM,IAAMopB,EAClBrlB,KAAMunB,EAAW,CAACtrB,EAAM,IAAM,GAC9BqiB,KAAMriB,EAAM,IAAMA,EAAM,GAAK,KAC7Bia,OAAQja,EAAM,IAAMA,EAAM,GAAK,KAEnC,MAAO,GAAKA,EAAQkrB,EAAM1J,KAAK6J,EAAMppB,IACnC+oB,EAAU,CACRjT,IAAK/X,EAAM,GACXgW,KAAMhW,EAAM,IAAMopB,EAClBrlB,KAAM,GACNse,MAAOriB,EAAM,GACbia,OAAQja,EAAM,IAAMA,EAAM,GAAK;IAE5B,MAAKA,EAAQirB,EAAMzJ,KAAK6J,EAAMppB,KA0BnC;AAxBA,GADajC,EAAM,IAAMA,EAAM,GAAGmG,QAAQ,YAAc,IACzC4kB,EAAWI,EAAU3J,KAAKxhB,EAAM,KAAM,CAEnDA,EAAM,GAAK+qB,EAAS;AACpB/qB,EAAM,GAAK+qB,EAAS;AACpB/qB,EAAM,GAAK,IACb,MACQ,IAANiC,GACCjC,EAAM,SACoB,IAApB8W,EAAG3R,eAMVO,EAAM,GAAGuU,OAASnD,EAAG3R,aAAe;AAEtC6lB,EAAU,CACRjT,IAAK/X,EAAM,GACXgW,KAAMhW,EAAM,IAAMopB,EAClBrlB,KAAM/D,EAAM,GAAKA,EAAM,GAAGC,MAAM,KAAO,GACvCoiB,KAAMriB,EAAM,IAAMA,EAAM,GAAK,KAC7Bia,OAAQja,EAAM,IAAMA,EAAM,GAAK,KAInC,EAEKgrB,EAAQhV,MAAQgV,EAAQ3I,OAC3B2I,EAAQhV,KAAOoT;AAGjB1jB,EAAMjF,KAAKuqB,EACb,CAEA,OAAKtlB,EAAMrF,OAIJ,CACLF,KAAM2W,EAAG3W,KACT+I,QAAS4N,EAAG5N,QACZ6O,IAAKuR,IACL5jB,MAAOA,GAPA,IAhF+C,CAyF1D,CAeA,SAAS6kB,EACP5I,EACA5J,EACAsS,EACAnhB,GAEA,IAAIqiB,EAAU,CACZxT,IAAKA,EACLsK,KAAMgI;AAGR,GAAIkB,EAAQxT,KAAOwT,EAAQlJ,KAAM,CAC/BV,EAAUkJ,YAAa;AAElBU,EAAQvV,OACXuV,EAAQvV,KAAOoT;AAGjB,GAAIzH,EAAUjc,MAAMrF,OAAS,GACvBshB,EAAUjc,MAAM,GAAGqS,MAAQwT,EAAQxT,IAAK,CAC1C,GAAI4J,EAAUjc,MAAM,GAAG2c,OAASkJ,EAAQlJ,KACtC,OAAO;AACF,IACJV,EAAUjc,MAAM,GAAG2c,MACpBV,EAAUjc,MAAM,GAAGsQ,OAASuV,EAAQvV,KACpC,CACA2L,EAAUjc,MAAM,GAAG2c,KAAOkJ,EAAQlJ;AAClC,OAAO,CACT,CACF,CAGFV,EAAUjc,MAAM8lB,QAAQD;AACxB5J,EAAU8J,SAAU;AACpB,OAAO,CACT,CACE9J,EAAUkJ,YAAa;AAGzB,OAAO,CACT,CAWA,SAASa,EAAsC5U,EAAI8E,GAUjD,IATA,IAKE5b,EACA2rB,EANEtmB,EACA,qEACFK,EAAQ,GACRkmB,EAAQ,CAAC,EACTC,GAAY,EAMRC,EAAOJ,EAAsCK,OACjDD,IAASD,EACTC,EAAOA,EAAKC,OAEZ,GAAID,IAASrU,GAAqBqU,IAASxc,EAASuF,OAApD,CAKA8W,EAAO,CACL5T,IAAK,KACL/B,KAAMoT,EACN/G,KAAM,KACNpI,OAAQ;AAGN6R,EAAK3rB,KACPwrB,EAAK3V,KAAO8V,EAAK3rB,MACPH,EAAQqF,EAAamc,KAAKsK,EAAKpX,eACzCiX,EAAK3V,KAAOhW,EAAM;AAGpB,QAAyB,IAAd2rB,EAAK3V,KACd,IACE2V,EAAK3V,KAAOhW,EAAMgsB,MAAM9C,UAAU,EAAGlpB,EAAMgsB,MAAM7lB,QAAQ,KAC3D,CAAE,MAAOxC,GAAI,CAGXioB,EAAM,GAAKE,GACbD,GAAY,EAEZD,EAAM,GAAKE,IAAQ;AAGrBpmB,EAAMjF,KAAKkrB,EA3BX,CA8BE/P,GAGFlW,EAAMlB,OAAO,EAAGoX;AAGlB,IAAI9X,EAAS,CACX3D,KAAM2W,EAAG3W,KACT+I,QAAS4N,EAAG5N,QACZ6O,IAAKuR,IACL5jB,MAAOA;AAET6kB,EACEzmB,EACAgT,EAAGmV,WAAanV,EAAG/R,SACnB+R,EAAGuL,MAAQvL,EAAG7R,WACd6R,EAAG5N,SAAW4N,EAAG1K;AAEnB,OAAOtI,CACT,CAOA,SAAS2T,EAAkBX,EAAI8E,GAC7B,IAAIlW,EAAQ;AACZkW,EAAiB,MAATA,EAAgB,GAAKA;AAE7B,IAEE,GADAlW,EAAQolB,EAA+BhU,GAErC,OAAOpR,CAEX,CAAE,MAAO/B,GACP,GAAI2L,EAAStG,MACX,MAAMrF,CAEV,CAEA,IAEE,GADA+B,EAAQgmB,EAAsC5U,EAAI8E,EAAQ,GAExD,OAAOlW,CAEX,CAAE,MAAO/B,GACP,GAAI2L,EAAStG,MACX,MAAMrF,CAEV,CACA,MAAO,CACLxD,KAAM2W,EAAG3W,KACT+I,QAAS4N,EAAG5N,QACZ6O,IAAKuR,IAET,CAEA7R,EAAkB8S,oCAChBA;AACF9S,EAAkBqT,+BAChBA;AAEF,OAAOrT,CACR,CAxT4B;AA0T7BxU,EAAOsE,QAAU+H,C,sBCpoBPrM,EAAOsE,QAAUuB,GACnBojB,aAAeC;AAEvB,SAAShmB,EAAQimB,EAAUC,GACzB,IAAK,IAAIpqB,EAAI,EAAGA,EAAImqB,EAAS/rB,SAAU4B,EACrC,GAAImqB,EAASnqB,KAAOoqB,EAAQ,OAAOpqB;AAErC,OAAQ,CACV,CAEA,SAAS6G,EAAUnJ,EAAK2sB,EAAUC,EAAQC,GACxC,OAAO3jB,KAAKC,UAAUnJ,EAAKwsB,EAAWG,EAAUE,GAAgBD,EAClE,CAGA,SAASE,EAAejlB,GACtB,IAAI1B,EAAM,CAERJ,MAAO8B,EAAM9B,MACbwD,QAAS1B,EAAM0B,QACf/I,KAAMqH,EAAMrH;AAGd,IAAK,IAAI8B,KAAKuF,EACRH,OAAOqF,UAAUlM,eAAe0M,KAAK1F,EAAOvF,KAC9C6D,EAAI7D,GAAKuF,EAAMvF;AAInB,OAAO6D,CACT,CAEA,SAASqmB,EAAWG,EAAUE,GAC5B,IAAI9mB,EAAQ,GACR0iB,EAAO;AAEU,MAAjBoE,IACFA,EAAgB,SAAUtY,EAAK1M,GAC7B,OAAI9B,EAAM,KAAO8B,EACR,eAGP,eAAiB4gB,EAAKriB,MAAM,EAAGI,EAAQT,EAAO8B,IAAQ6F,KAAK,KAAO,GAEtE;AAGF,OAAO,SAAU6G,EAAK1M,GACpB,GAAI9B,EAAMrF,OAAS,EAAG,CACpB,IAAIqsB,EAAUvmB,EAAQT,EAAOnG;CAC5BmtB,EAAUhnB,EAAMlB,OAAOkoB,EAAU,GAAKhnB,EAAMjF,KAAKlB;CACjDmtB,EAAUtE,EAAK5jB,OAAOkoB,EAASC,IAAUzY,GAAOkU,EAAK3nB,KAAKyT;CAEtD/N,EAAQT,EAAO8B,KAClBA,EAAQglB,EAActf,KAAK3N,KAAM2U,EAAK1M,GAE1C,MACE9B,EAAMjF,KAAK+G;AAGb,OAAmB,MAAZ8kB,EACH9kB,aAAiBhC,MACfinB,EAAejlB,GACfA,EACF8kB,EAASpf,KAAK3N,KAAM2U,EAAK1M,EAC/B,CACF,C;AClEAH,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO;AAETD,EAAA,QAAkBqlB;AAClB,SAASA,IACPvtB,OAAO0H,iBAAiB,YAAY8lB,IAC9BA,EAAMC,WACRztB,OAAOqU,SAASqZ,QAClB,GAEJ,CACA9pB,EAAOsE,QAAUA,EAAQwB,O;ACpBzB1B,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO;AAETD,EAAA,aAAkB;AACHA,EAAA,QAAkB,CAC/BylB,GAAI,KACJC,UAAW,uCACXC,gBAAiB,0BACjB,mBAAAC,CAAoBC,GAClB,GAAInlB,SAAU,CACC,MAATmlB,IACFA,EAAQ7tB,KAAK0tB;AAEf,OAAO1tB,KAAK8tB,wBAAwBplB,SAASyL,SAAS4Z,SAAUF,EAClE,CACF,EACA,yBAAAG,GACE,GAAItlB,SACF,OAAO1I,KAAK8tB,wBAAwBplB,SAASyL,SAAS8Z,OAAQjuB,KAAK2tB,gBAEvE,EACA,uBAAAG,CAAwBI,EAAQL,GAC9B,MAAMM,EAAON,EAAM5L,KAAKiM,GAClB9iB,EAAmB,MAAR+iB,EAAeA,EAAK,QAAKpnB;AAC1C,OAAOqE,GAAYA,OAAWrE,CAChC,EACA,GAAAsE,CAAIxB,GACa,MAAXA,IACFA,EAAU,CAAC;AAEb,GAAI7J,KAAKytB,KAAO5jB,EAAQukB,QACtB,OAAOpuB,KAAKytB;AAEd,MAAMA,EAAKztB,KAAK4tB,oBAAoB/jB,EAAQgkB,QAAU7tB,KAAKguB;AAC3D,IAAKnkB,EAAQyB,iBAAkB,CACP,MAAlBxL,OAAO2B,UACT3B,OAAO2B,QAAU,CAAC;AAES,MAAzB3B,OAAO2B,QAAQ4sB,SACjBvuB,OAAO2B,QAAQ4sB,OAAS,CAAC;AAEK,MAA5BvuB,OAAO2B,QAAQ4sB,OAAOZ,KACxB3tB,OAAO2B,QAAQ4sB,OAAOZ,GAAKA;AAEzBA,IACFztB,KAAKytB,GAAKA,EAEd,CACA,OAAOA,CACT;AAEF/pB,EAAOsE,QAAUA,EAAQwB,O;ACnDzB1B,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO;AAETD,EAAA,aAAkB;AAClB,MAAMsmB,EAAa,CAAC,MAAO,QAAS,MAAO,UAAW,WAAY,QAAS,WAAY,WAAY,OAK7FC,EAAc,CAAC,iBAAkB,cAAe,gBAChDC,EAAc,CAAC,UACfC,EAAU,CACdC,IAPkB,CAAC,UAAW,UAAW,SAAU,aAAc,cAAe,WAAY,eAAgB,eAAgB,oBAAqB,eAAgB,mBAAoB,mBAOpK5gB,KAAK,KACtB6gB,IAAKJ,EAAYzgB,KAAK,KACtB8gB,IAAKJ,EAAY1gB,KAAK,MAElB+gB,EAAe,SAASA,EAAa1a,GACzC,MACM2a,EADa,IAAIpH,OAAO,oCAAoC5f,OAAOinB,QAAQN,GAAShoB,KAAI,EAAEuoB,EAAKC,KAAe,MAAMA,aAAqBD,MAAOlhB,KAAK,+EAC7H9J,KAAKmQ,EAAS+a,UACtCC,EAAO,IAAIzH,OAAO,GAAG5f,OAAOinB,QAAQN,GAAShoB,KAAI,EAAEuoB,EAAKC,KAAe,MAAMA,UAAkBD,MAAOlhB,KAAK,qLAS3GshB,EAAiB,CARN,IAAI1H,OAAO,OAAO4G,EAAWxgB,KAAK,6CACtB,IAAI4Z,OAAO,qCACP,IAAIA,OAAO,6CAClB,IAAIA,OAAO,oDACF,IAAIA,OAAO,gFACjB,IAAIA,OAAO,qDACX,IAAIA,OAAO,6CACV,IAAIA,OAAO,8CAEnC2H,EAAa,MACbC,EAAkC,mFAClCC,EAAS5a,IACb,IAAIpQ,EAASzE,OAAO6U;AACpB,GAAc,MAAVpQ,EACF,IACEA,EAASzE,OAAO0vB,eAAe5K,QAAQjQ,EACzC,CAAE,MAAOvQ,GAAI,CAEf,GAAc,MAAVG,EACF,IACEA,EAASzE,OAAOmE,aAAa2gB,QAAQjQ,EACvC,CAAE,MAAOvQ,GAAI,CAEf,OAAOG,CAAM,EAETkrB,EAAgB,KACpB,MAAMllB,EAAMglB,EAAOF;AACnB,OAAI9kB,IAEO4kB,EAAKnrB,KAAKmQ,EAASoK,MACrB,KAEA,OACT,EAEImR,EAAS,CAAC/a,EAAKpK,KACnBzK,OAAO6U,GAAOpK;AACd,OAAOA,CAAG,EAENolB,EAAM,CACVC,KAAM,aACNC,GAAI,eAEAC,EAAYvlB,IAChB,GAAmB,iBAARA,EAAkB,CAC3B,MAAMwlB,EAAQxlB,EAAI8S;AAClB,OAAOsS,EAAII,IAAUA,CACvB,CACA,OAAOxlB,CAAG,EAENylB,EAAczlB,IAClBA,EAAqB,iBAARA,EAAmBA,EAAI8S,mBAAgBtW;AACpD,OAAOe,OAAO+gB,KAAK8G,GAAK5iB,MAAKkjB,GAAQ1lB,IAAQolB,EAAIM,MAAU1lB,CAAG,EAE1Dc,EAAM,CAACsR,EAASuT,KACpB,GAAkB,MAAdA,EACF,MAAM,IAAIjqB,MAAMqpB;AAElB,IAAI/kB,EAAM;AACV,GAAIoS,EAAS,CACX,MAAMlc,EAAQkc,EAAQjc,MAAM,KAAKkY;AACjC,IAAK,IAAIlW,EAAI,EAAGA,EAAIjC,EAAMK,OAAQ4B,IAAK,CACrC,MAAMytB,EAAW1vB,EAAMiC;AACvB6H,EAAMglB,EAAO,GAAGY,EAASpT;AACzB,GAAIxS,EACF,KAEJ,CACF,CACA,GAAW,MAAPA,EAAa,CACf,MAAM6lB,EAAaX;AACnBllB,EAAoB,MAAd6lB,EAAqBA,EAAa,IAC1C,CACA,OAAON,EAAUvlB,EAAI,EAEjBkf,EAAM,SAAa9U,EAAKpK,GAC5B,GAAyB,IAArBqD,UAAU9M,OAAc,CAC1ByJ,EAAMoK;AACNA,EAAM0a,CACR,CACA,OAAOK,EAAO/a,EAAKpK,EACrB,EACM8lB,EAAc,CAAC1T,EAASuT,KAC5B,GAAkB,MAAdA,EACF,MAAM,IAAIjqB,MAAMqpB;AAElB,OAAOU,EAAY3kB,EAAIsR,GAAS,EAE5B5S,EAAWsmB,EACXC,EAAS3T,GAAiC,SAAtB5S,EAAS4S,GAC7B4T,EAAO5T,GAAiC,OAAtB5S,EAAS4S,GAoD3BnR,EAAY,KAChB,MAAMglB,EAAiBjB,EAAO;AAC9B,GAAIiB,EACF,OAAOA;AAET,IAAK,MAAMC,KAAUrB,EACnB,GAAIqB,EAAOzsB,KAAKmQ,EAAS+a,UACvB,OAAOuB,EAAOxO,KAAK9N,EAAS+a,UAAU;AAG1C,MAAO,KAAK;AAEd,SAASwB,GAAS,MAChBC,EAAK,SACLC,GACCrlB,GACIA,IACHA,EAASC;AAEX,MAAe,QAAXD,EACsB,mBAAVolB,EAAuBA,EAAMplB,QAAUxE,EACxB,mBAAb6pB,EACTA,EAASrlB,QADX,CAGT,CACA,MAAO,CACLsjB,eACAplB,MApEY,CAACkT,EAASuT,GAAa,KACnC,IAAI3rB;AACmB,iBAAZoY,IACTpY,EAASgrB,EAAO,GAAG5S,EAAQI;AAEf,MAAVxY,IACFA,EAASgrB,EAAO;AAElB,OAAiB,MAAVhrB,EAAiB2rB,EAAa3rB,CAAM,EA6D3CyrB,cACAjkB,SAhFe4Q,IACf,IAAIpY;AACmB,iBAAZoY,IACTpY,EAASgrB,EAAO,GAAG5S,EAAQI;AAEf,MAAVxY,IACFA,EAASgrB,EAAO;AAElB,OAAiB,MAAVhrB,EAAiBuqB,IAAevqB,CAAM,EAyE7C2O,QArCc,CAACyJ,EAASuT,GAAa,KACrC,IAAI3rB,EAASgrB,EAAO,GAAG5S,EAAQI;AACjB,MAAVxY,IACFA,EAAS+E,KAAKC,UAAU2mB;AAE1B,MAAqC,SAA9B,GAAG3rB,IAAS8Y,aAAwB,EAiC3ChS,MACAG,YACA6kB,cACAtmB,WACAumB,SACAC,OACAG,WACAZ,YACArG,MACAoH,SAvEe,CAAClU,EAASmU,GAAM,KAC/B,GAAuB,iBAAZnU,EACT,IACMmU,EACF7sB,aAAaC,QAAQ,GAAGyY,EAAQI,sBAAuBzT,KAAKC,WAAU,IAEtEtF,aAAaE,WAAW,GAAGwY,EAAQI,sBAEvC,CAAE,MAAO3Y,GACPsrB,EAAO,GAAG/S,EAAQI,sBAAuB+T,QAAO/pB,EAClD,KACK,CACL+pB,EAAiB,MAAXnU,GAAkBA;AACxB,IACMmU,EACF7sB,aAAaC,QAAQ,QAASoF,KAAKC,UAAUunB,IAE7C7sB,aAAaE,WAAW,QAE5B,CAAE,MAAOC,GACPsrB,EAAO,QAASoB,QAAO/pB,EACzB,CACF,GAmDJ;AACeiB,EAAA,QAAkB6mB,EAAanmB,SAASyL;AACvDzQ,EAAOsE,QAAUA,EAAQwB,O;AC9MzB1B,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO;AAETD,EAAQ+oB,wBAA0B/oB,EAAQgpB,8BAA2B;AACrE,IAAIC,EAAQ,EAAQ;AAIpB,IAAI/d,GAAU;AACd,MAAMge,EAAexpB,GACD,OAAXA,EAAkB,YAAoBX,IAAXW,EAAuB,YAAcI,OAAOqF,UAAUgI,SAASxH,KAAKjG,GAAQlB,MAAM,GAAI,GAEpH2qB,EAAazpB,IACjB,MAAMuG,EAAQ,EAAQ,QAGhBmjB,EAAY,CAChBpmB,KAAM,CACJqmB,6BAA6B,EAC7BC,wBAL2B,EAAIL,EAAMM,gBAMrCL,aALeA,EAAaxpB,IAO9ByB,MAAO,CACLqoB,cAAe1pB,OAAO+gB,KAAKnhB,GAAQoG;AAGjB,iBAAXpG,EACTuG,EAAMa,eAAepH,EAAQ0pB,GAE7BnjB,EAAM3B,iBAAiB5E,EAAQ0pB,EACjC,EAEIhhB,EAAWqhB,GACM,iBAAPA,EAAyB,OAAPA,EAA4B,mBAAPA,EAEjDC,EAA2BttB,IAC/BA,EAAEutB;AACF,GAAIvhB,EAAShM,EAAEqD,SAAU,CACvB5F,QAAQ6H,MAAM,8BAA+BtF,EAAEsD;AAC/CypB,EAAW/sB,EAAEsD,OACf,GAEIspB,EAA2B,KAC/B9d,GAAU;AACVpT,OAAO8xB,oBAAoB,qBAAsBF,EAAyB;AAE5E1pB,EAAQgpB,yBAA2BA;AACnC,MAAMD,EAA0B,KAC1B7d,GACF8d;AAEF9d,GAAU;AACVpT,OAAO0H,iBAAiB,qBAAsBkqB,EAAyB;AAEzE1pB,EAAQ+oB,wBAA0BA,C;ACtDlCjpB,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO;AAETD,EAAQupB,kBAAe;AAEvB,MAAMA,EAAe,IACZ,uCAAuCpuB,QAAQ,SAASwD,IAC7D,MAAM2hB,EAAoB,GAAhBzT,KAAKsQ,SAAgB;AAE/B,OADgB,MAANxe,EAAY2hB,EAAQ,EAAJA,EAAU,GAC3BnT,SAAS,GAAG;AAGzBnN,EAAQupB,aAAeA,C;ACZvBzpB,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO;AAETD,EAAQgI,6BAA+BA;AACvChI,EAAQ6pB,iCAAmCA;AAC3C7pB,EAAQiI,wBAA0BA;AAOlC,SAAS4hB,EAAiC/kB,GACxC,IAAIglB;AACJ,MAAMC,EAAYjlB,EAAapM,MAAM,KAAKqM,MAAKC,GACtCA,EAAMglB,OAAOC,WAAW;AAEjC,IAAKF,EACH,OAAO;AAET,MAAMG,EAAaH,EAAUrxB,MAAM,KAAKqM,MAAKC,GACpCA,EAAMglB,OAAOC,WAAW;AAEjC,IAAKC,EACH,OAAO;AAET,MAAMjqB,EAA4D,QAAnD6pB,EAAqBI,EAAWxxB,MAAM,KAAK,UAAuC,IAAvBoxB,OAAgC,EAASA,EAAmBE;AACtI,OAAK/pB,EAGDA,EAAMgqB,WAAW,MAAQhqB,EAAMkqB,SAAS,KACnC7oB,KAAK2P,MAAMhR,GAEbA,EALE,IAMX,CAOA,SAASgI,EAAwBgF,GAC/B,MAAMmd,EAAand,EAAIod,wBAAwB3xB,MAAM,QAG/C4xB,EAA8BF,EAAWrlB,MAAKwlB,GAC3CA,EAAOlV,cAAc4U,WAAW;AAEzC,GAAIK,EAA6B,CAC/B,MAAMlS,EAAgBkS,EAA4B9rB,MAAM,IAAqCwrB;AAC7F,GAAI5R,EACF,OAAOA,CAEX,CAGA,MAAMoS,EAAqBJ,EAAWrlB,MAAKwlB,GAClCA,EAAOlV,cAAc4U,WAAW;AAEzC,OAAKO,EAGEX,EAAiCW,EAAmBhsB,MAAM,KAFxD,IAGX,CAKA,SAASwJ,EAA6B6Q,GACpC,IAAI4R;AAEJ,MAAMC,EAAwB7R,EAAS4C,QAAQpY,IAAI;AACnD,GAAIqnB,EACF,OAAOA;AAIT,MAAMF,EAA0H,QAApGC,EAAQ,IAAI5R,EAAS4C,QAAQsL,WAAWhiB,MAAK,EAAE4H,KAA+B,kBAAtBA,EAAI0I,uBAA0D,IAAVoV,OAAmB,EAASA,EAAM;AAC1K,OAAKD,EAGEX,EAAiCW,GAF/B,IAGX,C;AClFA1qB,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO;AAETD,EAAA,QAAkB2qB;AAClB,MAAMC,EAAsB,EACtBC,EAAqB,GACrBC,EAAsB,CAAC,OAAQ,QAAS,MAAO,eAErD;AAOA,SAASH,EAAiBnV,GAExB,MAAMla,EAAM,GACNyvB,EAAY;AAClB,IAAIC,EAAiBxV,EACjByV,EAAS;AACb,KAAOD,GAAkBC,EAASL,GAAqB,CACrD,MAAMM,EAAUC,EAAoBH;AACpC,GAAgB,SAAZE,EACF;AAIF,GAAe,IAAXD,GAA4B,iBAAZC,EAClB,MAAO;AAIO,iBAAZA,GACF5vB,EAAIpC,KAAKgyB;AAEXD,GAAU;AAGV,IACED,EAAiBA,EAAeI,UAClC,CAAE,MAAOhvB,GAEP,KACF,CACF,CACA,OAAOd,EAAIsV,UAAU9K,KAAKilB,EAC5B,CAMA,SAASI,EAAoB1H,GAC3B,MAAMnoB,EAAM;AACZ,IAAKmoB,EACH,MAAO;AAIT,IACE,IAAKA,EAAQ7N,QACX,MAAO;AAETta,EAAIpC,KAAKuqB,EAAQ7N,QAAQP,cAC3B,CAAE,MAAOjZ,GAEP,MAAO,cACT,CAGA,IACMqnB,EAAQgC,IACVnqB,EAAIpC,KAAK,IAAIuqB,EAAQgC,KAEzB,CAAE,MAAOrpB,GAET,CAGA,IAAK,MAAMivB,KAAaP,EACtB,IACE,MAAM7qB,EAAQwjB,EAAQ6H,aAAaD;AAC/BprB,GACF3E,EAAIpC,KAAK,IAAImyB,MAAcprB,MAE/B,CAAE,MAAO7D,GAET,CAEF,IAAImvB,EAAgB;AAGpB,IACE,IAAK,MAAMC,KAAa/H,EAAQlqB,UAE9B,IAAIiyB,EAAUvB,WAAW,YAAzB,CAGA,GAAIsB,EAAgBC,EAAU1yB,OAAS+xB,EACrC;AAEFU,GAAiBC,EAAU1yB;AAC3BwC,EAAIpC,KAAK,IAAIsyB,IALb,CAOJ,CAAE,MAAOpvB,GAET,CACA,OAAOd,EAAIwK,KAAK,GAClB,CACApK,EAAOsE,QAAUA,EAAQwB,O;AChHzB9F,EAAOsE,QAAW,WAChB,QAA8B,IAAnBlI,OAAO2B,QAChB,MAAM,IAAIwE,MAAM;AAElB,OAAOnG,OAAO2B,OAChB,CALiB,E,qBCAjB,SAASoG,EAAuBzH,GAC9B,OAAOA,GAAOA,EAAIqzB,WAAarzB,EAAM,CACnC,QAAWA,EAEf,CACAsD,EAAOsE,QAAUH,EAAwBnE,EAAOsE,QAAQyrB,YAAa,EAAM/vB,EAAOsE,QAAiB,QAAItE,EAAOsE,O,GCJ1G0rB,EAA2B,CAAC;AAGhC,SAASC,EAAoBvsB,GAE5B,IAAIwsB,EAAeF,EAAyBtsB;AAC5C,QAAqBL,IAAjB6sB,EACH,OAAOA,EAAa5rB;AAGrB,IAAItE,EAASgwB,EAAyBtsB,GAAY,CAGjDY,QAAS,CAAC;AAIX6rB,EAAoBzsB,GAAUuG,KAAKjK,EAAOsE,QAAStE,EAAQA,EAAOsE,QAAS2rB;AAG3E,OAAOjwB,EAAOsE,OACf,CCrBA2rB,EAAoBG,EAAI,SAASpwB,GAChC,IAAIqwB,EAASrwB,GAAUA,EAAO+vB,WAC7B,WAAa,OAAO/vB,EAAgB,OAAG,EACvC,WAAa,OAAOA,CAAQ;AAC7BiwB,EAAoBK,EAAED,EAAQ,CAAEvL,EAAGuL;AACnC,OAAOA,CACR;ACNAJ,EAAoBK,EAAI,SAAShsB,EAASisB,GACzC,IAAI,IAAItf,KAAOsf,EACXN,EAAoBhM,EAAEsM,EAAYtf,KAASgf,EAAoBhM,EAAE3f,EAAS2M,IAC5E7M,OAAOC,eAAeC,EAAS2M,EAAK,CAAEuf,YAAY,EAAM7oB,IAAK4oB,EAAWtf,IAG3E;ACPAgf,EAAoBhM,EAAI,SAASvnB,EAAKY,GAAQ,OAAO8G,OAAOqF,UAAUlM,eAAe0M,KAAKvN,EAAKY,EAAO;ACCtG2yB,EAAoBrL,EAAI,SAAStgB,GACX,oBAAXmsB,QAA0BA,OAAOC,aAC1CtsB,OAAOC,eAAeC,EAASmsB,OAAOC,YAAa,CAAEnsB,MAAO;AAE7DH,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,GACvD;A1BHA0rB,EAAoBU,QAAU,SAASptB,EAASqtB,GAC9C30B,EAAqBsH;AACrBrH,EAAiB00B,CACnB;AAGAx0B,OAAO,qDAAuD6zB;AAI9DA,EAAoBY,MAAQ,SAAS9G,GACnC,IAAK9tB,EACH,MAAM,IAAIsG,MAAM;AAElB,IAAIuuB,EAAU50B,EAAe6tB;AAC7B,QAAuB,IAAZ+G,EACT,MAAM,IAAIvuB,MAAM,wCAA0CwnB;AAE5D,OAAO9tB,EAAmB60B,EAC5B;;A2BnBA,IAAI3sB,EAAyB,EAAQ;AACrC,EAAQ;AACR,EAAQ;AACR,EAAQ;AACR,IAAI4sB,EAA8B,EAAQ,QACtCnsB,EAAWT,EAAuB,EAAQ,SAC1C6sB,EAAmC7sB,EAAuB,EAAQ,UACtE,EAAI4sB,EAA4B1D,4BAChC,EAAI2D,EAAiClrB;AAGrClB,EAASkB,QAAQzH,QAAQQ,WAAaC,GAAa,4BAAPA,GAA2C,mBAAPA,GAAkC,WAAPA;AAS3G8F,EAASkB,QAAQ7H,OAAO,0BAA2B,IAAI,KACrD,MAAMgzB,EAAqB,EAAQ;AACnC,OAAOA,EAAmBnrB,SAAWmrB,CAAkB;AAIzDrsB,EAASkB,QAAQ7H,OAAO,iBAAkB,IAAI,KAC5C,MAAMizB,EAAuB,EAAQ;AACrC,OAAOA,EAAqBprB,SAAWorB,CAAoB;AAI7DtsB,EAASkB,QAAQ7H,OAAO,SAAU,IAAI,KACpC,MAAMkzB,EAAe,EAAQ;AAC7B,OAAOA,EAAarrB,SAAWqrB,CAAY;AAM7C/sB,OAAOC,eAAejI,OAAQ,QAAS,CACrC,GAAAuL,GACE,OAAO,EAAQ,OACjB;AAEFvD,OAAOC,eAAejI,OAAQ,SAAU,CACtC,GAAAuL,GACE,MAAMwpB,EAAe,EAAQ;AAC7B,OAAOA,EAAarrB,SAAWqrB,CACjC,G","sources":["webpack://webpack/runtime/compat","bpm:///HeadJS@2.587/js/modules/hns.js","bpm:///HeadJS@2.587/js/modules/hubspot-define-lazy-by-default.js","bpm:///HeadJS@2.587/js/modules/hubspot.require.js","bpm:///raven-hubspot@1.5344/js/configure.js","bpm:///raven-hubspot@1.5344/js/utils/getDeployInfo.js","bpm:///raven@3.5037/js/configError.js","bpm:///raven@3.5037/js/console.js","bpm:///raven@3.5037/js/index.js","bpm:///raven@3.5037/js/raven.js","bpm:///raven@3.5037/js/utils.js","bpm:///raven@3.5037/js/vendor/TraceKit.js","bpm:///raven@3.5037/js/vendor/json-stringify-safe.js","bpm:///head-dlb@1.4210/js/enablePersistedShowEventHandler.js","bpm:///PortalIdParser@2.291/js/index.ts","bpm:///enviro@4.313/js/index.ts","bpm:///hs-promise-rejection-tracking@1.4568/js/index.ts","bpm:///hs-promise-rejection-tracking@1.4568/js/utils/uuid.ts","bpm:///raven@3.5037/js/utils/getCorrelationId.ts","bpm:///raven@3.5037/js/utils/htmlTreeAsString.ts","webpack://hubspot global module","webpack:///usr/share/hubspot/build/.bpm/packages/bender-build-tools/static-1.2258/node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack://webpack/bootstrap","webpack://webpack/runtime/compat get default export","webpack://webpack/runtime/define property getters","webpack://webpack/runtime/hasOwnProperty shorthand","webpack://webpack/runtime/make namespace object","bpm:///head-dlb@1.4210/js/index.js"],"sourcesContent":["\n// will be called by consumer. only needed if dlb has holes\nvar dlbConsumerRequire, dlbConsumerIds;\n__webpack_require__.linkDlb = function(require, ids) {\n  dlbConsumerRequire = require;\n  dlbConsumerIds = ids;\n}\n\n// used by consumer to require modules identified in dlb manifest\nwindow[\"__webpack_require_head-dlb/bundle.production.js__\"] = __webpack_require__;\n\n// require a module from a DLB consumer. dlbcr = DLB consumer require\n// used in modules in this build to require hole modules\n__webpack_require__.dlbcr = function(id) {\n  if (!dlbConsumerRequire) {\n    throw new Error('dlb consumer not properly linked');\n  }\n  var otherId = dlbConsumerIds[id];\n  if (typeof otherId === 'undefined') {\n    throw new Error('dlb consumer does not provide module ' + id);\n  }\n  return dlbConsumerRequire(otherId);\n}\n","/* hs-eslint ignored failing-rules */\n/* eslint-disable vars-on-top */\n/* eslint-disable one-var */\n\n/*eslint-env node, browser */\n\nvar globalRoot;\n\nif (typeof window !== 'undefined' && window !== null) {\n  globalRoot = window;\n} else if (typeof global !== 'undefined' && global !== null) {\n  globalRoot = global;\n} else {\n  globalRoot = this;\n}\n\n// Assigns the object passed in to the global identifier hs.namespace.namespace.object.\n// If the namespace and/or object already exist, it will extend, preserving existing\n// data.\n//\n//   ns - namespace (expects dot-separated list -- something like 'hubspot.analytics.campaigns')\n//   ext - (optional, can be hash or function)-- each property will be copied into namespace\n//\n// Usage:\n//   hns('hs.namespace.namespace.object', {\n//     name: 'value'\n//   });\n//\n// Note, this does not recursively copy the original object, so that there aren't problems\n// accessing attributes that are set at runtime.\nvar hns =\n  (globalRoot.hns =\n  globalRoot.hns2 =\n    function (namespace, obj) {\n      var parts = namespace.split('.'),\n        parent = globalRoot,\n        name = '',\n        var_name,\n        last_index = parts.length - 1,\n        existing,\n        queue,\n        front;\n\n      obj = obj || {};\n      var_name = parts[last_index];\n\n      // Create any non-existant objects in the namespace path\n      for (var x = 0; x < last_index; x++) {\n        name = parts[x];\n        parent[name] = parent[name] || {};\n        parent = parent[name];\n      }\n\n      // Start merge if the namespace already existed\n      if (parent[var_name] && obj !== parent[var_name]) {\n        existing = parent[var_name];\n        queue = [];\n\n        for (var prop in obj) {\n          if (obj.hasOwnProperty(prop)) {\n            // If we are merging an object, keep track of each level in a\n            // queue and ensure we merge from the \"outside in\" to prevent clobbering\n            if (typeof existing[prop] === 'object') {\n              if (obj[prop] !== existing[prop]) {\n                queue.push({ qSource: obj[prop], qTarget: existing[prop] });\n              }\n\n              while (queue.length > 0) {\n                front = queue.shift();\n\n                for (var fprop in front.qSource) {\n                  if (front.qSource.hasOwnProperty(fprop)) {\n                    // Skip HTML entity attributes as the browser doesn't like it when we try to copy them\n                    if (\n                      typeof front.qSource[fprop] === 'object' &&\n                      typeof front.qTarget[fprop] === 'object' &&\n                      (!front.qSource[fprop] ||\n                        front.qSource[fprop].classList === void 0 ||\n                        front.qSource[fprop].nodeType === void 0)\n                    ) {\n                      if (front.qSource[fprop] !== front.qTarget[fprop]) {\n                        queue.push({\n                          qSource: front.qSource[fprop],\n                          qTarget: front.qTarget[fprop],\n                        });\n                      }\n                    } else {\n                      front.qTarget[fprop] = front.qSource[fprop];\n                    }\n                  }\n                }\n              }\n            } else {\n              existing[prop] = obj[prop];\n            }\n          }\n        }\n\n        // Otherwise, simply assign to the new namespace\n      } else {\n        parent[var_name] = obj;\n      }\n\n      // define any other modules that depended on this module\n      if (typeof hubspot !== 'undefined' && hubspot.updateDependencies) {\n        hubspot.updateDependencies(namespace);\n      }\n\n      return parent[var_name];\n    });\n\n// setup our top level namespace\nhns('hubspot');\n","// Change the default hubspot.define bahavior to be lazy by default\nhubspot.define = hubspot.defineLazy;\n","/* hs-eslint ignored failing-rules */\n/* eslint-disable vars-on-top */\n/* eslint-disable one-var */\n/* eslint-disable no-unused-vars */\n\n// Module / dependency management\n(function () {\n  if (typeof hubspot !== 'undefined' && hubspot !== null && hubspot.define) {\n    console.warn(\n      \"hubspot.define included more than once, you most certainly _don't_ want this\"\n    );\n  }\n\n  hubspot = hubspot || {};\n  hubspot.modules = hubspot.modules || {};\n\n  // a list of moduleDefs that have been required but whose dependencies are not yet satisfied\n  var deferredModules = [];\n\n  // a namespace-moduleDef mapping for modules that are defined but not yet required\n  var idleModulesDict = {};\n\n  // a namespace-module mapping for modules that have already been executed\n  var loadedModules = {};\n\n  // a namespace-truthy mapping for modules that failed while being defined\n  var erroredModules = {};\n\n  // a namespace-moduleDef mapping for all modules defined or required\n  var allModuleDefinitions = {};\n\n  var PLACEHOLDER_NS = '<hubspot.require>',\n    placholderCounter = 1;\n\n  hubspot.modules.useGlobals = function useGlobals(ns) {\n    return true;\n  };\n\n  // returns the module for the given namespace (or undefined if it or any parent namespace is not defined)\n  hubspot.modules.getNamespace = function (ns) {\n    if (loadedModules[ns]) {\n      return loadedModules[ns];\n    }\n\n    if (!hubspot.modules.useGlobals(ns)) {\n      return null;\n    }\n    var i,\n      names = ns.split('.'),\n      len = names.length,\n      obj = window;\n\n    for (i = 0; i < len; ++i) {\n      obj = obj[names[i]];\n      if (!obj) break;\n    }\n\n    return obj;\n  };\n\n  hubspot.getDeferredModules = function () {\n    return deferredModules;\n  };\n\n  hubspot.getIdleModules = function () {\n    return idleModulesDict;\n  };\n\n  hubspot.getLoadedModules = function () {\n    return loadedModules;\n  };\n\n  hubspot.getErroredModules = function () {\n    return erroredModules;\n  };\n\n  hubspot.getAllModuleDefinitions = function () {\n    return allModuleDefinitions;\n  };\n\n  var nextPlaceholderName = function () {\n    return PLACEHOLDER_NS.replace('>', ' ' + placholderCounter++ + '>');\n  };\n\n  hubspot.getBlockingModules = function () {\n    // Gets a list of those modules depended on by others, but not defined anywhere.\n    var modules = deferredModules,\n      out = [],\n      depSet = {},\n      dep,\n      modSet = {};\n\n    for (var j = modules.length; j--; ) {\n      var module = modules[j];\n      if (!module || !module.deps) continue;\n\n      modSet[module.ns] = true;\n      for (var i = module.deps.length; i--; ) {\n        depSet[module.deps[i]] = true;\n      }\n    }\n\n    for (dep in depSet) {\n      if (!modSet[dep]) out.push(dep);\n    }\n\n    return out;\n  };\n\n  function debug_define_enabled() {\n    var rval;\n    if (typeof hubspot._cached_debug_define_enabled !== 'undefined') {\n      return hubspot._cached_debug_define_enabled;\n    }\n\n    if (window.HUBSPOT_DEBUG_DEFINE === true) {\n      rval = true;\n    } else {\n      // See if localStorage works before using it\n      var test = 'test';\n      try {\n        localStorage.setItem(test, test);\n        localStorage.removeItem(test);\n        rval = localStorage.HUBSPOT_DEBUG_DEFINE === 'true';\n      } catch (e) {\n        rval = false;\n      }\n    }\n\n    hubspot._cached_debug_define_enabled = rval;\n    return rval;\n  }\n\n  // from defineModule, execute a module's factory function and return its result\n  function runModule(moduleDef) {\n    var i,\n      result,\n      args = [],\n      allDeps = moduleDef.allDeps;\n\n    // pass a reference to each of the module's dependencies as an argument\n    for (i = 0; i < allDeps.length; i++) {\n      args[i] = hubspot.modules.getNamespace(allDeps[i]);\n    }\n\n    try {\n      result =\n        typeof moduleDef.module === 'function'\n          ? moduleDef.module.apply(this, args)\n          : moduleDef.module;\n    } catch (e) {\n      var failedNs = moduleDef.ns || PLACEHOLDER_NS;\n      erroredModules[failedNs] = true;\n\n      if (debug_define_enabled()) {\n        throw e;\n      } else {\n        // prevent the error from interrupting whoever called defineModule\n        setTimeout(function () {\n          if (failedNs.length > 0) {\n            console.log('Error while defining hubspot module:', failedNs);\n          }\n          throw e;\n        }, 0);\n      }\n      // leave the module that threw the error undefined\n      return undefined;\n    }\n\n    return result;\n  }\n\n  // creates a module whose dependencies have been satisfied\n  function defineModule(moduleDef) {\n    var i, result;\n\n    result = runModule(moduleDef);\n\n    // Don't assign the result of hubspot.require to globals\n    if (moduleDef.ns) {\n      loadedModules[moduleDef.ns] = result;\n      if (hubspot.modules.useGlobals(moduleDef.ns)) {\n        window.hns2(moduleDef.ns, result);\n      } else {\n        hubspot.updateDependencies(moduleDef.ns);\n      }\n    }\n  }\n\n  // update dependencies for any module that depended on a namespace that was just defined\n  hubspot.updateDependencies = function (ns) {\n    var moduleDef, deps;\n    var i,\n      j,\n      modulesToDefine = [];\n    // check if creating this module just satisfied another module's dependency\n    for (i = 0; i < deferredModules.length; i++) {\n      moduleDef = deferredModules[i];\n\n      if (moduleDef.depsDict[ns]) {\n        // remove just-defined module from the dependencies array & dict\n        delete moduleDef.depsDict[ns];\n        deps = moduleDef.deps;\n        for (j = 0; j < deps.length; j++) {\n          if (deps[j] === ns) {\n            deps.splice(j, 1);\n            break;\n          }\n        }\n        // if another deferred module's last dependency was satisfied, fulfill it\n        if (deps.length === 0) {\n          deferredModules.splice(i, 1);\n          modulesToDefine.push(moduleDef);\n          i--;\n        }\n      }\n    }\n\n    for (i = 0; i < modulesToDefine.length; i++) {\n      defineModule(modulesToDefine[i]);\n    }\n  };\n\n  // determine whether the given module is a requirement of a deferred module\n  function isModuleRequired(ns) {\n    var i, moduleDef;\n    for (i = 0; i < deferredModules.length; i++) {\n      moduleDef = deferredModules[i];\n\n      if (moduleDef.depsDict[ns]) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  // add a module to deferredModules, remove any already-met deps from its list\n  function addDeferredModule(ns, moduleDef) {\n    var deps = moduleDef.deps,\n      depsDict = moduleDef.depsDict,\n      i = deps.length,\n      j,\n      idleDepsToPromote = [],\n      idleModule,\n      dep;\n\n    while (i--) {\n      dep = deps[i];\n      // dependency already satisfied, remove it\n      if (hubspot.modules.getNamespace(dep)) {\n        deps.splice(i, 1);\n        delete depsDict[dep];\n      }\n\n      // dependency was considered idle, promote it\n      if (idleModulesDict[dep]) {\n        idleDepsToPromote.push(dep);\n      }\n    }\n\n    if (deps.length > 0) {\n      deferredModules.push(moduleDef);\n    } else {\n      defineModule(moduleDef);\n    }\n\n    // to avoid timing issues, promote idle modules after this module's deps are updated\n    for (i = 0; i < idleDepsToPromote.length; i++) {\n      dep = idleDepsToPromote[i];\n      idleModule = idleModulesDict[dep];\n      if (!idleModule) {\n        continue;\n      }\n      delete idleModulesDict[dep];\n      addDeferredModule(dep, idleModule);\n    }\n  }\n\n  function extractCallSite(callSite) {\n    return {\n      fileName: callSite.getFileName(),\n      lineNumber: callSite.getLineNumber(),\n      columnNumber: callSite.getColumnNumber(),\n      functionName: callSite.getFunctionName(),\n    };\n  }\n\n  function getStackTrace() {\n    // Get the standard stack if the Error.captureStackTrace API isn't around (non-Chrome)\n    if (!Error.captureStackTrace) {\n      return new Error().stack;\n    }\n\n    // Otherwise, get better stack info, more info in:\n    // https://code.google.com/p/v8-wiki/wiki/JavaScriptStackTraceApi\n    // http://stackoverflow.com/questions/11386492/accessing-line-number-in-v8-javascript-chrome-node-js\n    var orig = Error.prepareStackTrace;\n    // probably not set\n    try {\n      Error.prepareStackTrace = function (_, stack) {\n        return stack;\n      };\n      var err = new Error();\n      Error.captureStackTrace(err);\n      var stack = err.stack;\n      var fileName = stack[0].getFileName();\n      var result = stack\n        .slice(2)\n        .map(extractCallSite)\n        .filter(function (c) {\n          return (\n            !c.functionName ||\n            (c.functionName.indexOf('hubspot.define') !== 0 &&\n              c.functionName.indexOf('hubspot.require') !== 0)\n          );\n        });\n\n      return result.length > 0 ? result : null;\n    } catch (e) {\n      return null;\n    } finally {\n      Error.prepareStackTrace = orig;\n    }\n  }\n\n  // defines an AMD module in the given namespace\n  //  ns - string namespace to define module in\n  //  deps - array of namespaces this module depends on\n  //  module - module or function to create a module\n  //  isEagerDefinition - whether the module factory should automatically be called\n  //                      or only be called when someone depends in it\n  hubspot.defineHelper = function (ns, deps, module, isEagerDefinition) {\n    var depsDict = {},\n      moduleDef,\n      dep,\n      stack;\n\n    // Keep track of stack traces in debug mode so tooling can map module names\n    // to where it is defined in a file\n    if (debug_define_enabled()) {\n      stack = getStackTrace();\n    }\n\n    if (typeof deps === 'string') {\n      throw new Error(\n        'hubspot.define/require must be provided an array of dependencies, not a string'\n      );\n    }\n\n    if (typeof isEagerDefinition !== 'boolean') {\n      throw new Error(\n        'hubspot.defineHelper must be called with the isEagerDefinition flag'\n      );\n    }\n\n    if (loadedModules[ns] !== undefined) {\n      if (typeof module === 'function') {\n        console.warn(\n          \"You should not redefine a module with hubspot.define, '\" +\n            ns +\n            \"' has already been defined once.\"\n        );\n      } else {\n        throw new Error(\n          \"You cannot redefine a module with hubspot.define, '\" +\n            ns +\n            \"' has already been defined once.\"\n        );\n      }\n    }\n\n    for (var i = 0; i < deps.length; i++) {\n      dep = deps[i];\n      depsDict[dep] = dep;\n    }\n\n    moduleDef = {\n      ns: ns, // module namespace\n      allDeps: deps.slice(), // all module dependencies\n      deps: deps, // currently unsatisfied dependencies (to be mutated during definition)\n      depsDict: depsDict, // dictionary of dependencies (to be mutated during definition)\n      module: module, // module or module creation callback\n      stack: stack,\n    };\n\n    // Keep track of all module definitions for debugging\n    allModuleDefinitions[ns || nextPlaceholderName()] = moduleDef;\n\n    if (ns == null || isEagerDefinition || isModuleRequired(ns)) {\n      addDeferredModule(ns, moduleDef);\n    } else {\n      idleModulesDict[ns] = moduleDef;\n    }\n  };\n\n  hubspot.defineEager = function (ns, deps, module) {\n    hubspot.defineHelper(ns, deps, module, true);\n  };\n\n  hubspot.defineLazy = function (ns, deps, module) {\n    hubspot.defineHelper(ns, deps, module, false);\n  };\n\n  // By default, make hubspot.define backwards compatible and define code \"eagerly\"\n  hubspot.define = hubspot.defineEager;\n\n  // executes a callback when all dependencies have been loaded\n  //  deps - dependencies\n  //  onLoaded - callback that will be passed its dependencies as arguments\n  hubspot.require = function (deps, onLoaded) {\n    hubspot.defineEager(null, deps, onLoaded);\n  };\n\n  hubspot.requireSync = function (moduleId) {\n    var mod;\n\n    hubspot.require([moduleId], function (result) {\n      mod = result;\n    });\n\n    if (!mod) {\n      throw new Error(\n        moduleId + ' has not been defined with hubspot.define or is blocked'\n      );\n    }\n\n    return mod;\n  };\n})();\n\n(function () {\n  var unhandledReasons = [];\n  var unhandledRejections = [];\n\n  // See: https://html.spec.whatwg.org/multipage/webappapis.html#the-hostpromiserejectiontracker-implementation\n  window.addEventListener('unhandledrejection', function (e) {\n    unhandledRejections.push(e.promise);\n    unhandledReasons.push(e.reason);\n  });\n\n  window.addEventListener('rejectionhandled', function (e) {\n    var promise = e.promise;\n    var at = unhandledRejections.indexOf(promise);\n    if (at !== -1) {\n      unhandledRejections.splice(at, 1);\n      unhandledReasons.splice(at, 1);\n    }\n  });\n\n  hubspot.getUnhandledReasons = function () {\n    return unhandledReasons.slice();\n  };\n})();\n","\"use strict\";\n'use es6';\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = configure;\nvar _enviro = _interopRequireDefault(require(\"enviro\"));\nvar _PortalIdParser = _interopRequireDefault(require(\"PortalIdParser\"));\nvar _ravenJs = _interopRequireDefault(require(\"raven-js\"));\nvar _hubspot = _interopRequireDefault(require(\"hubspot\"));\nvar _getDeployInfo = require(\"./utils/getDeployInfo\");\n// 200KiB\nconst MAX_MSG_CHARS = 200 * 1000;\nfunction getSeleniumCookieValue() {\n  try {\n    if (!(document && document.cookie)) {\n      return undefined;\n    }\n    const match = document.cookie.match(/hs_selenium=([^;]+)/);\n    return match ? decodeURIComponent(match[1]) : undefined;\n  } catch (__err) {\n    return undefined;\n  }\n}\nfunction getDataCallback(origDataCallback) {\n  return function dataCallback(data) {\n    if (origDataCallback) {\n      data = origDataCallback(data);\n    }\n    const seleniumCookieValue = getSeleniumCookieValue();\n    if (seleniumCookieValue) {\n      data.extra = data.extra || {};\n      data.extra.seleniumCookie = seleniumCookieValue;\n    }\n    try {\n      const jsonString = JSON.stringify(data.extra);\n      if (jsonString.length > MAX_MSG_CHARS) {\n        if (_enviro.default.debug('sentry')) {\n          console.error(`Excessively large message logged to Raven (${jsonString.length} characters). The extra data is logged here but will not be sent to Sentry.`, data.extra);\n        }\n        data.extra = {\n          message: 'Error processing Sentry (extra data more than 200kb stringified). Existing extra data removed.'\n        };\n      }\n    } catch (__err) {\n      // Failed to stringify JSON, report unserializable object problem.\n      if (_enviro.default.debug('sentry')) {\n        console.error('An unserializable object was logged to Raven as `extra` data. The extra data is logged here but will not be sent to Sentry.', data.extra);\n      }\n      data.extra = {\n        message: 'Error processing Sentry (extra data not serializable). Existing extra data removed.'\n      };\n    }\n    return data;\n  };\n}\nfunction configure(dsn, options = {}) {\n  if (typeof _hubspot.default.bender === 'undefined' && _enviro.default.getShort('sentry') !== 'prod') {\n    console.warn('[raven-hubspot] `project` and `release` Sentry tags will not be set. See: HubSpot/raven-hubspot/issues/40');\n  }\n  const {\n    bender\n  } = _hubspot.default;\n  const defaultOptions = {\n    sampleRate: 1,\n    // The `stacktrace` option enables stack traces for captureMessage calls\n    stacktrace: true,\n    ignoreErrors: ['Aborting: redirection in progress', /Aborting: notifying parents of unauthorized response/, /Cannot set property 'install' of undefined/, /ResizeObserver loop completed with undelivered notifications/, /ResizeObserver loop limit exceeded/, /'URLSearchParams' is not defined/, /Not implemented on this platform/, /Object Not Found Matching Id/i],\n    ignoreUrls: []\n  };\n  const providedErrorsToIgnore = options.ignoreErrors || [];\n  options = Object.assign({}, defaultOptions, options, {\n    ignoreErrors: [...defaultOptions.ignoreErrors, ...providedErrorsToIgnore]\n  });\n  const env = _enviro.default.getShort('sentry');\n  let isAcceptanceTest;\n  try {\n    isAcceptanceTest = !!(document && document.cookie && document.cookie.includes('hs_selenium'));\n  } catch (__err) {\n    isAcceptanceTest = false;\n  }\n  const deployInfo = (0, _getDeployInfo.getDeployInfo)();\n  _ravenJs.default.config(dsn, {\n    release: bender && bender.currentProjectVersion,\n    ignoreErrors: options.ignoreErrors,\n    ignoreUrls: options.ignoreUrls,\n    sampleRate: options.sampleRate,\n    environment: env,\n    tags: Object.assign({\n      env,\n      project: deployInfo ? deployInfo.deployable :\n      // HACK deploy info is not available locally or on infra apps\n      // right now, so we fallback to the bender project. Technically\n      // the bender project isn't always the same, but this is the case\n      // for most apps. Tracking fixes for this here:\n      // https://git.hubteam.com/HubSpot/faas-reliability-ideas/issues/496\n      bender && bender.currentProject,\n      portalId: _PortalIdParser.default.get({\n        preserveGlobalId: true\n      }),\n      hublet: _enviro.default.getHublet(),\n      isAcceptanceTest\n    }, options.tags),\n    breadcrumbCallback: options.breadcrumbCallback || (crumb => crumb),\n    autoBreadcrumbs: {\n      console: false\n    },\n    dataCallback: getDataCallback(options.dataCallback),\n    shouldSendCallback: options.shouldSendCallback || (() => true),\n    stacktrace: options.stacktrace\n  }).install();\n  if (_enviro.default.debug('sentry') || !_enviro.default.deployed('sentry')) {\n    // According to the docs (https://docs.sentry.io/clients/javascript/config/) `debug` is\n    // a valid option but it doesn't seems to work in the version of `raven-js` that we have\n    // repackaged. Setting this property works for now.\n    _ravenJs.default.debug = true;\n  }\n  if (!_enviro.default.deployed('sentry')) {\n    // If not deployed we still want to configure Raven and allow local testing. This\n    // would be more appropriate as a NODE_ENV check when available.\n    _ravenJs.default.setTransport(({\n      onSuccess\n    }) => {\n      onSuccess();\n    });\n  }\n}\nconst origSetInterval = window.setInterval;\nwindow.setInterval = function setIntervalWrapped(fn, ...rest) {\n  if (typeof fn !== 'function') {\n    _ravenJs.default.captureException(new Error('Implied eval. Only a function should be passed as first arg of setInterval.'));\n  }\n  return origSetInterval(fn, ...rest);\n};\nconst origSetTimeout = window.setTimeout;\nwindow.setTimeout = function setTimeoutWrapped(fn, ...rest) {\n  if (typeof fn !== 'function') {\n    _ravenJs.default.captureException(new Error('Implied eval. Only a function should be passed as first arg of setTimeout.'));\n  }\n  return origSetTimeout(fn, ...rest);\n};\nmodule.exports = exports.default;","\"use strict\";\n'use es6';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getDeployInfo = getDeployInfo;\nconst DEPLOYABLE_SERVER_TIMING_ENTRY_NAME = 'd';\nfunction getDeployInfo(perf = window.performance) {\n  try {\n    const firstNavigationEntry = perf.getEntriesByType('navigation')[0];\n    const serverTimingEntries = firstNavigationEntry.serverTiming;\n    const description = serverTimingEntries.find(entry => entry.name === DEPLOYABLE_SERVER_TIMING_ENTRY_NAME).description;\n    const [deployable, deployId] = description.split('#');\n    if (deployable !== undefined && deployId !== undefined) {\n      return {\n        deployable,\n        deployId\n      };\n    }\n    return undefined;\n  } catch (e) {\n    return undefined;\n  }\n}","function RavenConfigError(message) {\n  this.name = 'RavenConfigError';\n  this.message = message;\n}\nRavenConfigError.prototype = new Error();\nRavenConfigError.prototype.constructor = RavenConfigError;\n\nmodule.exports = RavenConfigError;\n","var wrapMethod = function (console, level, callback) {\n  var originalConsoleLevel = console[level];\n  var originalConsole = console;\n\n  if (!(level in console)) {\n    return;\n  }\n\n  var sentryLevel = level === 'warn' ? 'warning' : level;\n\n  console[level] = function () {\n    var args = [].slice.call(arguments);\n\n    var msg = '' + args.join(' ');\n    var data = {\n      level: sentryLevel,\n      logger: 'console',\n      extra: { arguments: args },\n    };\n\n    if (level === 'assert') {\n      if (args[0] === false) {\n        // Default browsers message\n        msg =\n          'Assertion failed: ' + (args.slice(1).join(' ') || 'console.assert');\n        data.extra.arguments = args.slice(1);\n        callback && callback(msg, data);\n      }\n    } else {\n      callback && callback(msg, data);\n    }\n\n    // this fails for some browsers. :(\n    if (originalConsoleLevel) {\n      // IE9 doesn't allow calling apply on console functions directly\n      // See: https://stackoverflow.com/questions/5472938/does-ie9-support-console-log-and-is-it-a-real-function#answer-5473193\n      Function.prototype.apply.call(\n        originalConsoleLevel,\n        originalConsole,\n        args\n      );\n    }\n  };\n};\n\nmodule.exports = {\n  wrapMethod: wrapMethod,\n};\n","/**\n * Enforces a single instance of the Raven client, and the\n * main entry point for Raven. If you are a consumer of the\n * Raven library, you SHOULD load this file (vs raven.js).\n **/\n\nvar { Raven: RavenConstructor } = require('./raven');\n\n// This is to be defensive in environments where window does not exist (see https://github.com/getsentry/raven-js/pull/785)\nvar _window =\n  typeof window !== 'undefined'\n    ? window\n    : typeof global !== 'undefined'\n    ? global\n    : typeof self !== 'undefined'\n    ? self\n    : {};\nvar _Raven = _window.Raven;\n\nvar Raven = new RavenConstructor();\n\n/*\n * Allow multiple versions of Raven to be installed.\n * Strip Raven from the global context and returns the instance.\n *\n * @return {Raven}\n */\nRaven.noConflict = function () {\n  _window.Raven = _Raven;\n  return Raven;\n};\n\nRaven.afterLoad();\n\n/**\n * Export public API methods bound to Raven so\n * they'll work if imported via named imports\n */\nmodule.exports.config = Raven.config.bind(Raven);\nmodule.exports.install = Raven.install.bind(Raven);\nmodule.exports.setDSN = Raven.setDSN.bind(Raven);\nmodule.exports.context = Raven.context.bind(Raven);\nmodule.exports.wrap = Raven.wrap.bind(Raven);\nmodule.exports.uninstall = Raven.uninstall.bind(Raven);\nmodule.exports.capturePageEvent = Raven.capturePageEvent.bind(Raven);\nmodule.exports.captureException = Raven.captureException.bind(Raven);\nmodule.exports.captureMessage = Raven.captureMessage.bind(Raven);\nmodule.exports.captureBreadcrumb = Raven.captureBreadcrumb.bind(Raven);\nmodule.exports.addPlugin = Raven.addPlugin.bind(Raven);\nmodule.exports.setUserContext = Raven.setUserContext.bind(Raven);\nmodule.exports.setExtraContext = Raven.setExtraContext.bind(Raven);\nmodule.exports.setTagsContext = Raven.setTagsContext.bind(Raven);\nmodule.exports.clearContext = Raven.clearContext.bind(Raven);\nmodule.exports.getContext = Raven.getContext.bind(Raven);\nmodule.exports.setEnvironment = Raven.setEnvironment.bind(Raven);\nmodule.exports.setRelease = Raven.setRelease.bind(Raven);\nmodule.exports.setDataCallback = Raven.setDataCallback.bind(Raven);\nmodule.exports.setBreadcrumbCallback = Raven.setBreadcrumbCallback.bind(Raven);\nmodule.exports.setShouldSendCallback = Raven.setShouldSendCallback.bind(Raven);\nmodule.exports.setTransport = Raven.setTransport.bind(Raven);\nmodule.exports.lastException = Raven.lastException.bind(Raven);\nmodule.exports.lastEventId = Raven.lastEventId.bind(Raven);\nmodule.exports.isSetup = Raven.isSetup.bind(Raven);\nmodule.exports.afterLoad = Raven.afterLoad.bind(Raven);\nmodule.exports.showReportDialog = Raven.showReportDialog.bind(Raven);\n\nmodule.exports = Raven;\n","/*global XDomainRequest:false */\n\nimport htmlTreeAsString from './utils/htmlTreeAsString';\nimport { redactSensitiveUrlParams } from './utils';\n\nvar TraceKit = require('./vendor/TraceKit.js');\nvar stringify = require('./vendor/json-stringify-safe.js');\nvar RavenConfigError = require('./configError');\nvar {\n  getCorrelationIdFromResponse,\n  getCorrelationIdFromXHR,\n} = require('./utils/getCorrelationId');\n\nvar utils = require('./utils');\nvar isError = utils.isError;\nvar isObject = utils.isObject;\nvar isObject = utils.isObject;\nvar isErrorEvent = utils.isErrorEvent;\nvar isUndefined = utils.isUndefined;\nvar isFunction = utils.isFunction;\nvar isString = utils.isString;\nvar isEmptyObject = utils.isEmptyObject;\nvar each = utils.each;\nvar objectMerge = utils.objectMerge;\nvar truncate = utils.truncate;\nvar hasKey = utils.hasKey;\nvar joinRegExp = utils.joinRegExp;\nvar urlencode = utils.urlencode;\nvar uuid4 = utils.uuid4;\nvar isSameException = utils.isSameException;\nvar isSameStacktrace = utils.isSameStacktrace;\nvar parseUrl = utils.parseUrl;\nvar fill = utils.fill;\n\nvar wrapConsoleMethod = require('./console').wrapMethod;\n\nvar dsnKeys = 'source protocol user pass host port path'.split(' '),\n  dsnPattern = /^(?:(\\w+):)?\\/\\/(?:(\\w+)(:\\w+)?@)?([\\w\\.-]+)(?::(\\d+))?(\\/.*)/;\n\nfunction now() {\n  return +new Date();\n}\n\n// This is to be defensive in environments where window does not exist (see https://github.com/getsentry/raven-js/pull/785)\nvar _window =\n  typeof window !== 'undefined'\n    ? window\n    : typeof global !== 'undefined'\n    ? global\n    : typeof self !== 'undefined'\n    ? self\n    : {};\nvar _document = _window.document;\nvar _navigator = _window.navigator;\n\nfunction keepOriginalCallback(original, callback) {\n  return isFunction(callback)\n    ? function (data) {\n        return callback(data, original);\n      }\n    : callback;\n}\n\n// First, check for JSON support\n// If there is no JSON, we no-op the core features of Raven\n// since JSON is required to encode the payload\nexport function Raven() {\n  this._hasJSON = !!(typeof JSON === 'object' && JSON.stringify);\n  // Raven can run in contexts where there's no document (react-native)\n  this._hasDocument = !isUndefined(_document);\n  this._hasNavigator = !isUndefined(_navigator);\n  this._lastCapturedException = null;\n  this._lastData = null;\n  this._lastEventId = null;\n  this._globalServer = null;\n  this._globalKey = null;\n  this._globalProject = null;\n  this._globalContext = {};\n  this._globalOptions = {\n    logger: 'javascript',\n    ignoreErrors: [],\n    ignoreUrls: [],\n    whitelistUrls: [],\n    includePaths: [],\n    collectWindowErrors: true,\n    maxMessageLength: 0,\n\n    // By default, truncates URL values to 250 chars\n    maxUrlLength: 250,\n    stackTraceLimit: 50,\n    autoBreadcrumbs: true,\n    instrument: true,\n    sampleRate: 1,\n\n    // CHIRP error enhancement configuration\n    chirpErrorEnhancement: {\n      enabled: true,\n      extractServiceInfo: true,\n      enhanceErrorMessages: true,\n      includeCallStack: true,\n      maxNestingDepth: 5,\n    },\n  };\n  this._ignoreOnError = 0;\n  this._isRavenInstalled = false;\n  this._originalErrorStackTraceLimit = Error.stackTraceLimit;\n  // capture references to window.console *and* all its methods first\n  // before the console plugin has a chance to monkey patch\n  this._originalConsole = _window.console || {};\n  this._originalConsoleMethods = {};\n  this._plugins = [];\n  this._startTime = now();\n  this._wrappedBuiltIns = [];\n  this._breadcrumbs = [];\n  this._lastCapturedEvent = null;\n  this._keypressTimeout;\n  this._location = _window.location;\n  this._lastHref = this._location && this._location.href;\n  this._resetBackoff();\n\n  // eslint-disable-next-line guard-for-in\n  for (var method in this._originalConsole) {\n    this._originalConsoleMethods[method] = this._originalConsole[method];\n  }\n}\n\n/*\n * The core Raven singleton\n *\n * @this {Raven}\n */\n\nRaven.prototype = {\n  // Hardcode version string so that raven source can be loaded directly via\n  // webpack (using a build step causes webpack #1617). Grunt verifies that\n  // this value matches package.json during build.\n  //   See: https://github.com/getsentry/raven-js/issues/465\n  VERSION: '3.19.1',\n\n  debug: false,\n\n  TraceKit: TraceKit, // alias to TraceKit\n\n  /*\n   * Configure Raven with a DSN and extra options\n   *\n   * @param {string} dsn The public Sentry DSN\n   * @param {object} options Set of global options [optional]\n   * @return {Raven}\n   */\n  config: function (dsn, options) {\n    var self = this;\n\n    if (self._globalServer) {\n      this._logDebug('error', 'Error: Raven has already been configured');\n      return self;\n    }\n    if (!dsn) return self;\n\n    var globalOptions = self._globalOptions;\n\n    // merge in options\n    if (options) {\n      each(options, function (key, value) {\n        // tags and extra are special and need to be put into context\n        if (key === 'tags' || key === 'extra' || key === 'user') {\n          self._globalContext[key] = value;\n        } else {\n          globalOptions[key] = value;\n        }\n      });\n    }\n\n    self.setDSN(dsn);\n\n    // \"Script error.\" is hard coded into browsers for errors that it can't read.\n    // this is the result of a script being pulled in from an external domain and CORS.\n    globalOptions.ignoreErrors.push(/^Script error\\.?$/);\n    globalOptions.ignoreErrors.push(\n      /^Javascript error: Script error\\.? on line 0$/\n    );\n\n    // join regexp rules into one big rule\n    globalOptions.ignoreErrors = joinRegExp(globalOptions.ignoreErrors);\n    globalOptions.ignoreUrls = globalOptions.ignoreUrls.length\n      ? joinRegExp(globalOptions.ignoreUrls)\n      : false;\n    globalOptions.whitelistUrls = globalOptions.whitelistUrls.length\n      ? joinRegExp(globalOptions.whitelistUrls)\n      : false;\n    globalOptions.includePaths = joinRegExp(globalOptions.includePaths);\n    globalOptions.maxBreadcrumbs = Math.max(\n      0,\n      Math.min(globalOptions.maxBreadcrumbs || 100, 100)\n    ); // default and hard limit is 100\n\n    var autoBreadcrumbDefaults = {\n      xhr: true,\n      console: true,\n      dom: true,\n      location: true,\n    };\n\n    var autoBreadcrumbs = globalOptions.autoBreadcrumbs;\n    if ({}.toString.call(autoBreadcrumbs) === '[object Object]') {\n      autoBreadcrumbs = objectMerge(autoBreadcrumbDefaults, autoBreadcrumbs);\n    } else if (autoBreadcrumbs !== false) {\n      autoBreadcrumbs = autoBreadcrumbDefaults;\n    }\n    globalOptions.autoBreadcrumbs = autoBreadcrumbs;\n\n    var instrumentDefaults = {\n      tryCatch: true,\n    };\n\n    var instrument = globalOptions.instrument;\n    if ({}.toString.call(instrument) === '[object Object]') {\n      instrument = objectMerge(instrumentDefaults, instrument);\n    } else if (instrument !== false) {\n      instrument = instrumentDefaults;\n    }\n    globalOptions.instrument = instrument;\n\n    TraceKit.collectWindowErrors = !!globalOptions.collectWindowErrors;\n\n    // return for chaining\n    return self;\n  },\n\n  /*\n   * Installs a global window.onerror error handler\n   * to capture and report uncaught exceptions.\n   * At this point, install() is required to be called due\n   * to the way TraceKit is set up.\n   *\n   * @return {Raven}\n   */\n  install: function () {\n    var self = this;\n    if (self.isSetup() && !self._isRavenInstalled) {\n      TraceKit.report.subscribe(function () {\n        self._handleOnErrorStackInfo.apply(self, arguments);\n      });\n      if (\n        self._globalOptions.instrument &&\n        self._globalOptions.instrument.tryCatch\n      ) {\n        self._instrumentTryCatch();\n      }\n\n      if (self._globalOptions.autoBreadcrumbs) self._instrumentBreadcrumbs();\n\n      // Install all of the plugins\n      self._drainPlugins();\n\n      self._isRavenInstalled = true;\n    }\n\n    Error.stackTraceLimit = self._globalOptions.stackTraceLimit;\n    return this;\n  },\n\n  /*\n   * Set the DSN (can be called multiple time unlike config)\n   *\n   * @param {string} dsn The public Sentry DSN\n   */\n  setDSN: function (dsn) {\n    var self = this,\n      uri = self._parseDSN(dsn),\n      lastSlash = uri.path.lastIndexOf('/'),\n      path = uri.path.substr(1, lastSlash);\n\n    self._dsn = dsn;\n    self._globalKey = uri.user;\n    self._globalSecret = uri.pass && uri.pass.substr(1);\n    self._globalProject = uri.path.substr(lastSlash + 1);\n\n    self._globalServer = self._getGlobalServer(uri);\n\n    self._globalEndpoint =\n      self._globalServer +\n      '/' +\n      path +\n      'api/' +\n      self._globalProject +\n      '/store/';\n\n    self._globalPageEventEndpoint =\n      self._globalServer + '/frontend/observability/page-tracking/store/';\n\n    // Reset backoff state since we may be pointing at a\n    // new project/server\n    this._resetBackoff();\n  },\n\n  /*\n   * Wrap code within a context so Raven can capture errors\n   * reliably across domains that is executed immediately.\n   *\n   * @param {object} options A specific set of options for this context [optional]\n   * @param {function} func The callback to be immediately executed within the context\n   * @param {array} args An array of arguments to be called with the callback [optional]\n   */\n  context: function (options, func, args) {\n    if (isFunction(options)) {\n      args = func || [];\n      func = options;\n      options = undefined;\n    }\n\n    return this.wrap(options, func).apply(this, args);\n  },\n\n  /*\n   * Wrap code within a context and returns back a new function to be executed\n   *\n   * @param {object} options A specific set of options for this context [optional]\n   * @param {function} func The function to be wrapped in a new context\n   * @param {function} func A function to call before the try/catch wrapper [optional, private]\n   * @return {function} The newly wrapped functions with a context\n   */\n  wrap: function (options, func, _before) {\n    var self = this;\n    // 1 argument has been passed, and it's not a function\n    // so just return it\n    if (isUndefined(func) && !isFunction(options)) {\n      return options;\n    }\n\n    // options is optional\n    if (isFunction(options)) {\n      func = options;\n      options = undefined;\n    }\n\n    // At this point, we've passed along 2 arguments, and the second one\n    // is not a function either, so we'll just return the second argument.\n    if (!isFunction(func)) {\n      return func;\n    }\n\n    // We don't wanna wrap it twice!\n    try {\n      if (func.__raven__) {\n        return func;\n      }\n\n      // If this has already been wrapped in the past, return that\n      if (func.__raven_wrapper__) {\n        return func.__raven_wrapper__;\n      }\n    } catch (e) {\n      // Just accessing custom props in some Selenium environments\n      // can cause a \"Permission denied\" exception (see raven-js#495).\n      // Bail on wrapping and return the function as-is (defers to window.onerror).\n      return func;\n    }\n\n    // We keep this function name unminified and look for it in the stack trace\n    // in _prepareFrames so we can mark Raven frames as in_app: false\n    const { ravenWrapped } = {\n      ['raven' + 'Wrapped']() {\n        var args = [],\n          i = arguments.length,\n          deep = !options || (options && options.deep !== false);\n\n        if (_before && isFunction(_before)) {\n          _before.apply(this, arguments);\n        }\n\n        // Recursively wrap all of a function's arguments that are\n        // functions themselves.\n        while (i--)\n          args[i] = deep ? self.wrap(options, arguments[i]) : arguments[i];\n\n        try {\n          // Attempt to invoke user-land function\n          // NOTE: If you are a Sentry user, and you are seeing this stack frame, it\n          //       means Raven caught an error invoking your application code. This is\n          //       expected behavior and NOT indicative of a bug with Raven.js.\n          return func.apply(this, args);\n        } catch (e) {\n          self._ignoreNextOnError();\n          self.captureException(e, options);\n          throw e;\n        }\n      },\n    };\n\n    // copy over properties of the old function\n    for (var property in func) {\n      if (hasKey(func, property)) {\n        ravenWrapped[property] = func[property];\n      }\n    }\n    ravenWrapped.prototype = func.prototype;\n\n    func.__raven_wrapper__ = ravenWrapped;\n    // Signal that this function has been wrapped already\n    // for both debugging and to prevent it to being wrapped twice\n    ravenWrapped.__raven__ = true;\n    ravenWrapped.__inner__ = func;\n\n    return ravenWrapped;\n  },\n\n  /*\n   * Uninstalls the global error handler.\n   *\n   * @return {Raven}\n   */\n  uninstall: function () {\n    TraceKit.report.uninstall();\n\n    this._restoreBuiltIns();\n\n    Error.stackTraceLimit = this._originalErrorStackTraceLimit;\n    this._isRavenInstalled = false;\n\n    return this;\n  },\n\n  /**\n   * Custom method created for our (HubSpot's) version of raven for submitting\n   * custom events to LogFetch for purpose of tracking non-error events.\n   *\n   * @param {*} eventName The name of the event to be tracked\n   * @param {*} extraData Data to be sent along with the event\n   */\n  capturePageEvent: function (eventName, options = {}) {\n    // delete error cause props if they exist.\n    this._clearExtraAttribute('errorCauseMessage');\n    this._clearExtraAttribute('errorCauseStackFrames');\n\n    const data = {\n      message: eventName,\n      ...options,\n      level: 'info',\n      isPageEvent: true,\n    };\n\n    this._send(data);\n\n    return this;\n  },\n\n  /*\n   * Manually capture an exception and send it over to Sentry\n   *\n   * @param {error} ex An exception to be logged\n   * @param {object} options A specific set of options for this error [optional]\n   * @return {Raven}\n   */\n  captureException: function (ex, options) {\n    // delete previous exception's cause if they exist.\n    var self = this;\n\n    if (!self) {\n      console.error(\n        'Error: captureException was called without Raven instance. This error will not be sent.\\nSee https://product.hubteam.com/docs/observability/docs/errors/raven-usage.html#context for more information.'\n      );\n      return this;\n    }\n    self._clearExtraAttribute('errorCauseMessage');\n    self._clearExtraAttribute('errorCauseStackFrames');\n\n    // Cases for sending ex as a message, rather than an exception\n    var isNotError = !isError(ex);\n    var isNotErrorEvent = !isErrorEvent(ex);\n    var isErrorEventWithoutError = isErrorEvent(ex) && !ex.error;\n\n    if ((isNotError && isNotErrorEvent) || isErrorEventWithoutError) {\n      return this.captureMessage(\n        ex,\n        objectMerge(\n          {\n            trimHeadFrames: 1,\n            stacktrace: true, // if we fall back to captureMessage, default to attempting a new trace\n          },\n          options\n        )\n      );\n    }\n\n    // Get actual Error from ErrorEvent\n    if (isErrorEvent(ex)) ex = ex.error;\n\n    var errorCause = ex.cause;\n    if (errorCause) {\n      self._processErrorCause(errorCause);\n    }\n\n    // Capture extraData if it's set on the Error\n    if (ex.extraData) {\n      self.setExtraContext({ ...ex.extraData });\n    }\n\n    // Detect and enhance CHIRP errors\n    if (\n      this._globalOptions.chirpErrorEnhancement.enabled &&\n      this._isChirpError(ex)\n    ) {\n      this._enhanceChirpError(ex);\n    }\n\n    // Store the raw exception object for potential debugging and introspection\n    this._lastCapturedException = ex;\n\n    // TraceKit.report will re-raise any exception passed to it,\n    // which means you have to wrap it in try/catch. Instead, we\n    // can wrap it here and only re-raise if TraceKit.report\n    // raises an exception different from the one we asked to\n    // report on.\n    try {\n      var stack = TraceKit.computeStackTrace(ex);\n      this._handleStackInfo(stack, options);\n    } catch (ex1) {\n      if (ex !== ex1) {\n        throw ex1;\n      }\n    }\n\n    return this;\n  },\n\n  /*\n   * Manually send a message to Sentry\n   *\n   * @param {string} msg A plain message to be captured in Sentry\n   * @param {object} options A specific set of options for this message [optional]\n   * @return {Raven}\n   */\n  captureMessage: function (msg, options) {\n    var self = this;\n    self._clearExtraAttribute('errorCauseMessage');\n    self._clearExtraAttribute('errorCauseStackFrames');\n\n    // config() automagically converts ignoreErrors from a list to a RegExp so we need to test for an\n    // early call; we'll error on the side of logging anything called before configuration since it's\n    // probably something you should see:\n    if (\n      !!this._globalOptions.ignoreErrors.test &&\n      this._globalOptions.ignoreErrors.test(msg)\n    ) {\n      this._triggerEvent('captureIgnored', {\n        level: (options && options.level) || 'error',\n      });\n      return;\n    }\n\n    options = options || {};\n\n    var data = objectMerge(\n      {\n        message: msg + '', // Make sure it's actually a string\n      },\n      options\n    );\n\n    var ex;\n    // Generate a \"synthetic\" stack trace from this point.\n    // NOTE: If you are a Sentry user, and you are seeing this stack frame, it is NOT indicative\n    //       of a bug with Raven.js. Sentry generates synthetic traces either by configuration,\n    //       or if it catches a thrown object without a \"stack\" property.\n    try {\n      throw new Error(msg);\n    } catch (ex1) {\n      ex = ex1;\n    }\n\n    // null exception name so `Error` isn't prefixed to msg\n    ex.name = null;\n    var stack = TraceKit.computeStackTrace(ex);\n\n    // stack[0] is `throw new Error(msg)` call itself, we are interested in the frame that was just before that, stack[1]\n    var initialCall = stack.stack[1];\n\n    var fileurl = (initialCall && initialCall.url) || '';\n\n    if (\n      !!this._globalOptions.ignoreUrls.test &&\n      this._globalOptions.ignoreUrls.test(fileurl)\n    ) {\n      return;\n    }\n\n    if (\n      !!this._globalOptions.whitelistUrls.test &&\n      !this._globalOptions.whitelistUrls.test(fileurl)\n    ) {\n      return;\n    }\n\n    if (this._globalOptions.stacktrace || (options && options.stacktrace)) {\n      options = {\n        // By default, fingerprint on msg, not stack trace\n        // (legacy behavior, could be revisited)\n        fingerprint: msg,\n        ...options,\n        // since we know this is a synthetic trace, the top N-most frames\n        // MUST be from Raven.js, so mark them as in_app later by setting\n        // trimHeadFrames\n        trimHeadFrames: (options.trimHeadFrames || 0) + 1,\n      };\n\n      var frames = this._prepareFrames(stack, options);\n      data.stacktrace = {\n        // Sentry expects frames oldest to newest\n        frames: frames.reverse(),\n      };\n    }\n\n    // Fire away!\n    this._send(data);\n\n    return this;\n  },\n\n  captureBreadcrumb: function (obj) {\n    var crumb = objectMerge(\n      {\n        timestamp: now() / 1000,\n      },\n      obj\n    );\n\n    if (isFunction(this._globalOptions.breadcrumbCallback)) {\n      var result = this._globalOptions.breadcrumbCallback(crumb);\n\n      if (isObject(result) && !isEmptyObject(result)) {\n        crumb = result;\n      } else if (result === false) {\n        return this;\n      }\n    }\n\n    this._breadcrumbs.push(crumb);\n    if (this._breadcrumbs.length > this._globalOptions.maxBreadcrumbs) {\n      this._breadcrumbs.shift();\n    }\n    return this;\n  },\n\n  addPlugin: function (plugin /*arg1, arg2, ... argN*/) {\n    var pluginArgs = [].slice.call(arguments, 1);\n\n    this._plugins.push([plugin, pluginArgs]);\n    if (this._isRavenInstalled) {\n      this._drainPlugins();\n    }\n\n    return this;\n  },\n\n  /*\n   * Set/clear a user to be sent along with the payload.\n   *\n   * @param {object} user An object representing user data [optional]\n   * @return {Raven}\n   */\n  setUserContext: function (user) {\n    // Intentionally do not merge here since that's an unexpected behavior.\n    this._globalContext.user = user;\n\n    return this;\n  },\n\n  /*\n   * Merge extra attributes to be sent along with the payload.\n   *\n   * @param {object} extra An object representing extra data [optional]\n   * @return {Raven}\n   */\n  setExtraContext: function (extra) {\n    this._mergeContext('extra', extra);\n\n    return this;\n  },\n\n  /*\n   * Merge tags to be sent along with the payload.\n   *\n   * @param {object} tags An object representing tags [optional]\n   * @return {Raven}\n   */\n  setTagsContext: function (tags) {\n    this._mergeContext('tags', tags);\n\n    return this;\n  },\n\n  /*\n   * Clear all of the context.\n   *\n   * @return {Raven}\n   */\n  clearContext: function () {\n    this._globalContext = {};\n\n    return this;\n  },\n\n  /*\n   * Get a copy of the current context. This cannot be mutated.\n   *\n   * @return {object} copy of context\n   */\n  getContext: function () {\n    // lol javascript\n    return JSON.parse(stringify(this._globalContext));\n  },\n\n  /*\n   * Set environment of application\n   *\n   * @param {string} environment Typically something like 'production'.\n   * @return {Raven}\n   */\n  setEnvironment: function (environment) {\n    this._globalOptions.environment = environment;\n\n    return this;\n  },\n\n  /*\n   * Set release version of application\n   *\n   * @param {string} release Typically something like a git SHA to identify version\n   * @return {Raven}\n   */\n  setRelease: function (release) {\n    this._globalOptions.release = release;\n\n    return this;\n  },\n\n  /*\n   * Set the dataCallback option\n   *\n   * @param {function} callback The callback to run which allows the\n   *                            data blob to be mutated before sending\n   * @return {Raven}\n   */\n  setDataCallback: function (callback) {\n    var original = this._globalOptions.dataCallback;\n    this._globalOptions.dataCallback = keepOriginalCallback(original, callback);\n    return this;\n  },\n\n  /*\n   * Set the breadcrumbCallback option\n   *\n   * @param {function} callback The callback to run which allows filtering\n   *                            or mutating breadcrumbs\n   * @return {Raven}\n   */\n  setBreadcrumbCallback: function (callback) {\n    var original = this._globalOptions.breadcrumbCallback;\n    this._globalOptions.breadcrumbCallback = keepOriginalCallback(\n      original,\n      callback\n    );\n    return this;\n  },\n\n  /*\n   * Set the shouldSendCallback option\n   *\n   * @param {function} callback The callback to run which allows\n   *                            introspecting the blob before sending\n   * @return {Raven}\n   */\n  setShouldSendCallback: function (callback) {\n    var original = this._globalOptions.shouldSendCallback;\n    this._globalOptions.shouldSendCallback = keepOriginalCallback(\n      original,\n      callback\n    );\n    return this;\n  },\n\n  /**\n   * Override the default HTTP transport mechanism that transmits data\n   * to the Sentry server.\n   *\n   * @param {function} transport Function invoked instead of the default\n   *                             `makeRequest` handler.\n   *\n   * @return {Raven}\n   */\n  setTransport: function (transport) {\n    this._globalOptions.transport = transport;\n\n    return this;\n  },\n\n  /*\n   * Get the latest raw exception that was captured by Raven.\n   *\n   * @return {error}\n   */\n  lastException: function () {\n    return this._lastCapturedException;\n  },\n\n  /*\n   * Get the last event id\n   *\n   * @return {string}\n   */\n  lastEventId: function () {\n    return this._lastEventId;\n  },\n\n  /*\n   * Determine if Raven is setup and ready to go.\n   *\n   * @return {boolean}\n   */\n  isSetup: function () {\n    if (!this._hasJSON) return false; // needs JSON support\n    if (!this._globalServer) {\n      if (!this.ravenNotConfiguredError) {\n        this.ravenNotConfiguredError = true;\n      }\n      this._logDebug('error', 'Error: Raven has not been configured.');\n\n      return false;\n    }\n    return true;\n  },\n\n  afterLoad: function () {\n    // TODO: remove window dependence?\n\n    // Attempt to initialize Raven on load\n    var RavenConfig = _window.RavenConfig;\n    if (RavenConfig) {\n      this.config(RavenConfig.dsn, RavenConfig.config).install();\n    }\n  },\n\n  showReportDialog: function (options) {\n    if (\n      !_document // doesn't work without a document (React native)\n    )\n      return;\n\n    options = options || {};\n\n    var lastEventId = options.eventId || this.lastEventId();\n    if (!lastEventId) {\n      throw new RavenConfigError('Missing eventId');\n    }\n\n    var dsn = options.dsn || this._dsn;\n    if (!dsn) {\n      throw new RavenConfigError('Missing DSN');\n    }\n\n    var encode = encodeURIComponent;\n    var qs = '';\n    qs += '?eventId=' + encode(lastEventId);\n    qs += '&dsn=' + encode(dsn);\n\n    var user = options.user || this._globalContext.user;\n    if (user) {\n      if (user.name) qs += '&name=' + encode(user.name);\n      if (user.email) qs += '&email=' + encode(user.email);\n    }\n\n    var globalServer = this._getGlobalServer(this._parseDSN(dsn));\n\n    var script = _document.createElement('script');\n    script.async = true;\n    script.src = globalServer + '/api/embed/error-page/' + qs;\n    (_document.head || _document.body).appendChild(script);\n  },\n\n  /**** Private functions ****/\n  _processErrorCause: function (errorCause) {\n    try {\n      var self = this;\n      var errorCauseStack = TraceKit.computeStackTrace(errorCause);\n      var errorCauseStackFrames = this._prepareFrames(errorCauseStack, {}).map(\n        (stackFrame) => {\n          return {\n            file: stackFrame.filename,\n            methodName: stackFrame.function || '?',\n            lineNumber: stackFrame.lineno,\n            column: stackFrame.colno,\n          };\n        }\n      );\n\n      if (errorCauseStack.message) {\n        self.setExtraContext({\n          errorCauseMessage: errorCauseStack.message,\n        });\n      }\n\n      if (errorCauseStackFrames && errorCauseStackFrames.length) {\n        self.setExtraContext({\n          errorCauseStackFrames: JSON.stringify(errorCauseStackFrames),\n        });\n      }\n    } catch (ex1) {\n      if (errorCause !== ex1) {\n        throw ex1;\n      }\n    }\n  },\n\n  /**** CHIRP Error Enhancement Methods ****/\n\n  _isChirpError: function (error) {\n    if (!error) return false;\n\n    // Check for CHIRP error patterns:\n    // - Message contains \"CHIRP RPC failed\"\n    // - Has the nested error.cause.cause structure\n    // - Contains ChirpError or ChirpInternalError instances\n    return (\n      (error.message &&\n        error.message.includes &&\n        error.message.includes('CHIRP RPC failed')) ||\n      this._hasChirpErrorStructure(error) ||\n      this._containsChirpErrorInstance(error)\n    );\n  },\n\n  _hasChirpErrorStructure: function (error) {\n    return !!(error.cause && error.cause.cause);\n  },\n\n  _containsChirpErrorInstance: function (error) {\n    const deepError = error.cause && error.cause.cause;\n    return !!(\n      (\n        deepError &&\n        ((deepError.constructor &&\n          deepError.constructor.name === 'ChirpError') ||\n          (deepError.constructor &&\n            deepError.constructor.name === 'ChirpInternalError') ||\n          !!deepError.type)\n      ) // CHIRP errors often have a 'type' property\n    );\n  },\n\n  _enhanceChirpError: function (error) {\n    // Skip enhancement if error is not an Error object\n    if (!isError(error)) {\n      return;\n    }\n\n    const chirpContext = this._extractChirpContext(error);\n\n    if (chirpContext) {\n      // Automatically add structured CHIRP metadata\n      this.setExtraContext({\n        // Service identification\n        chirpServiceName: chirpContext.serviceName,\n        chirpMethodName: chirpContext.methodName,\n        chirpErrorType: chirpContext.errorType,\n\n        // Error details\n        chirpUserDefinedError: chirpContext.userDefinedError,\n        chirpInternalErrorType: chirpContext.internalErrorType,\n        chirpOriginalMessage: chirpContext.originalMessage,\n\n        // Call context\n        chirpCallStack: chirpContext.callStack,\n        chirpRequestInfo: chirpContext.requestInfo,\n      });\n\n      // Enhance the error message for better visibility\n      if (this._globalOptions.chirpErrorEnhancement.enhanceErrorMessages) {\n        try {\n          error.message = this._formatEnhancedChirpMessage(\n            error.message,\n            chirpContext\n          );\n        } catch (e) {\n          // If we can't modify the message property (e.g., it's read-only), skip enhancement\n          this._logDebug('warn', 'Failed to enhance CHIRP error message:', e);\n        }\n      }\n    }\n  },\n\n  _extractChirpContext: function (error) {\n    const context = {};\n\n    try {\n      // Extract service/method from message pattern\n      if (error.message) {\n        const messageMatch = error.message.match(/CHIRP RPC failed for (\\w+)/);\n        if (messageMatch) {\n          context.methodName = messageMatch[1];\n        }\n      }\n\n      // Navigate the error structure with depth limit\n      let currentError = error;\n      let depth = 0;\n      const maxDepth =\n        this._globalOptions.chirpErrorEnhancement.maxNestingDepth;\n\n      while (currentError && depth < maxDepth) {\n        if (currentError.cause) {\n          currentError = currentError.cause;\n          depth++;\n        } else {\n          break;\n        }\n      }\n\n      // Extract from the deepest error found\n      const deepError = currentError;\n\n      // Always try to extract service name from stack trace or error properties\n      context.serviceName = this._extractServiceName(error, deepError);\n\n      if (deepError && deepError !== error) {\n        context.errorType = deepError.type || 'UNKNOWN';\n        context.originalMessage =\n          deepError.chirpErrorMessage || deepError.message;\n\n        // Determine if it's user-defined or internal error\n        if (\n          (deepError.constructor &&\n            deepError.constructor.name === 'ChirpError') ||\n          deepError.type === 'userDefinedError'\n        ) {\n          context.userDefinedError = deepError;\n          context.errorType = 'USER_DEFINED';\n        } else if (\n          (deepError.constructor &&\n            deepError.constructor.name === 'ChirpInternalError') ||\n          deepError.type === 'internalError'\n        ) {\n          context.internalErrorType =\n            deepError.type ||\n            (deepError.internalError && deepError.internalError.type);\n          context.errorType = 'INTERNAL_ERROR';\n        }\n\n        // Include call stack if enabled\n        if (this._globalOptions.chirpErrorEnhancement.includeCallStack) {\n          context.callStack = error.stack;\n        }\n      }\n    } catch (e) {\n      // If context extraction fails, don't break the error reporting\n      this._logDebug('warn', 'Failed to extract CHIRP context:', e);\n    }\n\n    return context;\n  },\n\n  _extractServiceName: function (error, deepError) {\n    try {\n      // Try multiple sources for service name\n\n      // 1. From stack trace URLs\n      const stack = error.stack || (error.cause && error.cause.stack);\n      if (stack) {\n        const serviceMatch = stack.match(/\\/chirp\\/([^\\/]+)\\//);\n        if (serviceMatch) return serviceMatch[1];\n      }\n\n      // 2. From error properties\n      if (deepError.serviceName) return deepError.serviceName;\n      if (deepError.service) return deepError.service;\n\n      return 'UNKNOWN_SERVICE';\n    } catch (e) {\n      return 'UNKNOWN_SERVICE';\n    }\n  },\n\n  _formatEnhancedChirpMessage: function (originalMessage, context) {\n    let enhanced = originalMessage;\n\n    if (context.serviceName && context.serviceName !== 'UNKNOWN_SERVICE') {\n      enhanced += ' [Service: ' + context.serviceName + ']';\n    }\n\n    if (context.methodName) {\n      enhanced += ' [Method: ' + context.methodName + ']';\n    }\n\n    if (context.errorType && context.errorType !== 'UNKNOWN') {\n      enhanced += ' [Type: ' + context.errorType + ']';\n    }\n\n    if (\n      context.originalMessage &&\n      context.originalMessage !== originalMessage\n    ) {\n      enhanced += ' [Details: ' + context.originalMessage + ']';\n    }\n\n    return enhanced;\n  },\n\n  _clearExtraAttribute: function (key) {\n    var self = this;\n    if (!isUndefined(self._globalContext.extra)) {\n      delete self._globalContext.extra[key];\n    }\n  },\n\n  _ignoreNextOnError: function () {\n    var self = this;\n    this._ignoreOnError += 1;\n    setTimeout(function () {\n      // onerror should trigger before setTimeout\n      self._ignoreOnError -= 1;\n    });\n  },\n\n  _triggerEvent: function (eventType, options) {\n    // NOTE: `event` is a native browser thing, so let's avoid conflicting wiht it\n    var evt, key;\n\n    if (!this._hasDocument) return;\n\n    options = options || {};\n\n    eventType =\n      'raven' + eventType.substr(0, 1).toUpperCase() + eventType.substr(1);\n\n    if (_document.createEvent) {\n      evt = _document.createEvent('HTMLEvents');\n      evt.initEvent(eventType, true, true);\n    } else {\n      evt = _document.createEventObject();\n      evt.eventType = eventType;\n    }\n\n    for (key in options)\n      if (hasKey(options, key)) {\n        evt[key] = options[key];\n      }\n\n    if (_document.createEvent) {\n      // IE9 if standards\n      _document.dispatchEvent(evt);\n    } else {\n      // IE8 regardless of Quirks or Standards\n      // IE9 if quirks\n      try {\n        _document.fireEvent('on' + evt.eventType.toLowerCase(), evt);\n      } catch (e) {\n        // Do nothing\n      }\n    }\n  },\n\n  /**\n   * Wraps addEventListener to capture UI breadcrumbs\n   * @param evtName the event name (e.g. \"click\")\n   * @returns {Function}\n   * @private\n   */\n  _breadcrumbEventHandler: function (evtName) {\n    var self = this;\n    return function (evt) {\n      // reset keypress timeout; e.g. triggering a 'click' after\n      // a 'keypress' will reset the keypress debounce so that a new\n      // set of keypresses can be recorded\n      self._keypressTimeout = null;\n\n      // It's possible this handler might trigger multiple times for the same\n      // event (e.g. event propagation through node ancestors). Ignore if we've\n      // already captured the event.\n      if (self._lastCapturedEvent === evt) return;\n\n      self._lastCapturedEvent = evt;\n\n      // try/catch both:\n      // - accessing evt.target (see getsentry/raven-js#838, #768)\n      // - `htmlTreeAsString` because it's complex, and just accessing the DOM incorrectly\n      //   can throw an exception in some circumstances.\n      var target;\n      try {\n        target = htmlTreeAsString(evt.target);\n      } catch (e) {\n        target = '<unknown>';\n      }\n\n      self.captureBreadcrumb({\n        category: 'ui.' + evtName, // e.g. ui.click, ui.input\n        message: target,\n      });\n    };\n  },\n\n  /**\n   * Wraps addEventListener to capture keypress UI events\n   * @returns {Function}\n   * @private\n   */\n  _keypressEventHandler: function () {\n    var self = this,\n      debounceDuration = 1000; // milliseconds\n\n    // TODO: if somehow user switches keypress target before\n    //       debounce timeout is triggered, we will only capture\n    //       a single breadcrumb from the FIRST target (acceptable?)\n    return function (evt) {\n      var target;\n      try {\n        target = evt.target;\n      } catch (e) {\n        // just accessing event properties can throw an exception in some rare circumstances\n        // see: https://github.com/getsentry/raven-js/issues/838\n        return;\n      }\n      var tagName = target && target.tagName;\n\n      // only consider keypress events on actual input elements\n      // this will disregard keypresses targeting body (e.g. tabbing\n      // through elements, hotkeys, etc)\n      if (\n        !tagName ||\n        (tagName !== 'INPUT' &&\n          tagName !== 'TEXTAREA' &&\n          !target.isContentEditable)\n      )\n        return;\n\n      // record first keypress in a series, but ignore subsequent\n      // keypresses until debounce clears\n      var timeout = self._keypressTimeout;\n      if (!timeout) {\n        self._breadcrumbEventHandler('input')(evt);\n      }\n      clearTimeout(timeout);\n      self._keypressTimeout = setTimeout(function () {\n        self._keypressTimeout = null;\n      }, debounceDuration);\n    };\n  },\n\n  /**\n   * Captures a breadcrumb of type \"navigation\", normalizing input URLs\n   * @param to the originating URL\n   * @param from the target URL\n   * @private\n   */\n  _captureUrlChange: function (from, to) {\n    var parsedLoc = parseUrl(this._location.href);\n    var parsedTo = parseUrl(to);\n    var parsedFrom = parseUrl(from);\n\n    // because onpopstate only tells you the \"new\" (to) value of location.href, and\n    // not the previous (from) value, we need to track the value of the current URL\n    // state ourselves\n    this._lastHref = to;\n\n    // Use only the path component of the URL if the URL matches the current\n    // document (almost all the time when using pushState)\n    if (\n      parsedLoc.protocol === parsedTo.protocol &&\n      parsedLoc.host === parsedTo.host\n    )\n      to = parsedTo.relative;\n    if (\n      parsedLoc.protocol === parsedFrom.protocol &&\n      parsedLoc.host === parsedFrom.host\n    )\n      from = parsedFrom.relative;\n\n    this.captureBreadcrumb({\n      category: 'navigation',\n      data: {\n        to: redactSensitiveUrlParams(to),\n        from: redactSensitiveUrlParams(from),\n      },\n    });\n  },\n\n  /**\n   * Wrap timer functions and event targets to catch errors and provide\n   * better metadata.\n   */\n  _instrumentTryCatch: function () {\n    var self = this;\n\n    var wrappedBuiltIns = self._wrappedBuiltIns;\n\n    function wrapTimeFn(orig) {\n      return function (fn, t) {\n        // preserve arity\n        // Make a copy of the arguments to prevent deoptimization\n        // https://github.com/petkaantonov/bluebird/wiki/Optimization-killers#32-leaking-arguments\n        var args = new Array(arguments.length);\n        for (var i = 0; i < args.length; ++i) {\n          args[i] = arguments[i];\n        }\n        var originalCallback = args[0];\n        if (isFunction(originalCallback)) {\n          args[0] = self.wrap(originalCallback);\n        }\n\n        // IE < 9 doesn't support .call/.apply on setInterval/setTimeout, but it\n        // also supports only two arguments and doesn't care what this is, so we\n        // can just call the original function directly.\n        if (orig.apply) {\n          return orig.apply(this, args);\n        } else {\n          return orig(args[0], args[1]);\n        }\n      };\n    }\n\n    var autoBreadcrumbs = this._globalOptions.autoBreadcrumbs;\n\n    function wrapEventTarget(global) {\n      var proto = _window[global] && _window[global].prototype;\n      if (\n        proto &&\n        proto.hasOwnProperty &&\n        proto.hasOwnProperty('addEventListener')\n      ) {\n        fill(\n          proto,\n          'addEventListener',\n          function (orig) {\n            return function (evtName, fn, capture, secure) {\n              // preserve arity\n              try {\n                if (fn && fn.handleEvent) {\n                  fn.handleEvent = self.wrap(fn.handleEvent);\n                }\n              } catch (err) {\n                // can sometimes get 'Permission denied to access property \"handle Event'\n              }\n\n              // More breadcrumb DOM capture ... done here and not in `_instrumentBreadcrumbs`\n              // so that we don't have more than one wrapper function\n              var before, clickHandler, keypressHandler;\n\n              if (\n                autoBreadcrumbs &&\n                autoBreadcrumbs.dom &&\n                (global === 'EventTarget' || global === 'Node')\n              ) {\n                // NOTE: generating multiple handlers per addEventListener invocation, should\n                //       revisit and verify we can just use one (almost certainly)\n                clickHandler = self._breadcrumbEventHandler('click');\n                keypressHandler = self._keypressEventHandler();\n                before = function (evt) {\n                  // need to intercept every DOM event in `before` argument, in case that\n                  // same wrapped method is re-used for different events (e.g. mousemove THEN click)\n                  // see #724\n                  if (!evt) return;\n\n                  var eventType;\n                  try {\n                    eventType = evt.type;\n                  } catch (e) {\n                    // just accessing event properties can throw an exception in some rare circumstances\n                    // see: https://github.com/getsentry/raven-js/issues/838\n                    return;\n                  }\n                  if (eventType === 'click') return clickHandler(evt);\n                  else if (eventType === 'keypress')\n                    return keypressHandler(evt);\n                };\n              }\n              return orig.call(\n                this,\n                evtName,\n                self.wrap(fn, undefined, before),\n                capture,\n                secure\n              );\n            };\n          },\n          wrappedBuiltIns\n        );\n        fill(\n          proto,\n          'removeEventListener',\n          function (orig) {\n            return function (evt, fn, capture, secure) {\n              try {\n                fn = fn && (fn.__raven_wrapper__ ? fn.__raven_wrapper__ : fn);\n              } catch (e) {\n                // ignore, accessing __raven_wrapper__ will throw in some Selenium environments\n              }\n              return orig.call(this, evt, fn, capture, secure);\n            };\n          },\n          wrappedBuiltIns\n        );\n      }\n    }\n\n    fill(_window, 'setTimeout', wrapTimeFn, wrappedBuiltIns);\n    fill(_window, 'setInterval', wrapTimeFn, wrappedBuiltIns);\n    if (_window.requestAnimationFrame) {\n      fill(\n        _window,\n        'requestAnimationFrame',\n        function (orig) {\n          return function (cb) {\n            return orig(self.wrap(cb));\n          };\n        },\n        wrappedBuiltIns\n      );\n    }\n\n    // event targets borrowed from bugsnag-js:\n    // https://github.com/bugsnag/bugsnag-js/blob/master/src/bugsnag.js#L666\n    var eventTargets = [\n      'EventTarget',\n      'Window',\n      'Node',\n      'ApplicationCache',\n      'AudioTrackList',\n      'ChannelMergerNode',\n      'CryptoOperation',\n      'EventSource',\n      'FileReader',\n      'HTMLUnknownElement',\n      'IDBDatabase',\n      'IDBRequest',\n      'IDBTransaction',\n      'KeyOperation',\n      'MediaController',\n      'MessagePort',\n      'ModalWindow',\n      'Notification',\n      'SVGElementInstance',\n      'Screen',\n      'TextTrack',\n      'TextTrackCue',\n      'TextTrackList',\n      'WebSocket',\n      'WebSocketWorker',\n      'Worker',\n      'XMLHttpRequest',\n      'XMLHttpRequestEventTarget',\n      'XMLHttpRequestUpload',\n    ];\n    for (var i = 0; i < eventTargets.length; i++) {\n      wrapEventTarget(eventTargets[i]);\n    }\n  },\n\n  /**\n   * Instrument browser built-ins w/ breadcrumb capturing\n   *  - XMLHttpRequests\n   *  - DOM interactions (click/typing)\n   *  - window.location changes\n   *  - console\n   *\n   * Can be disabled or individually configured via the `autoBreadcrumbs` config option\n   */\n  _instrumentBreadcrumbs: function () {\n    var self = this;\n    var autoBreadcrumbs = this._globalOptions.autoBreadcrumbs;\n\n    var wrappedBuiltIns = self._wrappedBuiltIns;\n\n    function wrapProp(prop, xhr) {\n      if (prop in xhr && isFunction(xhr[prop])) {\n        fill(xhr, prop, function (orig) {\n          return self.wrap(orig);\n        }); // intentionally don't track filled methods on XHR instances\n      }\n    }\n\n    if (autoBreadcrumbs.xhr && 'XMLHttpRequest' in _window) {\n      var xhrproto = XMLHttpRequest.prototype;\n      fill(\n        xhrproto,\n        'open',\n        function (origOpen) {\n          return function (method, url) {\n            // preserve arity\n\n            // if Sentry key appears in URL, don't capture\n            if (\n              isString(url) &&\n              (!self._globalKey || url.indexOf(self._globalKey) === -1)\n            ) {\n              this.__raven_xhr = {\n                method: method,\n                url: url,\n                status_code: null,\n              };\n            }\n\n            return origOpen.apply(this, arguments);\n          };\n        },\n        wrappedBuiltIns\n      );\n\n      fill(\n        xhrproto,\n        'send',\n        function (origSend) {\n          return function (data) {\n            // preserve arity\n            var xhr = this;\n\n            function onreadystatechangeHandler() {\n              if (xhr.__raven_xhr && xhr.readyState === 4) {\n                try {\n                  // touching statusCode in some platforms throws\n                  // an exception\n                  xhr.__raven_xhr.status_code = xhr.status;\n                  const correlationId = getCorrelationIdFromXHR(xhr);\n\n                  if (correlationId) {\n                    xhr.__raven_xhr.correlationId = correlationId;\n                  }\n                } catch (e) {\n                  /* do nothing */\n                }\n\n                self.captureBreadcrumb({\n                  type: 'http',\n                  category: 'xhr',\n                  data: xhr.__raven_xhr,\n                });\n              }\n            }\n\n            var props = ['onload', 'onerror', 'onprogress'];\n            for (var j = 0; j < props.length; j++) {\n              wrapProp(props[j], xhr);\n            }\n\n            if (\n              'onreadystatechange' in xhr &&\n              isFunction(xhr.onreadystatechange)\n            ) {\n              fill(\n                xhr,\n                'onreadystatechange',\n                function (orig) {\n                  return self.wrap(orig, undefined, onreadystatechangeHandler);\n                } /* intentionally don't track this instrumentation */\n              );\n            } else {\n              // if onreadystatechange wasn't actually set by the page on this xhr, we\n              // are free to set our own and capture the breadcrumb\n              xhr.onreadystatechange = onreadystatechangeHandler;\n            }\n\n            return origSend.apply(this, arguments);\n          };\n        },\n        wrappedBuiltIns\n      );\n    }\n\n    if (autoBreadcrumbs.xhr && 'fetch' in _window) {\n      fill(\n        _window,\n        'fetch',\n        function (origFetch) {\n          // We keep this function name unminified and look for it in the stack trace\n          // in _prepareFrames so we can mark fetch wrapper frames as in_app: false\n          const { ravenFetchWrapper } = {\n            ['raven' + 'FetchWrapper']: function (fn, t) {\n              // preserve arity\n              // Make a copy of the arguments to prevent deoptimization\n              // https://github.com/petkaantonov/bluebird/wiki/Optimization-killers#32-leaking-arguments\n              var args = new Array(arguments.length);\n              for (var i = 0; i < args.length; ++i) {\n                args[i] = arguments[i];\n              }\n\n              var fetchInput = args[0];\n              var method = 'GET';\n              var url;\n\n              if (typeof fetchInput === 'string') {\n                url = fetchInput;\n              } else if (\n                'Request' in _window &&\n                fetchInput instanceof _window.Request\n              ) {\n                url = fetchInput.url;\n                if (fetchInput.method) {\n                  method = fetchInput.method;\n                }\n              } else {\n                url = '' + fetchInput;\n              }\n\n              if (args[1] && args[1].method) {\n                method = args[1].method;\n              }\n\n              var fetchData = {\n                method: method,\n                url: url,\n                status_code: null,\n              };\n\n              self.captureBreadcrumb({\n                type: 'http',\n                category: 'fetch',\n                data: fetchData,\n              });\n\n              return origFetch.apply(this, args).then(function (response) {\n                fetchData.status_code = response.status;\n\n                const correlationId = getCorrelationIdFromResponse(response);\n\n                if (correlationId) {\n                  fetchData.correlationId = correlationId;\n                }\n\n                return response;\n              });\n            },\n          };\n          return ravenFetchWrapper;\n        },\n        wrappedBuiltIns\n      );\n    }\n\n    // Capture breadcrumbs from any click that is unhandled / bubbled up all the way\n    // to the document. Do this before we instrument addEventListener.\n    if (autoBreadcrumbs.dom && this._hasDocument) {\n      if (_document.addEventListener) {\n        _document.addEventListener(\n          'click',\n          self._breadcrumbEventHandler('click'),\n          false\n        );\n        _document.addEventListener(\n          'keypress',\n          self._keypressEventHandler(),\n          false\n        );\n      } else {\n        // IE8 Compatibility\n        _document.attachEvent('onclick', self._breadcrumbEventHandler('click'));\n        _document.attachEvent('onkeypress', self._keypressEventHandler());\n      }\n    }\n\n    // record navigation (URL) changes\n    // NOTE: in Chrome App environment, touching history.pushState, *even inside\n    //       a try/catch block*, will cause Chrome to output an error to console.error\n    // borrowed from: https://github.com/angular/angular.js/pull/13945/files\n    var chrome = _window.chrome;\n    var isChromePackagedApp = chrome && chrome.app && chrome.app.runtime;\n    var hasPushAndReplaceState =\n      !isChromePackagedApp &&\n      _window.history &&\n      history.pushState &&\n      history.replaceState;\n    if (autoBreadcrumbs.location && hasPushAndReplaceState) {\n      // TODO: remove onpopstate handler on uninstall()\n      var oldOnPopState = _window.onpopstate;\n      _window.onpopstate = function () {\n        var currentHref = self._location.href;\n        self._captureUrlChange(self._lastHref, currentHref);\n\n        if (oldOnPopState) {\n          return oldOnPopState.apply(this, arguments);\n        }\n      };\n\n      var historyReplacementFunction = function (origHistFunction) {\n        // note history.pushState.length is 0; intentionally not declaring\n        // params to preserve 0 arity\n        return function (/* state, title, url */) {\n          var url = arguments.length > 2 ? arguments[2] : undefined;\n\n          // url argument is optional\n          if (url) {\n            // coerce to string (this is what pushState does)\n            self._captureUrlChange(self._lastHref, url + '');\n          }\n\n          return origHistFunction.apply(this, arguments);\n        };\n      };\n\n      fill(history, 'pushState', historyReplacementFunction, wrappedBuiltIns);\n      fill(\n        history,\n        'replaceState',\n        historyReplacementFunction,\n        wrappedBuiltIns\n      );\n    }\n\n    if (autoBreadcrumbs.console && 'console' in _window && console.log) {\n      // console\n      var consoleMethodCallback = function (msg, data) {\n        self.captureBreadcrumb({\n          message: msg,\n          level: data.level,\n          category: 'console',\n        });\n      };\n\n      each(['debug', 'info', 'warn', 'error', 'log'], function (_, level) {\n        wrapConsoleMethod(console, level, consoleMethodCallback);\n      });\n    }\n  },\n\n  _restoreBuiltIns: function () {\n    // restore any wrapped builtins\n    var builtin;\n    while (this._wrappedBuiltIns.length) {\n      builtin = this._wrappedBuiltIns.shift();\n\n      var obj = builtin[0],\n        name = builtin[1],\n        orig = builtin[2];\n\n      obj[name] = orig;\n    }\n  },\n\n  _drainPlugins: function () {\n    var self = this;\n\n    // FIX ME TODO\n    each(this._plugins, function (_, plugin) {\n      var installer = plugin[0];\n      var args = plugin[1];\n      installer.apply(self, [self].concat(args));\n    });\n  },\n\n  _parseDSN: function (str) {\n    var m = dsnPattern.exec(str),\n      dsn = {},\n      i = 7;\n\n    try {\n      while (i--) dsn[dsnKeys[i]] = m[i] || '';\n    } catch (e) {\n      throw new RavenConfigError('Invalid DSN: ' + str);\n    }\n\n    if (dsn.pass && !this._globalOptions.allowSecretKey) {\n      throw new RavenConfigError(\n        'Do not specify your secret key in the DSN. See: http://bit.ly/raven-secret-key'\n      );\n    }\n\n    return dsn;\n  },\n\n  _getGlobalServer: function (uri) {\n    // assemble the endpoint from the uri pieces\n    var host = uri.host;\n    var tags = this._globalContext.tags;\n    var hublet = (tags && tags['hublet']) || 'na1';\n    var env = this._globalOptions.environment || 'prod';\n\n    if (uri.host === 'exceptions.hubspot.com') {\n      var hubletSuffix = hublet === 'na1' ? '' : `-${hublet}`;\n      var envSuffix = env === 'prod' ? '' : `${env}`;\n\n      host = `exceptions${hubletSuffix}.hubspot${envSuffix}.com`;\n    }\n\n    var globalServer = '//' + host + (uri.port ? ':' + uri.port : '');\n\n    if (uri.protocol) {\n      globalServer = uri.protocol + ':' + globalServer;\n    }\n    return globalServer;\n  },\n\n  _handleOnErrorStackInfo: function () {\n    // if we are intentionally ignoring errors via onerror, bail out\n    if (!this._ignoreOnError) {\n      this._handleStackInfo.apply(this, arguments);\n    }\n  },\n\n  _handleStackInfo: function (stackInfo, options) {\n    var frames = this._prepareFrames(stackInfo, options);\n\n    this._triggerEvent('handle', {\n      stackInfo: stackInfo,\n      options: options,\n    });\n\n    this._processException(\n      stackInfo.name,\n      stackInfo.message,\n      stackInfo.url,\n      stackInfo.lineno,\n      frames,\n      options\n    );\n  },\n\n  _prepareFrames: function (stackInfo, options) {\n    var self = this;\n    var frames = [];\n    if (stackInfo.stack && stackInfo.stack.length) {\n      each(stackInfo.stack, function (i, stack) {\n        var frame = self._normalizeFrame(stack, stackInfo.url);\n        if (frame) {\n          frames.push(frame);\n        }\n      });\n\n      // e.g. frames captured via captureMessage throw\n      if (options && options.trimHeadFrames) {\n        for (var j = 0; j < options.trimHeadFrames && j < frames.length; j++) {\n          frames[j].in_app = false;\n        }\n      }\n\n      // Mark ravenWrapped and frames below it as not in_app\n      // so errors don't get reported to the Raven source route\n      if (frames.some((frame) => frame.function.includes('ravenWrapped'))) {\n        for (var k = frames.length - 1; k >= 0; k--) {\n          if (frames[k].function.includes('ravenWrapped')) {\n            frames[k].in_app = false;\n            break;\n          }\n          frames[k].in_app = false;\n        }\n      }\n      // Mark ravenFetchWrapper as not in_app so errors don't get reported to the Raven source route\n      for (var l = 0; l < frames.length; l++) {\n        if (frames[l].function.includes('ravenFetchWrapper')) {\n          frames[l].in_app = false;\n        }\n      }\n    }\n\n    frames = frames.slice(0, this._globalOptions.stackTraceLimit);\n    return frames;\n  },\n\n  _normalizeFrame: function (frame, stackInfoUrl) {\n    // normalize the frames data\n    var normalized = {\n      filename: frame.url,\n      lineno: frame.line,\n      colno: frame.column,\n      function: frame.func || '?',\n    };\n\n    // Case when we don't have any information about the error\n    // E.g. throwing a string or raw object, instead of an `Error` in Firefox\n    // Generating synthetic error doesn't add any value here\n    //\n    // We should probably somehow let a user know that they should fix their code\n    if (!frame.url) {\n      normalized.filename = stackInfoUrl; // fallback to whole stacks url from onerror handler\n    }\n\n    normalized.in_app = !(\n      // determine if an exception came from outside of our app\n      // first we check the global includePaths list.\n      (\n        (!!this._globalOptions.includePaths.test &&\n          !this._globalOptions.includePaths.test(normalized.filename)) ||\n        // Now we check for fun, if the function name is Raven or TraceKit\n        /(Raven|TraceKit)\\./.test(normalized['function'])\n      )\n    );\n\n    return normalized;\n  },\n\n  _processException: function (\n    type,\n    message,\n    fileurl,\n    lineno,\n    frames,\n    options\n  ) {\n    var prefixedMessage = (type ? type + ': ' : '') + (message || '');\n    let errorCause =\n      (this._lastCapturedException &&\n        this._lastCapturedException.cause &&\n        this._lastCapturedException.cause.message) ||\n      '';\n    if (\n      !!this._globalOptions.ignoreErrors.test &&\n      (this._globalOptions.ignoreErrors.test(message) ||\n        this._globalOptions.ignoreErrors.test(prefixedMessage) ||\n        this._globalOptions.ignoreErrors.test(errorCause))\n    ) {\n      this._triggerEvent('captureIgnored', {\n        level: (options && options.level) || 'error',\n      });\n      return;\n    }\n\n    var stacktrace;\n\n    if (frames && frames.length) {\n      fileurl = frames[0].filename || fileurl;\n      // Sentry expects frames oldest to newest\n      // and JS sends them as newest to oldest\n      frames.reverse();\n      stacktrace = { frames: frames };\n    } else if (fileurl) {\n      stacktrace = {\n        frames: [\n          {\n            filename: fileurl,\n            lineno: lineno,\n            in_app: true,\n          },\n        ],\n      };\n    }\n\n    if (\n      !!this._globalOptions.ignoreUrls.test &&\n      this._globalOptions.ignoreUrls.test(fileurl)\n    ) {\n      return;\n    }\n\n    if (\n      !!this._globalOptions.whitelistUrls.test &&\n      !this._globalOptions.whitelistUrls.test(fileurl)\n    ) {\n      return;\n    }\n\n    var data = objectMerge(\n      {\n        // sentry.interfaces.Exception\n        exception: {\n          values: [\n            {\n              type: type,\n              value: message,\n              stacktrace: stacktrace,\n            },\n          ],\n        },\n        culprit: fileurl,\n      },\n      options\n    );\n\n    // Fire away!\n    this._send(data);\n  },\n\n  _trimPacket: function (data) {\n    // For now, we only want to truncate the two different messages\n    // but this could/should be expanded to just trim everything\n    var max = this._globalOptions.maxMessageLength;\n    if (data.message) {\n      data.message = truncate(data.message, max);\n    }\n    if (data.exception) {\n      var exception = data.exception.values[0];\n      exception.value = truncate(exception.value, max);\n    }\n\n    var request = data.request;\n    if (request) {\n      if (request.url) {\n        request.url = redactSensitiveUrlParams(\n          truncate(request.url, this._globalOptions.maxUrlLength)\n        );\n      }\n      if (request.Referer) {\n        request.Referer = redactSensitiveUrlParams(\n          truncate(request.Referer, this._globalOptions.maxUrlLength)\n        );\n      }\n    }\n\n    return data;\n  },\n\n  _getHttpData: function () {\n    if (!this._hasNavigator && !this._hasDocument) return;\n    var httpData = {};\n\n    if (this._hasNavigator && _navigator.userAgent) {\n      httpData.headers = {\n        'User-Agent': navigator.userAgent,\n      };\n    }\n\n    if (this._hasDocument) {\n      if (_document.location && _document.location.href) {\n        httpData.url = redactSensitiveUrlParams(_document.location.href);\n      }\n      if (_document.referrer) {\n        if (!httpData.headers) httpData.headers = {};\n        httpData.headers.Referer = redactSensitiveUrlParams(_document.referrer);\n      }\n    }\n\n    return httpData;\n  },\n\n  _resetBackoff: function () {\n    this._backoffDuration = 0;\n    this._backoffStart = null;\n  },\n\n  _shouldBackoff: function () {\n    return (\n      this._backoffDuration &&\n      now() - this._backoffStart < this._backoffDuration\n    );\n  },\n\n  /**\n   * Returns true if the in-process data payload matches the signature\n   * of the previously-sent data\n   *\n   * NOTE: This has to be done at this level because TraceKit can generate\n   *       data from window.onerror WITHOUT an exception object (IE8, IE9,\n   *       other old browsers). This can take the form of an \"exception\"\n   *       data object with a single frame (derived from the onerror args).\n   */\n  _isRepeatData: function (current) {\n    // Page events should not be de-deduped\n    if (current.isPageEvent) {\n      return false;\n    }\n\n    var last = this._lastData;\n\n    if (\n      !last ||\n      current.message !== last.message || // defined for captureMessage\n      current.culprit !== last.culprit // defined for captureException/onerror\n    )\n      return false;\n\n    // Stacktrace interface (i.e. from captureMessage)\n    if (current.stacktrace || last.stacktrace) {\n      return isSameStacktrace(current.stacktrace, last.stacktrace);\n    } else if (current.exception || last.exception) {\n      // Exception interface (i.e. from captureException/onerror)\n      return isSameException(current.exception, last.exception);\n    }\n\n    return true;\n  },\n\n  _setBackoffState: function (request) {\n    // If we are already in a backoff state, don't change anything\n    if (this._shouldBackoff()) {\n      return;\n    }\n\n    var status = request.status;\n\n    // 400 - project_id doesn't exist or some other fatal\n    // 401 - invalid/revoked dsn\n    // 429 - too many requests\n    if (!(status === 400 || status === 401 || status === 429)) return;\n\n    var retry;\n    try {\n      // If Retry-After is not in Access-Control-Expose-Headers, most\n      // browsers will throw an exception trying to access it\n      retry = request.getResponseHeader('Retry-After');\n      retry = parseInt(retry, 10) * 1000; // Retry-After is returned in seconds\n    } catch (e) {\n      /* eslint no-empty:0 */\n    }\n\n    this._backoffDuration = retry\n      ? // If Sentry server returned a Retry-After value, use it\n        retry\n      : // Otherwise, double the last backoff duration (starts at 1 sec)\n        this._backoffDuration * 2 || 1000;\n\n    this._backoffStart = now();\n  },\n\n  _getRecentFailedNetworkRequest: function () {\n    if (this._breadcrumbs && this._breadcrumbs.length > 0) {\n      // Look through recent breadcrumbs (last 10) for failed network requests\n      var recentBreadcrumbs = this._breadcrumbs.slice(-10);\n\n      for (var i = recentBreadcrumbs.length - 1; i >= 0; i--) {\n        var breadcrumb = recentBreadcrumbs[i];\n\n        // Check if this is an HTTP breadcrumb (XHR or fetch)\n        if (\n          breadcrumb.type === 'http' &&\n          (breadcrumb.category === 'xhr' || breadcrumb.category === 'fetch') &&\n          breadcrumb.data &&\n          breadcrumb.data.status_code &&\n          breadcrumb.data.correlationId\n        ) {\n          // Consider HTTP status codes 400+ as failed requests\n          if (breadcrumb.data.status_code >= 400) {\n            return breadcrumb.data;\n          }\n        }\n      }\n    }\n\n    return null;\n  },\n\n  _send: function (data) {\n    var globalOptions = this._globalOptions;\n\n    var baseData = {\n        project: this._globalProject,\n        logger: globalOptions.logger,\n        platform: 'javascript',\n      },\n      httpData = this._getHttpData();\n\n    if (httpData) {\n      baseData.request = httpData;\n    }\n\n    // HACK: delete `trimHeadFrames` to prevent from appearing in outbound payload\n    if (data.trimHeadFrames) delete data.trimHeadFrames;\n\n    data = objectMerge(baseData, data);\n\n    // Merge in the tags and extra separately since objectMerge doesn't handle a deep merge\n    data.tags = objectMerge(\n      objectMerge({}, this._globalContext.tags || {}),\n      data.tags || {}\n    );\n    data.extra = objectMerge(\n      objectMerge({}, this._globalContext.extra || {}),\n      data.extra || {}\n    );\n\n    // Send along our own collected metadata with extra\n    if (!data.extra) data.extra = {};\n    data.extra['session:duration'] = now() - this._startTime;\n    data.extra['sessionId'] = _window.hubspot && _window.hubspot.sessionId;\n\n    // Capture Amplitude session ID for correlation with session replays and analytics\n    try {\n      if (_window.localStorage) {\n        var hmplData = _window.localStorage.getItem('__hmpl');\n        if (hmplData) {\n          var parsedHmplData = JSON.parse(hmplData);\n          if (parsedHmplData && parsedHmplData.session_id) {\n            data.extra['amplitudeSessionId'] = parsedHmplData.session_id;\n          }\n        }\n      }\n    } catch (e) {}\n\n    // Add correlation ID from recent failed network requests to extra object\n    if (\n      !data.isPageEvent &&\n      this._breadcrumbs &&\n      this._breadcrumbs.length > 0\n    ) {\n      var recentFailedRequest = this._getRecentFailedNetworkRequest();\n      if (recentFailedRequest && recentFailedRequest.correlationId) {\n        data.extra.correlationId = recentFailedRequest.correlationId;\n      }\n    }\n\n    if (\n      !data.isPageEvent &&\n      this._breadcrumbs &&\n      this._breadcrumbs.length > 0\n    ) {\n      // intentionally make shallow copy so that additions\n      // to breadcrumbs aren't accidentally sent in this request\n      data.breadcrumbs = {\n        values: [].slice.call(this._breadcrumbs, 0),\n      };\n    }\n\n    // If there are no tags/extra, strip the key from the payload alltogther.\n    if (isEmptyObject(data.tags)) delete data.tags;\n\n    if (this._globalContext.user) {\n      // sentry.interfaces.User\n      data.user = this._globalContext.user;\n    }\n\n    // Include the environment if it's defined in globalOptions\n    if (globalOptions.environment) data.environment = globalOptions.environment;\n\n    // Include the release if it's defined in globalOptions\n    if (globalOptions.release) data.release = globalOptions.release;\n\n    // Include server_name if it's defined in globalOptions\n    if (globalOptions.serverName) data.server_name = globalOptions.serverName;\n\n    if (isFunction(globalOptions.dataCallback)) {\n      data = globalOptions.dataCallback(data) || data;\n    }\n\n    // Why??????????\n    if (!data || isEmptyObject(data)) {\n      return;\n    }\n\n    // Check if the request should be filtered or not\n    if (\n      isFunction(globalOptions.shouldSendCallback) &&\n      !globalOptions.shouldSendCallback(data)\n    ) {\n      return;\n    }\n\n    // Backoff state: Sentry server previously responded w/ an error (e.g. 429 - too many requests),\n    // so drop requests until \"cool-off\" period has elapsed.\n    if (this._shouldBackoff()) {\n      this._logDebug('warn', 'Raven dropped error due to backoff: ', data);\n      return;\n    }\n\n    if (typeof globalOptions.sampleRate === 'number') {\n      if (Math.random() < globalOptions.sampleRate) {\n        this._sendProcessedPayload(data);\n      }\n    } else {\n      this._sendProcessedPayload(data);\n    }\n  },\n\n  _getUuid: function () {\n    return uuid4();\n  },\n\n  _sendProcessedPayload: function (data, callback) {\n    var self = this;\n    var globalOptions = this._globalOptions;\n\n    if (!this.isSetup()) return;\n\n    // Try and clean up the packet before sending by truncating long values\n    data = this._trimPacket(data);\n\n    // ideally duplicate error testing should occur *before* dataCallback/shouldSendCallback,\n    // but this would require copying an un-truncated copy of the data packet, which can be\n    // arbitrarily deep (extra_data) -- could be worthwhile? will revisit\n    if (!this._globalOptions.allowDuplicates && this._isRepeatData(data)) {\n      this._logDebug('warn', 'Raven dropped repeat event: ', data);\n      return;\n    }\n\n    // Send along an event_id if not explicitly passed.\n    // This event_id can be used to reference the error within Sentry itself.\n    // Set lastEventId after we know the error should actually be sent\n    this._lastEventId = data.event_id || (data.event_id = this._getUuid());\n\n    // Store outbound payload after trim\n    this._lastData = data;\n\n    this._logDebug('debug', 'Raven about to send:', data);\n\n    var auth = {\n      sentry_version: '7',\n      sentry_client: 'raven-js/' + this.VERSION,\n    };\n\n    if (this._globalKey) {\n      auth.sentry_key = this._globalKey;\n    }\n\n    if (this._globalSecret) {\n      auth.sentry_secret = this._globalSecret;\n    }\n\n    var params = {};\n    var hasProjectTag = data.tags && data.tags.project;\n    var hasParams = hasProjectTag;\n\n    if (hasProjectTag) {\n      params.deployable = data.tags.project;\n    }\n\n    var exception = data.exception && data.exception.values[0];\n    this.captureBreadcrumb({\n      category: data.isPageEvent ? 'pageEvent' : 'sentry',\n      message: exception\n        ? (exception.type ? exception.type + ': ' : '') + exception.value\n        : data.message,\n      data: data.isPageEvent ? data.extra : undefined,\n      event_id: data.event_id,\n      level: data.level || 'error', // presume error unless specified\n    });\n\n    var url = data.isPageEvent\n      ? this._globalPageEventEndpoint\n      : this._globalEndpoint;\n\n    (globalOptions.transport || this._makeRequest).call(this, {\n      url: url,\n      auth: auth,\n      query: hasParams ? params : undefined,\n      data: data,\n      options: globalOptions,\n      onSuccess: function success() {\n        self._resetBackoff();\n\n        self._triggerEvent('success', {\n          data: data,\n          src: url,\n        });\n        callback && callback();\n      },\n      onError: function failure(error) {\n        self._logDebug('error', 'Raven transport failed to send: ', error);\n\n        if (error.request) {\n          self._setBackoffState(error.request);\n        }\n\n        self._triggerEvent('failure', {\n          data: data,\n          src: url,\n          error,\n        });\n        error =\n          error ||\n          new Error('Raven send failed (no additional details provided)');\n        callback && callback(error);\n      },\n    });\n  },\n\n  _makeRequest: function (opts) {\n    var request = _window.XMLHttpRequest && new _window.XMLHttpRequest();\n    if (!request) return;\n\n    // if browser doesn't support CORS (e.g. IE7), we are out of luck\n    var hasCORS =\n      'withCredentials' in request || typeof XDomainRequest !== 'undefined';\n\n    if (!hasCORS) return;\n\n    var url = opts.url;\n\n    if ('withCredentials' in request) {\n      request.onreadystatechange = function () {\n        if (request.readyState !== 4) {\n          return;\n        } else if (request.status === 200) {\n          opts.onSuccess && opts.onSuccess();\n        } else if (opts.onError) {\n          var err = new Error('Sentry error code: ' + request.status);\n          err.request = request;\n          opts.onError(err);\n        }\n      };\n    } else {\n      request = new XDomainRequest();\n      // xdomainrequest cannot go http -> https (or vice versa),\n      // so always use protocol relative\n      url = url.replace(/^https?:/, '');\n\n      // onreadystatechange not supported by XDomainRequest\n      if (opts.onSuccess) {\n        request.onload = opts.onSuccess;\n      }\n      if (opts.onError) {\n        request.onerror = function () {\n          var err = new Error('Sentry error code: XDomainRequest');\n          err.request = request;\n          opts.onError(err);\n        };\n      }\n    }\n\n    // NOTE: auth is intentionally sent as part of query string (NOT as custom\n    //       HTTP header) so as to avoid preflight CORS requests\n    try {\n      request.open(\n        'POST',\n        `${url}?${urlencode(opts.auth)}${\n          opts.query ? `&${urlencode(opts.query)}` : ''\n        }`\n      );\n      request.send(stringify(opts.data));\n    } catch (e) {\n      // Handle \"Document is not fully active\" error when XMLHttpRequest operations\n      // are called on inactive documents (e.g., removed iframes)\n      if (opts.onError) {\n        var err = new Error('XMLHttpRequest failed: ' + e.message);\n        err.request = request;\n        err.originalError = e;\n        opts.onError(err);\n      }\n    }\n  },\n\n  _logDebug: function (level) {\n    if (this._originalConsoleMethods[level] && this.debug) {\n      // In IE<10 console methods do not have their own 'apply' method\n      Function.prototype.apply.call(\n        this._originalConsoleMethods[level],\n        this._originalConsole,\n        [].slice.call(arguments, 1)\n      );\n    }\n  },\n\n  _mergeContext: function (key, context) {\n    if (isUndefined(context)) {\n      delete this._globalContext[key];\n    } else {\n      this._globalContext[key] = objectMerge(\n        this._globalContext[key] || {},\n        context\n      );\n    }\n  },\n};\n\n// Deprecations\nRaven.prototype.setUser = Raven.prototype.setUserContext;\nRaven.prototype.setReleaseContext = Raven.prototype.setRelease;\n","var _window =\n  typeof window !== 'undefined'\n    ? window\n    : typeof global !== 'undefined'\n    ? global\n    : typeof self !== 'undefined'\n    ? self\n    : {};\n\nfunction isObject(what) {\n  return typeof what === 'object' && what !== null;\n}\n\n// Yanked from https://git.io/vS8DV re-used under CC0\n// with some tiny modifications\nfunction isError(value) {\n  switch ({}.toString.call(value)) {\n    case '[object Error]':\n      return true;\n    case '[object Exception]':\n      return true;\n    case '[object DOMException]':\n      return true;\n    default:\n      return value instanceof Error;\n  }\n}\n\nfunction isErrorEvent(value) {\n  return (\n    supportsErrorEvent() && {}.toString.call(value) === '[object ErrorEvent]'\n  );\n}\n\nfunction isUndefined(what) {\n  return what === void 0;\n}\n\nfunction isFunction(what) {\n  return typeof what === 'function';\n}\n\nfunction isString(what) {\n  return Object.prototype.toString.call(what) === '[object String]';\n}\n\nfunction isEmptyObject(what) {\n  for (var _ in what) return false; // eslint-disable-line guard-for-in, no-unused-vars\n  return true;\n}\n\nfunction supportsErrorEvent() {\n  try {\n    new ErrorEvent(''); // eslint-disable-line no-new\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction wrappedCallback(callback) {\n  function dataCallback(data, original) {\n    var normalizedData = callback(data) || data;\n    if (original) {\n      return original(normalizedData) || normalizedData;\n    }\n    return normalizedData;\n  }\n\n  return dataCallback;\n}\n\nfunction each(obj, callback) {\n  var i, j;\n\n  if (isUndefined(obj.length)) {\n    for (i in obj) {\n      if (hasKey(obj, i)) {\n        callback.call(null, i, obj[i]);\n      }\n    }\n  } else {\n    j = obj.length;\n    if (j) {\n      for (i = 0; i < j; i++) {\n        callback.call(null, i, obj[i]);\n      }\n    }\n  }\n}\n\nfunction objectMerge(obj1, obj2) {\n  if (!obj2) {\n    return obj1;\n  }\n  each(obj2, function (key, value) {\n    obj1[key] = value;\n  });\n  return obj1;\n}\n\n/**\n * This function is only used for react-native.\n * react-native freezes object that have already been sent over the\n * js bridge. We need this function in order to check if the object is frozen.\n * So it's ok that objectFrozen returns false if Object.isFrozen is not\n * supported because it's not relevant for other \"platforms\". See related issue:\n * https://github.com/getsentry/react-native-sentry/issues/57\n */\nfunction objectFrozen(obj) {\n  if (!Object.isFrozen) {\n    return false;\n  }\n  return Object.isFrozen(obj);\n}\n\nfunction truncate(str, max) {\n  return !max || str.length <= max ? str : str.substr(0, max) + '\\u2026';\n}\n\n/**\n * hasKey, a better form of hasOwnProperty\n * Example: hasKey(MainHostObject, property) === true/false\n *\n * @param {Object} host object to check property\n * @param {string} key to check\n */\nfunction hasKey(object, key) {\n  return Object.prototype.hasOwnProperty.call(object, key);\n}\n\nfunction joinRegExp(patterns) {\n  // Combine an array of regular expressions and strings into one large regexp\n  // Be mad.\n  var sources = [],\n    i = 0,\n    len = patterns.length,\n    pattern;\n\n  for (; i < len; i++) {\n    pattern = patterns[i];\n    if (isString(pattern)) {\n      // If it's a string, we need to escape it\n      // Taken from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions\n      sources.push(pattern.replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, '\\\\$1'));\n    } else if (pattern && pattern.source) {\n      // If it's a regexp already, we want to extract the source\n      sources.push(pattern.source);\n    }\n    // Intentionally skip other cases\n  }\n  return new RegExp(sources.join('|'), 'i');\n}\n\nfunction urlencode(o) {\n  var pairs = [];\n  each(o, function (key, value) {\n    pairs.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\n  });\n  return pairs.join('&');\n}\n\n// borrowed from https://tools.ietf.org/html/rfc3986#appendix-B\n// intentionally using regex and not <a/> href parsing trick because React Native and other\n// environments where DOM might not be available\nfunction parseUrl(url) {\n  var match = url.match(\n    /^(([^:\\/?#]+):)?(\\/\\/([^\\/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$/\n  );\n  if (!match) return {};\n\n  // coerce to undefined values to empty string so we don't get 'undefined'\n  var query = match[6] || '';\n  var fragment = match[8] || '';\n  return {\n    protocol: match[2],\n    host: match[4],\n    path: match[5],\n    relative: match[5] + query + fragment, // everything minus origin\n  };\n}\nfunction uuid4() {\n  var crypto = _window.crypto || _window.msCrypto;\n\n  if (!isUndefined(crypto) && crypto.getRandomValues) {\n    // Use window.crypto API if available\n    // eslint-disable-next-line no-undef\n    var arr = new Uint16Array(8);\n    crypto.getRandomValues(arr);\n\n    // set 4 in byte 7\n    arr[3] = (arr[3] & 0xfff) | 0x4000;\n    // set 2 most significant bits of byte 9 to '10'\n    arr[4] = (arr[4] & 0x3fff) | 0x8000;\n\n    var pad = function (num) {\n      var v = num.toString(16);\n      while (v.length < 4) {\n        v = '0' + v;\n      }\n      return v;\n    };\n\n    return (\n      pad(arr[0]) +\n      pad(arr[1]) +\n      pad(arr[2]) +\n      pad(arr[3]) +\n      pad(arr[4]) +\n      pad(arr[5]) +\n      pad(arr[6]) +\n      pad(arr[7])\n    );\n  } else {\n    // http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/2117523#2117523\n    return 'xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n      var r = (Math.random() * 16) | 0,\n        v = c === 'x' ? r : (r & 0x3) | 0x8;\n      return v.toString(16);\n    });\n  }\n}\n\n/**\n * Returns true if either a OR b is truthy, but not both\n */\nfunction isOnlyOneTruthy(a, b) {\n  return !!(!!a ^ !!b);\n}\n\n/**\n * Returns true if the two input exception interfaces have the same content\n */\nfunction isSameException(ex1, ex2) {\n  if (isOnlyOneTruthy(ex1, ex2)) return false;\n\n  ex1 = ex1.values[0];\n  ex2 = ex2.values[0];\n\n  if (ex1.type !== ex2.type || ex1.value !== ex2.value) return false;\n\n  return isSameStacktrace(ex1.stacktrace, ex2.stacktrace);\n}\n\n/**\n * Compare two objects for equality by checking all properties and values\n */\nfunction isSameObject(obj1, obj2) {\n  if (obj1 === obj2) return true;\n  if (obj1 == null && obj2 == null) return true;\n  if (isOnlyOneTruthy(obj1, obj2)) return false;\n\n  var keys1 = Object.keys(obj1);\n  var keys2 = Object.keys(obj2);\n\n  if (keys1.length !== keys2.length) return false;\n\n  for (var i = 0; i < keys1.length; i++) {\n    var key = keys1[i];\n    if (!hasKey(obj2, key)) return false;\n    if (obj1[key] !== obj2[key]) return false;\n  }\n\n  return true;\n}\n\n/**\n * Returns true if the two input stack trace interfaces have the same content\n */\nfunction isSameStacktrace(stack1, stack2) {\n  if (stack1 == null && stack2 == null) return true;\n  if (isOnlyOneTruthy(stack1, stack2)) return false;\n\n  var frames1 = stack1.frames;\n  var frames2 = stack2.frames;\n\n  // Exit early if no frames or if frame count differs\n  if (frames1 == null && frames2 == null) return isSameObject(stack1, stack2);\n  if (isOnlyOneTruthy(frames1, frames2)) return false;\n  if (frames1.length == null && frames2.length == null)\n    return isSameObject(stack1, stack2);\n  if (frames1.length !== frames2.length) return false;\n\n  // Iterate through every frame; bail out if anything differs\n  var a, b;\n  for (var i = 0; i < frames1.length; i++) {\n    a = frames1[i];\n    b = frames2[i];\n    if (\n      a.filename !== b.filename ||\n      a.lineno !== b.lineno ||\n      a.colno !== b.colno ||\n      a['function'] !== b['function']\n    )\n      return false;\n  }\n  return true;\n}\n\n/**\n * Polyfill a method\n * @param obj object e.g. `document`\n * @param name method name present on object e.g. `addEventListener`\n * @param replacement replacement function\n * @param track {optional} record instrumentation to an array\n */\nfunction fill(obj, name, replacement, track) {\n  var orig = obj[name];\n  obj[name] = replacement(orig);\n  if (track) {\n    track.push([obj, name, orig]);\n  }\n}\n\n/**\n * Redacts sensitive parameters from a URL\n * @param {string} url - The URL to redact sensitive parameters from\n * @returns {string} - The URL with sensitive parameters redacted\n */\nfunction redactSensitiveUrlParams(url) {\n  if (!url || typeof url !== 'string') {\n    return url;\n  }\n\n  try {\n    // Parse the URL\n    const parsedUrl = new URL(url);\n\n    // Redact search params\n    const searchParams = parsedUrl.searchParams;\n    if (searchParams.has('otp')) {\n      searchParams.set('otp', '**REDACTED**');\n    }\n    if (searchParams.has('otpId')) {\n      searchParams.set('otpId', '**REDACTED**');\n    }\n\n    // Redact hash parameters\n    if (parsedUrl.hash) {\n      // Remove the leading # character\n      const hashWithoutLeadingChar = parsedUrl.hash.substring(1);\n\n      // Check if there are parameters in the hash\n      if (hashWithoutLeadingChar.includes('=')) {\n        // Replace the entire hash with redacted\n        parsedUrl.hash = '**REDACTED**';\n      }\n    }\n\n    return parsedUrl.toString();\n  } catch (e) {\n    // If URL parsing fails, return the original URL\n    return url;\n  }\n}\n\nmodule.exports = {\n  isObject: isObject,\n  isError: isError,\n  isErrorEvent: isErrorEvent,\n  isUndefined: isUndefined,\n  isFunction: isFunction,\n  isString: isString,\n  isEmptyObject: isEmptyObject,\n  supportsErrorEvent: supportsErrorEvent,\n  wrappedCallback: wrappedCallback,\n  each: each,\n  objectMerge: objectMerge,\n  truncate: truncate,\n  objectFrozen: objectFrozen,\n  hasKey: hasKey,\n  joinRegExp: joinRegExp,\n  urlencode: urlencode,\n  uuid4: uuid4,\n  isSameObject: isSameObject,\n  isSameException: isSameException,\n  isSameStacktrace: isSameStacktrace,\n  parseUrl: parseUrl,\n  fill: fill,\n  redactSensitiveUrlParams: redactSensitiveUrlParams,\n};\n","var utils = require('../utils');\n\n/*\n TraceKit - Cross brower stack traces\n\n This was originally forked from github.com/occ/TraceKit, but has since been\n largely re-written and is now maintained as part of raven-js.  Tests for\n this are in test/vendor.\n\n MIT license\n*/\n\nvar TraceKit = {\n  collectWindowErrors: true,\n  debug: false,\n};\n\n// This is to be defensive in environments where window does not exist (see https://github.com/getsentry/raven-js/pull/785)\nvar _window =\n  typeof window !== 'undefined'\n    ? window\n    : typeof global !== 'undefined'\n    ? global\n    : typeof self !== 'undefined'\n    ? self\n    : {};\n\n// global reference to slice\nvar _slice = [].slice;\nvar UNKNOWN_FUNCTION = '?';\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error#Error_types\nvar ERROR_TYPES_RE =\n  /^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;\n\nfunction getLocationHref() {\n  if (typeof document === 'undefined' || document.location == null) return '';\n\n  return document.location.href;\n}\n\n/**\n * TraceKit.report: cross-browser processing of unhandled exceptions\n *\n * Syntax:\n *   TraceKit.report.subscribe(function(stackInfo) { ... })\n *   TraceKit.report.unsubscribe(function(stackInfo) { ... })\n *   TraceKit.report(exception)\n *   try { ...code... } catch(ex) { TraceKit.report(ex); }\n *\n * Supports:\n *   - Firefox: full stack trace with line numbers, plus column number\n *              on top frame; column number is not guaranteed\n *   - Opera:   full stack trace with line and column numbers\n *   - Chrome:  full stack trace with line and column numbers\n *   - Safari:  line and column number for the top frame only; some frames\n *              may be missing, and column number is not guaranteed\n *   - IE:      line and column number for the top frame only; some frames\n *              may be missing, and column number is not guaranteed\n *\n * In theory, TraceKit should work on all of the following versions:\n *   - IE5.5+ (only 8.0 tested)\n *   - Firefox 0.9+ (only 3.5+ tested)\n *   - Opera 7+ (only 10.50 tested; versions 9 and earlier may require\n *     Exceptions Have Stacktrace to be enabled in opera:config)\n *   - Safari 3+ (only 4+ tested)\n *   - Chrome 1+ (only 5+ tested)\n *   - Konqueror 3.5+ (untested)\n *\n * Requires TraceKit.computeStackTrace.\n *\n * Tries to catch all unhandled exceptions and report them to the\n * subscribed handlers. Please note that TraceKit.report will rethrow the\n * exception. This is REQUIRED in order to get a useful stack trace in IE.\n * If the exception does not reach the top of the browser, you will only\n * get a stack trace from the point where TraceKit.report was called.\n *\n * Handlers receive a stackInfo object as described in the\n * TraceKit.computeStackTrace docs.\n */\nTraceKit.report = (function reportModuleWrapper() {\n  var handlers = [],\n    lastArgs = null,\n    lastException = null,\n    lastExceptionStack = null;\n\n  /**\n   * Add a crash handler.\n   * @param {Function} handler\n   */\n  function subscribe(handler) {\n    installGlobalHandler();\n    handlers.push(handler);\n  }\n\n  /**\n   * Remove a crash handler.\n   * @param {Function} handler\n   */\n  function unsubscribe(handler) {\n    for (var i = handlers.length - 1; i >= 0; --i) {\n      if (handlers[i] === handler) {\n        handlers.splice(i, 1);\n      }\n    }\n  }\n\n  /**\n   * Remove all crash handlers.\n   */\n  function unsubscribeAll() {\n    uninstallGlobalHandler();\n    handlers = [];\n  }\n\n  /**\n   * Dispatch stack information to all handlers.\n   * @param {Object.<string, *>} stack\n   */\n  function notifyHandlers(stack, isWindowError) {\n    var exception = null;\n    if (isWindowError && !TraceKit.collectWindowErrors) {\n      return;\n    }\n    for (var i in handlers) {\n      if (handlers.hasOwnProperty(i)) {\n        try {\n          handlers[i].apply(null, [stack].concat(_slice.call(arguments, 2)));\n        } catch (inner) {\n          exception = inner;\n        }\n      }\n    }\n\n    if (exception) {\n      throw exception;\n    }\n  }\n\n  var _oldOnerrorHandler, _onErrorHandlerInstalled;\n\n  /**\n   * Ensures all global unhandled exceptions are recorded.\n   * Supported by Gecko and IE.\n   * @param {string} message Error message.\n   * @param {string} url URL of script that generated the exception.\n   * @param {(number|string)} lineNo The line number at which the error\n   * occurred.\n   * @param {?(number|string)} colNo The column number at which the error\n   * occurred.\n   * @param {?Error} ex The actual Error object.\n   */\n  function traceKitWindowOnError(message, url, lineNo, colNo, ex) {\n    var stack = null;\n\n    if (lastExceptionStack) {\n      TraceKit.computeStackTrace.augmentStackTraceWithInitialElement(\n        lastExceptionStack,\n        url,\n        lineNo,\n        message\n      );\n      processLastException();\n    } else if (ex && utils.isError(ex)) {\n      // non-string `ex` arg; attempt to extract stack trace\n\n      // New chrome and blink send along a real error object\n      // Let's just report that like a normal error.\n      // See: https://mikewest.org/2013/08/debugging-runtime-errors-with-window-onerror\n      stack = TraceKit.computeStackTrace(ex);\n      notifyHandlers(stack, true);\n    } else {\n      var location = {\n        url: url,\n        line: lineNo,\n        column: colNo,\n      };\n\n      var name = undefined;\n      var msg = message; // must be new var or will modify original `arguments`\n      var groups;\n      if ({}.toString.call(message) === '[object String]') {\n        var groups = message.match(ERROR_TYPES_RE);\n        if (groups) {\n          name = groups[1];\n          msg = groups[2];\n        }\n      }\n\n      location.func = UNKNOWN_FUNCTION;\n\n      stack = {\n        name: name,\n        message: msg,\n        url: getLocationHref(),\n        stack: [location],\n      };\n      notifyHandlers(stack, true);\n    }\n\n    try {\n      if (_oldOnerrorHandler) {\n        return _oldOnerrorHandler.apply(this, arguments);\n      }\n    } catch (e) {\n      if (e.message && e.message.indexOf(/permission denied/) !== -1) {\n        // This can happen if this is being called inside an iframe which doesn't have access to the window onError handler.\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Property_access_denied\n        // We can ignore this.\n      } else {\n        throw e;\n      }\n    }\n\n    return false;\n  }\n\n  function installGlobalHandler() {\n    if (_onErrorHandlerInstalled) {\n      return;\n    }\n    _oldOnerrorHandler = _window.onerror;\n    _window.onerror = traceKitWindowOnError;\n    _onErrorHandlerInstalled = true;\n  }\n\n  function uninstallGlobalHandler() {\n    if (!_onErrorHandlerInstalled) {\n      return;\n    }\n    _window.onerror = _oldOnerrorHandler;\n    _onErrorHandlerInstalled = false;\n    _oldOnerrorHandler = undefined;\n  }\n\n  function processLastException() {\n    var _lastExceptionStack = lastExceptionStack,\n      _lastArgs = lastArgs;\n    lastArgs = null;\n    lastExceptionStack = null;\n    lastException = null;\n    notifyHandlers.apply(null, [_lastExceptionStack, false].concat(_lastArgs));\n  }\n\n  /**\n   * Reports an unhandled Error to TraceKit.\n   * @param {Error} ex\n   * @param {?boolean} rethrow If false, do not re-throw the exception.\n   * Only used for window.onerror to not cause an infinite loop of\n   * rethrowing.\n   */\n  function report(ex, rethrow) {\n    var args = _slice.call(arguments, 1);\n    if (lastExceptionStack) {\n      if (lastException === ex) {\n        return; // already caught by an inner catch block, ignore\n      } else {\n        processLastException();\n      }\n    }\n\n    var stack = TraceKit.computeStackTrace(ex);\n    lastExceptionStack = stack;\n    lastException = ex;\n    lastArgs = args;\n\n    // If the stack trace is incomplete, wait for 2 seconds for\n    // slow slow IE to see if onerror occurs or not before reporting\n    // this exception; otherwise, we will end up with an incomplete\n    // stack trace\n    setTimeout(\n      function () {\n        if (lastException === ex) {\n          processLastException();\n        }\n      },\n      stack.incomplete ? 2000 : 0\n    );\n\n    if (rethrow !== false) {\n      throw ex; // re-throw to propagate to the top level (and cause window.onerror)\n    }\n  }\n\n  report.subscribe = subscribe;\n  report.unsubscribe = unsubscribe;\n  report.uninstall = unsubscribeAll;\n  return report;\n})();\n\n/**\n * TraceKit.computeStackTrace: cross-browser stack traces in JavaScript\n *\n * Syntax:\n *   s = TraceKit.computeStackTrace(exception) // consider using TraceKit.report instead (see below)\n * Returns:\n *   s.name              - exception name\n *   s.message           - exception message\n *   s.stack[i].url      - JavaScript or HTML file URL\n *   s.stack[i].func     - function name, or empty for anonymous functions (if guessing did not work)\n *   s.stack[i].args     - arguments passed to the function, if known\n *   s.stack[i].line     - line number, if known\n *   s.stack[i].column   - column number, if known\n *\n * Supports:\n *   - Firefox:  full stack trace with line numbers and unreliable column\n *               number on top frame\n *   - Opera 10: full stack trace with line and column numbers\n *   - Opera 9-: full stack trace with line numbers\n *   - Chrome:   full stack trace with line and column numbers\n *   - Safari:   line and column number for the topmost stacktrace element\n *               only\n *   - IE:       no line numbers whatsoever\n *\n * Tries to guess names of anonymous functions by looking for assignments\n * in the source code. In IE and Safari, we have to guess source file names\n * by searching for function bodies inside all page scripts. This will not\n * work for scripts that are loaded cross-domain.\n * Here be dragons: some function names may be guessed incorrectly, and\n * duplicate functions may be mismatched.\n *\n * TraceKit.computeStackTrace should only be used for tracing purposes.\n * Logging of unhandled exceptions should be done with TraceKit.report,\n * which builds on top of TraceKit.computeStackTrace and provides better\n * IE support by utilizing the window.onerror event to retrieve information\n * about the top of the stack.\n *\n * Note: In IE and Safari, no stack trace is recorded on the Error object,\n * so computeStackTrace instead walks its *own* chain of callers.\n * This means that:\n *  * in Safari, some methods may be missing from the stack trace;\n *  * in IE, the topmost function in the stack trace will always be the\n *    caller of computeStackTrace.\n *\n * This is okay for tracing (because you are likely to be calling\n * computeStackTrace from the function you want to be the topmost element\n * of the stack trace anyway), but not okay for logging unhandled\n * exceptions (because your catch block will likely be far away from the\n * inner function that actually caused the exception).\n *\n */\nTraceKit.computeStackTrace = (function computeStackTraceWrapper() {\n  // Contents of Exception in various browsers.\n  //\n  // SAFARI:\n  // ex.message = Can't find variable: qq\n  // ex.line = 59\n  // ex.sourceId = 580238192\n  // ex.sourceURL = http://...\n  // ex.expressionBeginOffset = 96\n  // ex.expressionCaretOffset = 98\n  // ex.expressionEndOffset = 98\n  // ex.name = ReferenceError\n  //\n  // FIREFOX:\n  // ex.message = qq is not defined\n  // ex.fileName = http://...\n  // ex.lineNumber = 59\n  // ex.columnNumber = 69\n  // ex.stack = ...stack trace... (see the example below)\n  // ex.name = ReferenceError\n  //\n  // CHROME:\n  // ex.message = qq is not defined\n  // ex.name = ReferenceError\n  // ex.type = not_defined\n  // ex.arguments = ['aa']\n  // ex.stack = ...stack trace...\n  //\n  // INTERNET EXPLORER:\n  // ex.message = ...\n  // ex.name = ReferenceError\n  //\n  // OPERA:\n  // ex.message = ...message... (see the example below)\n  // ex.name = ReferenceError\n  // ex.opera#sourceloc = 11  (pretty much useless, duplicates the info in ex.message)\n  // ex.stacktrace = n/a; see 'opera:config#UserPrefs|Exceptions Have Stacktrace'\n\n  /**\n   * Computes stack trace information from the stack property.\n   * Chrome and Gecko use this property.\n   * @param {Error} ex\n   * @return {?Object.<string, *>} Stack trace information.\n   */\n  function computeStackTraceFromStackProp(ex) {\n    if (typeof ex.stack === 'undefined' || !ex.stack) return;\n\n    var chrome =\n        /^\\s*at (.*?) ?\\(((?:file|https?|blob|chrome-extension|native|eval|webpack|bpm|<anonymous>|[a-z]:|\\/).*?)(?::(\\d+))?(?::(\\d+))?\\)?\\s*$/i,\n      gecko =\n        /^\\s*(.*?)(?:\\((.*?)\\))?(?:^|@)((?:file|https?|blob|chrome|webpack|bpm|resource|\\[native).*?|[^@]*bundle)(?::(\\d+))?(?::(\\d+))?\\s*$/i,\n      winjs =\n        /^\\s*at (?:((?:\\[object object\\])?.+) )?\\(?((?:file|ms-appx|https?|webpack|bpm|blob):.*?):(\\d+)(?::(\\d+))?\\)?\\s*$/i,\n      // Used to additionally parse URL/line/column from eval frames\n      geckoEval = /(\\S+) line (\\d+)(?: > eval line \\d+)* > eval/i,\n      chromeEval = /\\((\\S*)(?::(\\d+))(?::(\\d+))\\)/,\n      lines = ex.stack.split('\\n'),\n      stack = [],\n      submatch,\n      parts,\n      element,\n      reference = /^(.*) is undefined$/.exec(ex.message);\n\n    for (var i = 0, j = lines.length; i < j; ++i) {\n      if ((parts = chrome.exec(lines[i]))) {\n        var isNative = parts[2] && parts[2].indexOf('native') === 0; // start of line\n        var isEval = parts[2] && parts[2].indexOf('eval') === 0; // start of line\n        if (isEval && (submatch = chromeEval.exec(parts[2]))) {\n          // throw out eval line/column and use top-most line/column number\n          parts[2] = submatch[1]; // url\n          parts[3] = submatch[2]; // line\n          parts[4] = submatch[3]; // column\n        }\n        element = {\n          url: !isNative ? parts[2] : null,\n          func: parts[1] || UNKNOWN_FUNCTION,\n          args: isNative ? [parts[2]] : [],\n          line: parts[3] ? +parts[3] : null,\n          column: parts[4] ? +parts[4] : null,\n        };\n      } else if ((parts = winjs.exec(lines[i]))) {\n        element = {\n          url: parts[2],\n          func: parts[1] || UNKNOWN_FUNCTION,\n          args: [],\n          line: +parts[3],\n          column: parts[4] ? +parts[4] : null,\n        };\n      } else if ((parts = gecko.exec(lines[i]))) {\n        var isEval = parts[3] && parts[3].indexOf(' > eval') > -1;\n        if (isEval && (submatch = geckoEval.exec(parts[3]))) {\n          // throw out eval line/column and use top-most line number\n          parts[3] = submatch[1];\n          parts[4] = submatch[2];\n          parts[5] = null; // no column when eval\n        } else if (\n          i === 0 &&\n          !parts[5] &&\n          typeof ex.columnNumber !== 'undefined'\n        ) {\n          // FireFox uses this awesome columnNumber property for its top frame\n          // Also note, Firefox's column number is 0-based and everything else expects 1-based,\n          // so adding 1\n          // NOTE: this hack doesn't work if top-most frame is eval\n          stack[0].column = ex.columnNumber + 1;\n        }\n        element = {\n          url: parts[3],\n          func: parts[1] || UNKNOWN_FUNCTION,\n          args: parts[2] ? parts[2].split(',') : [],\n          line: parts[4] ? +parts[4] : null,\n          column: parts[5] ? +parts[5] : null,\n        };\n      } else {\n        continue;\n      }\n\n      if (!element.func && element.line) {\n        element.func = UNKNOWN_FUNCTION;\n      }\n\n      stack.push(element);\n    }\n\n    if (!stack.length) {\n      return null;\n    }\n\n    return {\n      name: ex.name,\n      message: ex.message,\n      url: getLocationHref(),\n      stack: stack,\n    };\n  }\n\n  /**\n   * Adds information about the first frame to incomplete stack traces.\n   * Safari and IE require this to get complete data on the first frame.\n   * @param {Object.<string, *>} stackInfo Stack trace information from\n   * one of the compute* methods.\n   * @param {string} url The URL of the script that caused an error.\n   * @param {(number|string)} lineNo The line number of the script that\n   * caused an error.\n   * @param {string=} message The error generated by the browser, which\n   * hopefully contains the name of the object that caused the error.\n   * @return {boolean} Whether or not the stack information was\n   * augmented.\n   */\n  function augmentStackTraceWithInitialElement(\n    stackInfo,\n    url,\n    lineNo,\n    message\n  ) {\n    var initial = {\n      url: url,\n      line: lineNo,\n    };\n\n    if (initial.url && initial.line) {\n      stackInfo.incomplete = false;\n\n      if (!initial.func) {\n        initial.func = UNKNOWN_FUNCTION;\n      }\n\n      if (stackInfo.stack.length > 0) {\n        if (stackInfo.stack[0].url === initial.url) {\n          if (stackInfo.stack[0].line === initial.line) {\n            return false; // already in stack trace\n          } else if (\n            !stackInfo.stack[0].line &&\n            stackInfo.stack[0].func === initial.func\n          ) {\n            stackInfo.stack[0].line = initial.line;\n            return false;\n          }\n        }\n      }\n\n      stackInfo.stack.unshift(initial);\n      stackInfo.partial = true;\n      return true;\n    } else {\n      stackInfo.incomplete = true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Computes stack trace information by walking the arguments.caller\n   * chain at the time the exception occurred. This will cause earlier\n   * frames to be missed but is the only way to get any stack trace in\n   * Safari and IE. The top frame is restored by\n   * {@link augmentStackTraceWithInitialElement}.\n   * @param {Error} ex\n   * @return {?Object.<string, *>} Stack trace information.\n   */\n  function computeStackTraceByWalkingCallerChain(ex, depth) {\n    var functionName =\n        /function\\s+([_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*)?\\s*\\(/i,\n      stack = [],\n      funcs = {},\n      recursion = false,\n      parts,\n      item,\n      source;\n\n    for (\n      var curr = computeStackTraceByWalkingCallerChain.caller;\n      curr && !recursion;\n      curr = curr.caller\n    ) {\n      if (curr === computeStackTrace || curr === TraceKit.report) {\n        // console.log('skipping internal function');\n        continue;\n      }\n\n      item = {\n        url: null,\n        func: UNKNOWN_FUNCTION,\n        line: null,\n        column: null,\n      };\n\n      if (curr.name) {\n        item.func = curr.name;\n      } else if ((parts = functionName.exec(curr.toString()))) {\n        item.func = parts[1];\n      }\n\n      if (typeof item.func === 'undefined') {\n        try {\n          item.func = parts.input.substring(0, parts.input.indexOf('{'));\n        } catch (e) {}\n      }\n\n      if (funcs['' + curr]) {\n        recursion = true;\n      } else {\n        funcs['' + curr] = true;\n      }\n\n      stack.push(item);\n    }\n\n    if (depth) {\n      // console.log('depth is ' + depth);\n      // console.log('stack is ' + stack.length);\n      stack.splice(0, depth);\n    }\n\n    var result = {\n      name: ex.name,\n      message: ex.message,\n      url: getLocationHref(),\n      stack: stack,\n    };\n    augmentStackTraceWithInitialElement(\n      result,\n      ex.sourceURL || ex.fileName,\n      ex.line || ex.lineNumber,\n      ex.message || ex.description\n    );\n    return result;\n  }\n\n  /**\n   * Computes a stack trace for an exception.\n   * @param {Error} ex\n   * @param {(string|number)=} depth\n   */\n  function computeStackTrace(ex, depth) {\n    var stack = null;\n    depth = depth == null ? 0 : +depth;\n\n    try {\n      stack = computeStackTraceFromStackProp(ex);\n      if (stack) {\n        return stack;\n      }\n    } catch (e) {\n      if (TraceKit.debug) {\n        throw e;\n      }\n    }\n\n    try {\n      stack = computeStackTraceByWalkingCallerChain(ex, depth + 1);\n      if (stack) {\n        return stack;\n      }\n    } catch (e) {\n      if (TraceKit.debug) {\n        throw e;\n      }\n    }\n    return {\n      name: ex.name,\n      message: ex.message,\n      url: getLocationHref(),\n    };\n  }\n\n  computeStackTrace.augmentStackTraceWithInitialElement =\n    augmentStackTraceWithInitialElement;\n  computeStackTrace.computeStackTraceFromStackProp =\n    computeStackTraceFromStackProp;\n\n  return computeStackTrace;\n})();\n\nmodule.exports = TraceKit;\n","/*\n json-stringify-safe\n Like JSON.stringify, but doesn't throw on circular references.\n\n Originally forked from https://github.com/isaacs/json-stringify-safe\n version 5.0.1 on 3/8/2017 and modified to handle Errors serialization\n and IE8 compatibility. Tests for this are in test/vendor.\n\n ISC license: https://github.com/isaacs/json-stringify-safe/blob/master/LICENSE\n*/\n\nexports = module.exports = stringify;\nexports.getSerialize = serializer;\n\nfunction indexOf(haystack, needle) {\n  for (var i = 0; i < haystack.length; ++i) {\n    if (haystack[i] === needle) return i;\n  }\n  return -1;\n}\n\nfunction stringify(obj, replacer, spaces, cycleReplacer) {\n  return JSON.stringify(obj, serializer(replacer, cycleReplacer), spaces);\n}\n\n// https://github.com/ftlabs/js-abbreviate/blob/fa709e5f139e7770a71827b1893f22418097fbda/index.js#L95-L106\nfunction stringifyError(value) {\n  var err = {\n    // These properties are implemented as magical getters and don't show up in for in\n    stack: value.stack,\n    message: value.message,\n    name: value.name,\n  };\n\n  for (var i in value) {\n    if (Object.prototype.hasOwnProperty.call(value, i)) {\n      err[i] = value[i];\n    }\n  }\n\n  return err;\n}\n\nfunction serializer(replacer, cycleReplacer) {\n  var stack = [];\n  var keys = [];\n\n  if (cycleReplacer == null) {\n    cycleReplacer = function (key, value) {\n      if (stack[0] === value) {\n        return '[Circular ~]';\n      }\n      return (\n        '[Circular ~.' + keys.slice(0, indexOf(stack, value)).join('.') + ']'\n      );\n    };\n  }\n\n  return function (key, value) {\n    if (stack.length > 0) {\n      var thisPos = indexOf(stack, this);\n      ~thisPos ? stack.splice(thisPos + 1) : stack.push(this);\n      ~thisPos ? keys.splice(thisPos, Infinity, key) : keys.push(key);\n\n      if (~indexOf(stack, value)) {\n        value = cycleReplacer.call(this, key, value);\n      }\n    } else {\n      stack.push(value);\n    }\n\n    return replacer == null\n      ? value instanceof Error\n        ? stringifyError(value)\n        : value\n      : replacer.call(this, key, value);\n  };\n}\n","\"use strict\";\n'use es6';\n\n/*\n\n  The back/forward cache in browsers caches the state of the page\n  and reuses that state when using the back/forward buttons in the browser.\n  This can cause a leak of data after a user logs out. For now we are\n  just forcing the page to reload as if it was not cached.\n\n*/\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\nfunction _default() {\n  window.addEventListener('pageshow', event => {\n    if (event.persisted) {\n      window.location.reload();\n    }\n  });\n}\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _default = exports.default = {\n  id: null,\n  pathRegex: /^\\/(?:[A-Za-z0-9-_]*)\\/(\\d+)(?:\\/|$)/,\n  queryParamRegex: /(?:\\?|&)portalid=(\\d+)/i,\n  getPortalIdFromPath(regex) {\n    if (document) {\n      if (regex == null) {\n        regex = this.pathRegex;\n      }\n      return this.parsePortalIdFromString(document.location.pathname, regex);\n    }\n  },\n  getPortalIdFromQueryParam() {\n    if (document) {\n      return this.parsePortalIdFromString(document.location.search, this.queryParamRegex);\n    }\n  },\n  parsePortalIdFromString(string, regex) {\n    const idRe = regex.exec(string);\n    const portalId = idRe != null ? idRe[1] : undefined;\n    return portalId ? +portalId : undefined;\n  },\n  get(options) {\n    if (options == null) {\n      options = {};\n    }\n    if (this.id && !options.reparse) {\n      return this.id;\n    }\n    const id = this.getPortalIdFromPath(options.regex) || this.getPortalIdFromQueryParam();\n    if (!options.preserveGlobalId) {\n      if (window.hubspot == null) {\n        window.hubspot = {};\n      }\n      if (window.hubspot.portal == null) {\n        window.hubspot.portal = {};\n      }\n      if (window.hubspot.portal.id == null) {\n        window.hubspot.portal.id = id;\n      }\n      if (id) {\n        this.id = id;\n      }\n    }\n    return id;\n  }\n};\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nconst SUBDOMAINS = ['api', 'local', 'app', 'private', 'platform', 'tools', 'meetings', 'payments', 'mcp'];\nconst COM_DOMAINS = ['hubspot', 'hubteam', 'grader', 'getsignals', 'getsidekick', 'gettally', 'hubspotemail', 'customer-hub', 'hubspotservicehub', 'hubspotquote', 'hubspotdocuments', 'hs-data-privacy'\n\n// connect.com and wthubspot.com intentionally not included here due to mismatching qa tld\n];\nconst NET_DOMAINS = ['hubspotstarter', 'hubspotfree', 'hubspotemail'];\nconst ORG_DOMAINS = ['growth'];\nconst DOMAINS = {\n  com: COM_DOMAINS.join('|'),\n  net: NET_DOMAINS.join('|'),\n  org: ORG_DOMAINS.join('|')\n};\nconst createEnviro = function createEnviro(location) {\n  const deployedRe = new RegExp(`^(?!local|test|selenium)(.*\\\\.)?(${Object.entries(DOMAINS).map(([tld, regexList]) => `(?:${regexList})(qa)?\\\\.${tld}`).join('|')}|(?:connect)\\\\.com|(?:connect)(qa)\\\\.co|wthubspot\\\\.(com|de|es|fr|jp))$`);\n  const isDeployed = deployedRe.test(location.hostname);\n  const qaRe = new RegExp(`${Object.entries(DOMAINS).map(([tld, regexList]) => `(?:${regexList})qa\\\\.${tld}`).join('|')}|(?:connect)qa\\\\.co|wthubspot\\\\.(com|de|es|fr|jp)|hsqa-sales(?:crm)?-sub\\\\.com|(?:hubspotstarter|hubspotfree|hubspotemail)(qa)(?:-.*)\\\\.net|(?:hubspotemail)(qa)(?:-.*)\\\\.com`);\n  const hubletRe = new RegExp(`^(?:${SUBDOMAINS.join('|')})-(.*).(?:hubspot|hubteam)(?:qa)?.com`);\n  const hubspotQuoteHubletRe = new RegExp(`^(.*).(?:hubspotquote)(?:qa)?.com`);\n  const hubspotDocumentsHubletRe = new RegExp(`^app-(.*).(?:hubspotdocuments)(?:qa)?.com`);\n  const hubspotSalesSubRe = new RegExp('^(?:[0-9]+).(.*).hs(?:qa)?-sales(?:crm)?-sub.com');\n  const hubspotFreeStarterHubletRe = new RegExp('^hs-(?:[0-9]+).s.(?:hubspotfree|hubspotstarter|hubspotemail)(?:qa)?-(.*).net');\n  const hubspotEmailHubletRe = new RegExp('^hs-(?:[0-9]+).s.(?:hubspotemail)(?:qa)?-(.*).com');\n  const sidekickOpenHubletRe = new RegExp('^t.sidekickopen(?:\\\\d)+-([a-z]+[0-9]).com');\n  const hsDataPrivacyHubletRe = new RegExp('^([a-z]+[0-9]).hs-data-privacy(?:qa)?.com');\n  const HUBLET_REGEXPS = [hubletRe, hubspotQuoteHubletRe, hubspotDocumentsHubletRe, hubspotSalesSubRe, hubspotFreeStarterHubletRe, hubspotEmailHubletRe, sidekickOpenHubletRe, hsDataPrivacyHubletRe];\n  const defaultKey = 'ENV';\n  const DEFAULT_NOT_SUPPORTED_ERROR_MSG = 'Enviro error: the default argument for .get and .getShort is no longer supported';\n  const getEnv = key => {\n    let result = window[key];\n    if (result == null) {\n      try {\n        result = window.sessionStorage.getItem(key);\n      } catch (e) {}\n    }\n    if (result == null) {\n      try {\n        result = window.localStorage.getItem(key);\n      } catch (e) {}\n    }\n    return result;\n  };\n  const getDefaultEnv = () => {\n    const env = getEnv(defaultKey);\n    if (env) {\n      return env;\n    } else if (qaRe.test(location.host)) {\n      return 'qa';\n    } else {\n      return 'prod';\n    }\n  };\n  const setEnv = (key, env) => {\n    window[key] = env;\n    return env;\n  };\n  const MAP = {\n    prod: 'production',\n    qa: 'development'\n  };\n  const normalize = env => {\n    if (typeof env === 'string') {\n      const lower = env.toLowerCase();\n      return MAP[lower] || lower;\n    }\n    return env;\n  };\n  const denormalize = env => {\n    env = typeof env === 'string' ? env.toLowerCase() : undefined;\n    return Object.keys(MAP).find(ours => env === MAP[ours]) || env;\n  };\n  const get = (service, defaultVal) => {\n    if (defaultVal != null) {\n      throw new Error(DEFAULT_NOT_SUPPORTED_ERROR_MSG);\n    }\n    let env = null;\n    if (service) {\n      const parts = service.split('.').reverse();\n      for (let i = 0; i < parts.length; i++) {\n        const pathPart = parts[i];\n        env = getEnv(`${pathPart.toUpperCase()}_ENV`);\n        if (env) {\n          break;\n        }\n      }\n    }\n    if (env == null) {\n      const defaultEnv = getDefaultEnv();\n      env = defaultEnv != null ? defaultEnv : 'qa';\n    }\n    return normalize(env);\n  };\n  const set = function set(key, env) {\n    if (arguments.length === 1) {\n      env = key;\n      key = defaultKey;\n    }\n    return setEnv(key, env);\n  };\n  const getInternal = (service, defaultVal) => {\n    if (defaultVal != null) {\n      throw new Error(DEFAULT_NOT_SUPPORTED_ERROR_MSG);\n    }\n    return denormalize(get(service));\n  };\n  const getShort = getInternal;\n  const isProd = service => getShort(service) === 'prod';\n  const isQa = service => getShort(service) === 'qa';\n  const deployed = service => {\n    let result;\n    if (typeof service === 'string') {\n      result = getEnv(`${service.toUpperCase()}_DEPLOYED`);\n    }\n    if (result == null) {\n      result = getEnv('DEPLOYED');\n    }\n    return result == null ? isDeployed : !!result;\n  };\n  const debug = (service, defaultVal = false) => {\n    let result;\n    if (typeof service === 'string') {\n      result = getEnv(`${service.toUpperCase()}_DEBUG`);\n    }\n    if (result == null) {\n      result = getEnv('DEBUG');\n    }\n    return result == null ? defaultVal : result;\n  };\n  const setDebug = (service, val = true) => {\n    if (typeof service === 'string') {\n      try {\n        if (val) {\n          localStorage.setItem(`${service.toUpperCase()}_DEBUG`, JSON.stringify(true));\n        } else {\n          localStorage.removeItem(`${service.toUpperCase()}_DEBUG`);\n        }\n      } catch (e) {\n        setEnv(`${service.toUpperCase()}_DEBUG`, val || undefined);\n      }\n    } else {\n      val = service != null ? service : true;\n      try {\n        if (val) {\n          localStorage.setItem('DEBUG', JSON.stringify(val));\n        } else {\n          localStorage.removeItem('DEBUG');\n        }\n      } catch (e) {\n        setEnv('DEBUG', val || undefined);\n      }\n    }\n  };\n  const enabled = (service, defaultVal = false) => {\n    let result = getEnv(`${service.toUpperCase()}_ENABLED`);\n    if (result == null) {\n      result = JSON.stringify(defaultVal);\n    }\n    return `${result}`.toLowerCase() === 'true';\n  };\n  const getHublet = () => {\n    const hubletOverride = getEnv('HUBLET');\n    if (hubletOverride) {\n      return hubletOverride;\n    }\n    for (const regexp of HUBLET_REGEXPS) {\n      if (regexp.test(location.hostname)) {\n        return regexp.exec(location.hostname)[1];\n      }\n    }\n    return 'na1';\n  };\n  function ifHublet({\n    isNa1,\n    isNonNa1\n  }, hublet) {\n    if (!hublet) {\n      hublet = getHublet();\n    }\n    if (hublet === 'na1') {\n      return typeof isNa1 === 'function' ? isNa1(hublet) : undefined;\n    } else if (typeof isNonNa1 === 'function') {\n      return isNonNa1(hublet);\n    }\n  }\n  return {\n    createEnviro,\n    debug,\n    denormalize,\n    deployed,\n    enabled,\n    get,\n    getHublet,\n    getInternal,\n    getShort,\n    isProd,\n    isQa,\n    ifHublet,\n    normalize,\n    set,\n    setDebug\n  };\n};\nvar _default = exports.default = createEnviro(document.location);\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.enableRejectionTracking = exports.disableRejectionTracking = void 0;\nvar _uuid = require(\"./utils/uuid\");\n/* hs-eslint ignored failing-rules */\n/* eslint-disable hubspot-dev/no-declarations */\n\nlet enabled = false;\nconst typeOfReason = reason => {\n  return reason === null ? 'Null' : reason === undefined ? 'Undefined' : Object.prototype.toString.call(reason).slice(8, -1);\n};\nconst sendAlerts = reason => {\n  const Raven = require('raven-js');\n  const unhandledRejectionUuid = (0, _uuid.getUniqueKey)();\n  const reasonType = typeOfReason(reason);\n  const ravenOpts = {\n    tags: {\n      isUnhandledPromiseRejection: true,\n      unhandledRejectionUuid,\n      typeOfReason: reasonType\n    },\n    extra: {\n      reasonObjKeys: Object.keys(reason).join()\n    }\n  };\n  if (typeof reason === 'string') {\n    Raven.captureMessage(reason, ravenOpts);\n  } else {\n    Raven.captureException(reason, ravenOpts);\n  }\n};\nconst isObject = it => {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\nconst handleUnhandledRejection = e => {\n  e.preventDefault();\n  if (isObject(e.promise)) {\n    console.error('Unhandled Promise Rejection', e.reason);\n    sendAlerts(e.reason);\n  }\n};\nconst disableRejectionTracking = () => {\n  enabled = false;\n  window.removeEventListener('unhandledrejection', handleUnhandledRejection);\n};\nexports.disableRejectionTracking = disableRejectionTracking;\nconst enableRejectionTracking = () => {\n  if (enabled) {\n    disableRejectionTracking();\n  }\n  enabled = true;\n  window.addEventListener('unhandledrejection', handleUnhandledRejection);\n};\nexports.enableRejectionTracking = enableRejectionTracking;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getUniqueKey = void 0;\n/* eslint-disable no-bitwise */\nconst getUniqueKey = () => {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n    const r = Math.random() * 16 | 0;\n    const v = c === 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n};\nexports.getUniqueKey = getUniqueKey;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getCorrelationIdFromResponse = getCorrelationIdFromResponse;\nexports.getCorrelationIdFromServerTiming = getCorrelationIdFromServerTiming;\nexports.getCorrelationIdFromXHR = getCorrelationIdFromXHR;\n/**\n * The server-timing header is a string which represents a map that looks like this:\n * \"cache;desc=\"Cache Read\";dur=23.2, hcid;desc=\"445b7839-9a35-4c18-ba6e-4251e0b20c96\"\"\n *\n * hcid is the correlation id we are interested in.\n */\nfunction getCorrelationIdFromServerTiming(serverTiming) {\n  var _valueEntry$split$;\n  const hcidEntry = serverTiming.split(',').find(entry => {\n    return entry.trim().startsWith('hcid;');\n  });\n  if (!hcidEntry) {\n    return null;\n  }\n  const valueEntry = hcidEntry.split(';').find(entry => {\n    return entry.trim().startsWith('desc=');\n  });\n  if (!valueEntry) {\n    return null;\n  }\n  const value = (_valueEntry$split$ = valueEntry.split('=')[1]) === null || _valueEntry$split$ === void 0 ? void 0 : _valueEntry$split$.trim();\n  if (!value) {\n    return null;\n  }\n  if (value.startsWith('\"') && value.endsWith('\"')) {\n    return JSON.parse(value);\n  }\n  return value;\n}\n\n/**\n * Instead of using xhr.getResponseHeader, we need to use xhr.getAllResponseHeaders\n * to avoid the warning message some browsers report to the console when the header\n * is blocked by CORS.\n */\nfunction getCorrelationIdFromXHR(xhr) {\n  const allHeaders = xhr.getAllResponseHeaders().split('\\r\\n');\n\n  // First try to get correlation ID from X-HubSpot-Correlation-Id header\n  const xHubspotCorrelationIdHeader = allHeaders.find(header => {\n    return header.toLowerCase().startsWith('x-hubspot-correlation-id');\n  });\n  if (xHubspotCorrelationIdHeader) {\n    const correlationId = xHubspotCorrelationIdHeader.slice('x-hubspot-correlation-id: '.length).trim();\n    if (correlationId) {\n      return correlationId;\n    }\n  }\n\n  // Fallback to Server-Timing header for backward compatibility\n  const serverTimingHeader = allHeaders.find(header => {\n    return header.toLowerCase().startsWith('server-timing');\n  });\n  if (!serverTimingHeader) {\n    return null;\n  }\n  return getCorrelationIdFromServerTiming(serverTimingHeader.slice('Server-Timing: '.length));\n}\n\n/**\n * Similar to getCorrelationIdFromXHR, but for fetch responses.\n */\nfunction getCorrelationIdFromResponse(response) {\n  var _find;\n  // First try to get correlation ID from X-HubSpot-Correlation-Id header\n  const xHubspotCorrelationId = response.headers.get('x-hubspot-correlation-id');\n  if (xHubspotCorrelationId) {\n    return xHubspotCorrelationId;\n  }\n\n  // Fallback to Server-Timing header for backward compatibility\n  const serverTimingHeader = (_find = [...response.headers.entries()].find(([key]) => key.toLowerCase() === 'server-timing')) === null || _find === void 0 ? void 0 : _find[1];\n  if (!serverTimingHeader) {\n    return null;\n  }\n  return getCorrelationIdFromServerTiming(serverTimingHeader);\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = htmlTreeAsString;\nconst MAX_TRAVERSE_HEIGHT = 5;\nconst MAX_CLASSES_LENGTH = 60;\nconst ATTRIBUTE_WHITELIST = ['name', 'title', 'alt', 'data-test-id',\n// Matches I18n string keys\n'data-key'];\n\n/**\n * Given a child DOM element, returns a query-selector statement describing that\n * and its ancestors\n * e.g. [HTMLElement] => body > div > input#foo.btn[name=baz]\n */\nfunction htmlTreeAsString(target) {\n  /* eslint no-extra-parens:0*/\n  const out = [];\n  const separator = ' > ';\n  let currentElement = target;\n  let height = 0;\n  while (currentElement && height < MAX_TRAVERSE_HEIGHT) {\n    const nextStr = htmlElementAsString(currentElement);\n    if (nextStr === 'html') {\n      break;\n    }\n\n    // If this is the first element (target) and it's restricted, return immediately\n    if (height === 0 && nextStr === '<restricted>') {\n      return '<restricted>';\n    }\n\n    // Skip restricted elements in parent traversal but include all others\n    if (nextStr !== '<restricted>') {\n      out.push(nextStr);\n    }\n    height += 1;\n\n    // Safely access parentNode - can throw SecurityError in cross-origin contexts\n    try {\n      currentElement = currentElement.parentNode;\n    } catch (e) {\n      // SecurityError when accessing parentNode, stop traversal\n      break;\n    }\n  }\n  return out.reverse().join(separator);\n}\n\n/**\n * Returns a simple, query-selector representation of a DOM element\n * e.g. [HTMLElement] => input#foo.btn[name=baz]\n */\nfunction htmlElementAsString(element) {\n  const out = [];\n  if (!element) {\n    return '';\n  }\n\n  // Safely access tagName - can throw SecurityError in cross-origin contexts\n  try {\n    if (!element.tagName) {\n      return '';\n    }\n    out.push(element.tagName.toLowerCase());\n  } catch (e) {\n    // SecurityError when accessing cross-origin element properties\n    return '<restricted>';\n  }\n\n  // Safely access element id\n  try {\n    if (element.id) {\n      out.push(`#${element.id}`);\n    }\n  } catch (e) {\n    // Ignore SecurityError for id access\n  }\n\n  // Safely access element attributes\n  for (const attribute of ATTRIBUTE_WHITELIST) {\n    try {\n      const value = element.getAttribute(attribute);\n      if (value) {\n        out.push(`[${attribute}=\"${value}\"]`);\n      }\n    } catch (e) {\n      // Ignore SecurityError for attribute access\n    }\n  }\n  let classesLength = 0;\n\n  // Safely access element classList\n  try {\n    for (const className of element.classList) {\n      // Filter out UIComponents private classes\n      if (className.startsWith('private-')) {\n        continue;\n      }\n      if (classesLength + className.length > MAX_CLASSES_LENGTH) {\n        break;\n      }\n      classesLength += className.length;\n      out.push(`.${className}`);\n    }\n  } catch (e) {\n    // Ignore SecurityError for classList access\n  }\n  return out.join('');\n}\nmodule.exports = exports.default;","module.exports = (function () {\n  if (typeof window.hubspot === 'undefined') {\n    throw new Error('Could not find hubspot global variable.');\n  }\n  return window.hubspot;\n}());","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\nmodule.exports = _interopRequireDefault, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","\"use strict\";\n'use es6';\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nrequire(\"HeadJS/js/modules/hns.js\");\nrequire(\"HeadJS/js/modules/hubspot.require.js\");\nrequire(\"HeadJS/js/modules/hubspot-define-lazy-by-default.js\");\nvar _hsPromiseRejectionTracking = require(\"hs-promise-rejection-tracking\");\nvar _hubspot = _interopRequireDefault(require(\"hubspot\"));\nvar _enablePersistedShowEventHandler = _interopRequireDefault(require(\"./enablePersistedShowEventHandler\"));\n(0, _hsPromiseRejectionTracking.enableRejectionTracking)();\n(0, _enablePersistedShowEventHandler.default)();\n\n// `useGlobals` override to make sure these legacy modules don't create globals\n_hubspot.default.modules.useGlobals = ns => ns !== 'raven-hubspot/configure' && ns !== 'PortalIdParser' && ns !== 'enviro';\n\n// backwards compatibility legacy modules for use in script tags\n// since we're generating simple manifests this `hubspot.define`\n// won't get statically analyzed so that fixes the build error about\n// 'raven-hubspot/configure' being provided by both head-dlb@dev\n// and raven-hubspot@some-version\n\n// currently sentry configuration logic depends on this being a legacy module\n_hubspot.default.define('raven-hubspot/configure', [], () => {\n  const ravenHubspotModule = require('raven-hubspot/configure');\n  return ravenHubspotModule.default || ravenHubspotModule;\n});\n\n// `mixin newRelicRUMandErrorMonitoringJS` depends on this legacy module\n_hubspot.default.define('PortalIdParser', [], () => {\n  const PortalIdParserModule = require('PortalIdParser');\n  return PortalIdParserModule.default || PortalIdParserModule;\n});\n\n// `mixin newRelicRUMandErrorMonitoringJS` and `hubspot-dlb` depend on this being a legacy module\n_hubspot.default.define('enviro', [], () => {\n  const enviroModule = require('enviro');\n  return enviroModule.default || enviroModule;\n});\n\n// We use `defineProperty` to create the globals so we can have hook into tracking usage when we choose to deprecate\n\n// backwards compatibility for libraries/apps that assume window.Raven.\nObject.defineProperty(window, 'Raven', {\n  get() {\n    return require('raven-js');\n  }\n});\nObject.defineProperty(window, 'enviro', {\n  get() {\n    const enviroModule = require('enviro');\n    return enviroModule.default || enviroModule;\n  }\n});"],"names":["dlbConsumerRequire","dlbConsumerIds","globalRoot","window","global","this","hns","hns2","namespace","obj","var_name","existing","queue","front","parts","split","parent","name","last_index","length","x","prop","hasOwnProperty","push","qSource","qTarget","shift","fprop","classList","nodeType","hubspot","updateDependencies","define","defineLazy","console","warn","modules","deferredModules","idleModulesDict","loadedModules","erroredModules","allModuleDefinitions","PLACEHOLDER_NS","placholderCounter","useGlobals","ns","getNamespace","i","names","len","getDeferredModules","getIdleModules","getLoadedModules","getErroredModules","getAllModuleDefinitions","nextPlaceholderName","replace","getBlockingModules","dep","out","depSet","modSet","j","module","deps","debug_define_enabled","rval","_cached_debug_define_enabled","HUBSPOT_DEBUG_DEFINE","test","localStorage","setItem","removeItem","e","runModule","moduleDef","result","args","allDeps","apply","failedNs","setTimeout","log","defineModule","modulesToDefine","depsDict","splice","isModuleRequired","addDeferredModule","idleModule","idleDepsToPromote","extractCallSite","callSite","fileName","getFileName","lineNumber","getLineNumber","columnNumber","getColumnNumber","functionName","getFunctionName","getStackTrace","Error","captureStackTrace","stack","orig","prepareStackTrace","_","err","slice","map","filter","c","indexOf","defineHelper","isEagerDefinition","undefined","defineEager","require","onLoaded","requireSync","moduleId","mod","unhandledReasons","unhandledRejections","addEventListener","promise","reason","at","getUnhandledReasons","_interopRequireDefault","Object","defineProperty","exports","value","configure","_enviro","_PortalIdParser","_ravenJs","_hubspot","_getDeployInfo","MAX_MSG_CHARS","getSeleniumCookieValue","document","cookie","match","decodeURIComponent","__err","getDataCallback","origDataCallback","data","seleniumCookieValue","extra","seleniumCookie","jsonString","JSON","stringify","default","debug","error","message","dsn","options","bender","getShort","defaultOptions","sampleRate","stacktrace","ignoreErrors","ignoreUrls","providedErrorsToIgnore","assign","env","isAcceptanceTest","includes","deployInfo","getDeployInfo","config","release","currentProjectVersion","environment","tags","project","deployable","currentProject","portalId","get","preserveGlobalId","hublet","getHublet","breadcrumbCallback","crumb","autoBreadcrumbs","dataCallback","shouldSendCallback","install","deployed","setTransport","onSuccess","origSetInterval","setInterval","fn","rest","captureException","origSetTimeout","DEPLOYABLE_SERVER_TIMING_ENTRY_NAME","perf","performance","firstNavigationEntry","getEntriesByType","description","serverTiming","find","entry","deployId","RavenConfigError","prototype","constructor","wrapMethod","level","callback","originalConsoleLevel","originalConsole","sentryLevel","call","arguments","msg","join","logger","Function","Raven","RavenConstructor","_window","self","_Raven","noConflict","afterLoad","bind","setDSN","context","wrap","uninstall","capturePageEvent","captureMessage","captureBreadcrumb","addPlugin","setUserContext","setExtraContext","setTagsContext","clearContext","getContext","setEnvironment","setRelease","setDataCallback","setBreadcrumbCallback","setShouldSendCallback","lastException","lastEventId","isSetup","showReportDialog","TraceKit","getCorrelationIdFromResponse","getCorrelationIdFromXHR","utils","isError","isObject","isErrorEvent","isUndefined","isFunction","isString","isEmptyObject","each","objectMerge","truncate","hasKey","joinRegExp","urlencode","uuid4","isSameException","isSameStacktrace","parseUrl","fill","wrapConsoleMethod","dsnKeys","dsnPattern","now","Date","_document","_navigator","navigator","keepOriginalCallback","original","_hasJSON","_hasDocument","_hasNavigator","_lastCapturedException","_lastData","_lastEventId","_globalServer","_globalKey","_globalProject","_globalContext","_globalOptions","whitelistUrls","includePaths","collectWindowErrors","maxMessageLength","maxUrlLength","stackTraceLimit","instrument","chirpErrorEnhancement","enabled","extractServiceInfo","enhanceErrorMessages","includeCallStack","maxNestingDepth","_ignoreOnError","_isRavenInstalled","_originalErrorStackTraceLimit","_originalConsole","_originalConsoleMethods","_plugins","_startTime","_wrappedBuiltIns","_breadcrumbs","_lastCapturedEvent","_keypressTimeout","_location","location","_lastHref","href","_resetBackoff","method","VERSION","_logDebug","globalOptions","key","maxBreadcrumbs","Math","max","min","autoBreadcrumbDefaults","xhr","dom","toString","instrumentDefaults","tryCatch","report","subscribe","_handleOnErrorStackInfo","_instrumentTryCatch","_instrumentBreadcrumbs","_drainPlugins","uri","_parseDSN","lastSlash","path","lastIndexOf","substr","_dsn","user","_globalSecret","pass","_getGlobalServer","_globalEndpoint","_globalPageEventEndpoint","func","_before","__raven__","__raven_wrapper__","ravenWrapped","deep","_ignoreNextOnError","property","__inner__","_restoreBuiltIns","eventName","_clearExtraAttribute","isPageEvent","_send","ex","isNotError","isNotErrorEvent","isErrorEventWithoutError","trimHeadFrames","errorCause","cause","_processErrorCause","extraData","_isChirpError","_enhanceChirpError","computeStackTrace","_handleStackInfo","ex1","_triggerEvent","initialCall","fileurl","url","fingerprint","frames","_prepareFrames","reverse","timestamp","plugin","pluginArgs","_mergeContext","parse","transport","ravenNotConfiguredError","RavenConfig","eventId","encode","encodeURIComponent","qs","email","globalServer","script","createElement","async","src","head","body","appendChild","errorCauseStack","errorCauseStackFrames","stackFrame","file","filename","methodName","function","lineno","column","colno","errorCauseMessage","_hasChirpErrorStructure","_containsChirpErrorInstance","deepError","type","chirpContext","_extractChirpContext","chirpServiceName","serviceName","chirpMethodName","chirpErrorType","errorType","chirpUserDefinedError","userDefinedError","chirpInternalErrorType","internalErrorType","chirpOriginalMessage","originalMessage","chirpCallStack","callStack","chirpRequestInfo","requestInfo","_formatEnhancedChirpMessage","messageMatch","currentError","depth","maxDepth","_extractServiceName","chirpErrorMessage","internalError","serviceMatch","service","enhanced","eventType","evt","toUpperCase","createEvent","initEvent","createEventObject","dispatchEvent","fireEvent","toLowerCase","_breadcrumbEventHandler","evtName","target","category","_keypressEventHandler","debounceDuration","tagName","isContentEditable","timeout","clearTimeout","_captureUrlChange","from","to","parsedLoc","parsedTo","parsedFrom","protocol","host","relative","redactSensitiveUrlParams","wrappedBuiltIns","wrapTimeFn","t","Array","originalCallback","wrapEventTarget","proto","capture","secure","handleEvent","before","clickHandler","keypressHandler","requestAnimationFrame","cb","eventTargets","wrapProp","xhrproto","XMLHttpRequest","origOpen","__raven_xhr","status_code","origSend","onreadystatechangeHandler","readyState","status","correlationId","props","onreadystatechange","origFetch","ravenFetchWrapper","fetchInput","Request","fetchData","then","response","attachEvent","chrome","hasPushAndReplaceState","app","runtime","history","pushState","replaceState","oldOnPopState","onpopstate","currentHref","historyReplacementFunction","origHistFunction","consoleMethodCallback","builtin","installer","concat","str","m","exec","allowSecretKey","port","stackInfo","_processException","frame","_normalizeFrame","in_app","some","k","l","stackInfoUrl","normalized","line","prefixedMessage","exception","values","culprit","_trimPacket","request","Referer","_getHttpData","httpData","userAgent","headers","referrer","_backoffDuration","_backoffStart","_shouldBackoff","_isRepeatData","current","last","_setBackoffState","retry","getResponseHeader","parseInt","_getRecentFailedNetworkRequest","recentBreadcrumbs","breadcrumb","baseData","platform","sessionId","hmplData","getItem","parsedHmplData","session_id","recentFailedRequest","breadcrumbs","serverName","server_name","random","_sendProcessedPayload","_getUuid","allowDuplicates","event_id","auth","sentry_version","sentry_client","sentry_key","sentry_secret","params","hasProjectTag","hasParams","_makeRequest","query","onError","opts","XDomainRequest","onload","onerror","open","send","originalError","setUser","setReleaseContext","what","supportsErrorEvent","ErrorEvent","wrappedCallback","normalizedData","obj1","obj2","objectFrozen","isFrozen","object","patterns","pattern","sources","source","RegExp","o","pairs","fragment","crypto","msCrypto","getRandomValues","arr","Uint16Array","pad","num","v","r","isOnlyOneTruthy","a","b","ex2","isSameObject","keys1","keys","keys2","stack1","stack2","frames1","frames2","replacement","track","parsedUrl","URL","searchParams","has","set","hash","substring","_slice","UNKNOWN_FUNCTION","ERROR_TYPES_RE","getLocationHref","_oldOnerrorHandler","_onErrorHandlerInstalled","handlers","lastArgs","lastExceptionStack","handler","installGlobalHandler","unsubscribe","unsubscribeAll","uninstallGlobalHandler","notifyHandlers","isWindowError","inner","traceKitWindowOnError","lineNo","colNo","augmentStackTraceWithInitialElement","processLastException","groups","_lastExceptionStack","_lastArgs","rethrow","incomplete","computeStackTraceFromStackProp","submatch","element","gecko","winjs","geckoEval","chromeEval","lines","isNative","initial","unshift","partial","computeStackTraceByWalkingCallerChain","item","funcs","recursion","curr","caller","input","sourceURL","getSerialize","serializer","haystack","needle","replacer","spaces","cycleReplacer","stringifyError","thisPos","Infinity","_default","event","persisted","reload","id","pathRegex","queryParamRegex","getPortalIdFromPath","regex","parsePortalIdFromString","pathname","getPortalIdFromQueryParam","search","string","idRe","reparse","portal","SUBDOMAINS","NET_DOMAINS","ORG_DOMAINS","DOMAINS","com","net","org","createEnviro","isDeployed","entries","tld","regexList","hostname","qaRe","HUBLET_REGEXPS","defaultKey","DEFAULT_NOT_SUPPORTED_ERROR_MSG","getEnv","sessionStorage","getDefaultEnv","setEnv","MAP","prod","qa","normalize","lower","denormalize","ours","defaultVal","pathPart","defaultEnv","getInternal","isProd","isQa","hubletOverride","regexp","ifHublet","isNa1","isNonNa1","setDebug","val","enableRejectionTracking","disableRejectionTracking","_uuid","typeOfReason","sendAlerts","ravenOpts","isUnhandledPromiseRejection","unhandledRejectionUuid","getUniqueKey","reasonObjKeys","it","handleUnhandledRejection","preventDefault","removeEventListener","getCorrelationIdFromServerTiming","_valueEntry$split$","hcidEntry","trim","startsWith","valueEntry","endsWith","allHeaders","getAllResponseHeaders","xHubspotCorrelationIdHeader","header","serverTimingHeader","_find","xHubspotCorrelationId","htmlTreeAsString","MAX_TRAVERSE_HEIGHT","MAX_CLASSES_LENGTH","ATTRIBUTE_WHITELIST","separator","currentElement","height","nextStr","htmlElementAsString","parentNode","attribute","getAttribute","classesLength","className","__esModule","__webpack_module_cache__","__webpack_require__","cachedModule","__webpack_modules__","n","getter","d","definition","enumerable","Symbol","toStringTag","linkDlb","ids","dlbcr","otherId","_hsPromiseRejectionTracking","_enablePersistedShowEventHandler","ravenHubspotModule","PortalIdParserModule","enviroModule"],"sourceRoot":""}